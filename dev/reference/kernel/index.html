
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Async-kernel for Jupyter">
      
      
      
        <link rel="canonical" href="https://fleming79.github.io/async-kernel/dev/reference/kernel/">
      
      
        <link rel="prev" href="../command/">
      
      
        <link rel="next" href="../kernelspec/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Kernel - async-kernel</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M11%209h2V7h-2m1%2013c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208m0-18A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202m-1%2015h2v-6h-2z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#async_kernel.kernel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
               You're not
viewing the latest version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="async-kernel" class="md-header__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            async-kernel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kernel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="darkula" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../usage/" class="md-tabs__link">
          
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
    
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="async-kernel" class="md-nav__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    async-kernel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../usage/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../notebooks/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/simple_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple example
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concurrency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/caller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caller
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Kernel
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Kernel
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.anyio_backend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;anyio_backend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.anyio_backend_options" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;anyio_backend_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_manager" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.concurrency_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;concurrency_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.connection_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debugger" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;debugger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execution_count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;execution_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.help_links" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;help_links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.ip" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.quiet" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;quiet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.session" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shell" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_concurrency_run_modes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_info_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_msg" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_msg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_open" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_open
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;complete_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debug_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;debug_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.excepthook" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;excepthook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execute_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_run_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_run_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.getpass" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;getpass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.handle_message_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_message_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.history_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;history_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.inspect_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inspect_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interrupt_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;interrupt_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.iopub_send" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;iopub_send
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.is_complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_complete_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;kernel_info_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.raw_input" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;raw_input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shutdown_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.topic" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.unraisablehook" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unraisablehook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.KernelInterruptError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KernelInterruptError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.bind_socket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;bind_socket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.error_to_content" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;error_to_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;run_kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" run_kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel(kernel)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;kernel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel(wait_exit_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;wait_exit_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernelspec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kernelspec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asyncshell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asyncshell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Typing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.anyio_backend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;anyio_backend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.anyio_backend_options" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;anyio_backend_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_manager" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.concurrency_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;concurrency_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.connection_file" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debugger" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;debugger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execution_count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;execution_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.help_links" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;help_links
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.ip" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;ip
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.quiet" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;quiet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.session" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shell" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shell
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.__aenter__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__aenter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_concurrency_run_modes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_info_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_msg" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_msg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_open" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_open
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;complete_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debug_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;debug_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.excepthook" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;excepthook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execute_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_run_mode" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_run_mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.getpass" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;getpass
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.handle_message_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;handle_message_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.history_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;history_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.inspect_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inspect_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interrupt_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;interrupt_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.iopub_send" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;iopub_send
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.is_complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_complete_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;kernel_info_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_connection_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.raw_input" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;raw_input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shutdown_request" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown_request
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.topic" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;topic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.unraisablehook" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unraisablehook
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.KernelInterruptError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KernelInterruptError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.bind_socket" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;bind_socket
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.error_to_content" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;error_to_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;run_kernel
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" run_kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel(kernel)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;kernel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.run_kernel(wait_exit_context)" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-parameter"></code>&nbsp;wait_exit_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                  
                  


  
  


  <h1>Kernel</h1>

<div class="doc doc-object doc-module">



<h2 id="async_kernel.kernel" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">async_kernel.kernel</span>


<a href="#async_kernel.kernel" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">










<p><span class="doc-section-title">Classes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="Kernel (async_kernel.kernel.Kernel)" href="#async_kernel.kernel.Kernel">Kernel</a></code></b>
          –
          <div class="doc-md-description">
            <p>An asynchronous kernel with an anyio backend providing an IPython AsyncInteractiveShell with zmq sockets.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="KernelInterruptError (async_kernel.kernel.KernelInterruptError)" href="#async_kernel.kernel.KernelInterruptError">KernelInterruptError</a></code></b>
          –
          <div class="doc-md-description">
            <p>Raised to interrupt the kernel.</p>
          </div>
        </li>
    </ul>




<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="run_kernel (async_kernel.kernel.run_kernel)" href="#async_kernel.kernel.run_kernel">run_kernel</a></code></b>
            –
            <div class="doc-md-description">
              <p>Runs a kernel using AnyIO, handling exceptions and setting the exit code.</p>
            </div>
          </li>
    </ul>





  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="async_kernel.kernel.Kernel" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Kernel</span>


<a href="#async_kernel.kernel.Kernel" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Kernel</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel(settings)">settings</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>An asynchronous kernel with an anyio backend providing an IPython AsyncInteractiveShell with zmq sockets.</p>
<p>Only one instance will be created/run at a time. The instance can be obtained with <code>Kernel()</code>.</p>
<p>To start the kernel:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="async_kernel.kernel.Kernel--shell" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><input id="async_kernel.kernel.Kernel--normal" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><input id="async_kernel.kernel.Kernel--start-classmethod" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><input id="async_kernel.kernel.Kernel--asynchronously-inside-anyio-event-loop" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="async_kernel.kernel.Kernel--shell">Shell</label><label for="async_kernel.kernel.Kernel--normal">Normal</label><label for="async_kernel.kernel.Kernel--start-classmethod">start (<code>classmethod</code>)</label><label for="async_kernel.kernel.Kernel--asynchronously-inside-anyio-event-loop">Asynchronously inside anyio event loop</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>At the command prompt.</p>
<div class="highlight"><pre><span></span><code>async-kernel<span class="w"> </span>-f<span class="w"> </span>.
</code></pre></div>
<p>See also:</p>
<p>-</p>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">async_kernel.__main__</span><span class="w"> </span><span class="kn">import</span> <span class="n">main</span>

<span class="n">main</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">Kernel</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">kernel</span> <span class="o">=</span> <span class="n">Kernel</span><span class="p">()</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">kernel</span><span class="o">.</span><span class="n">start_in_context</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep_forever</span><span class="p">()</span>
</code></pre></div>
<details class="tip" open="open">
<summary>Tip</summary>
<p>This is a convenient way to start a kernel for debugging.</p>
</details>
</div>
</div>
</div>
<p>Origins: <a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.kernelbase.Kernel">IPyKernel Kernel</a>, <a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.kernelapp.IPKernelApp">IPyKernel IPKernelApp</a> &amp;  <a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.ipkernel.IPythonKernel">IPyKernel IPythonKernel</a></p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="__aenter__


  
      async
   (async_kernel.kernel.Kernel.__aenter__)" href="#async_kernel.kernel.Kernel.__aenter__">__aenter__</a></code></b>
            –
            <div class="doc-md-description">
              <p>Start the kernel.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="all_concurrency_run_modes (async_kernel.kernel.Kernel.all_concurrency_run_modes)" href="#async_kernel.kernel.Kernel.all_concurrency_run_modes">all_concurrency_run_modes</a></code></b>
            –
            <div class="doc-md-description">
              <p>Generates a dictionary containing all combinations of SocketID, KernelConcurrencyMode, and MsgType,</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="comm_close


  
      async
   (async_kernel.kernel.Kernel.comm_close)" href="#async_kernel.kernel.Kernel.comm_close">comm_close</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms">comm close request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="comm_info_request


  
      async
   (async_kernel.kernel.Kernel.comm_info_request)" href="#async_kernel.kernel.Kernel.comm_info_request">comm_info_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info">comm info request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="comm_msg


  
      async
   (async_kernel.kernel.Kernel.comm_msg)" href="#async_kernel.kernel.Kernel.comm_msg">comm_msg</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages">comm msg request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="comm_open


  
      async
   (async_kernel.kernel.Kernel.comm_open)" href="#async_kernel.kernel.Kernel.comm_open">comm_open</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm">comm open request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="complete_request


  
      async
   (async_kernel.kernel.Kernel.complete_request)" href="#async_kernel.kernel.Kernel.complete_request">complete_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion">completion request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="debug_request


  
      async
   (async_kernel.kernel.Kernel.debug_request)" href="#async_kernel.kernel.Kernel.debug_request">debug_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="excepthook (async_kernel.kernel.Kernel.excepthook)" href="#async_kernel.kernel.Kernel.excepthook">excepthook</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle an exception.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="execute_request


  
      async
   (async_kernel.kernel.Kernel.execute_request)" href="#async_kernel.kernel.Kernel.execute_request">execute_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute">execute request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="get_connection_info (async_kernel.kernel.Kernel.get_connection_info)" href="#async_kernel.kernel.Kernel.get_connection_info">get_connection_info</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return the connection info as a dict.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="get_run_mode (async_kernel.kernel.Kernel.get_run_mode)" href="#async_kernel.kernel.Kernel.get_run_mode">get_run_mode</a></code></b>
            –
            <div class="doc-md-description">
              <p>Determine the run mode for a given channel, message type and concurrency mode.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="getpass (async_kernel.kernel.Kernel.getpass)" href="#async_kernel.kernel.Kernel.getpass">getpass</a></code></b>
            –
            <div class="doc-md-description">
              <p>Forward getpass to frontends.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="handle_message_request


  
      async
   (async_kernel.kernel.Kernel.handle_message_request)" href="#async_kernel.kernel.Kernel.handle_message_request">handle_message_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>The main handler for all shell and control messages.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="history_request


  
      async
   (async_kernel.kernel.Kernel.history_request)" href="#async_kernel.kernel.Kernel.history_request">history_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#history">history request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="inspect_request


  
      async
   (async_kernel.kernel.Kernel.inspect_request)" href="#async_kernel.kernel.Kernel.inspect_request">inspect_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection">inspect request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="interrupt_request


  
      async
   (async_kernel.kernel.Kernel.interrupt_request)" href="#async_kernel.kernel.Kernel.interrupt_request">interrupt_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt">interrupt request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="iopub_send (async_kernel.kernel.Kernel.iopub_send)" href="#async_kernel.kernel.Kernel.iopub_send">iopub_send</a></code></b>
            –
            <div class="doc-md-description">
              <p>Send a message on the zmq iopub socket.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="is_complete_request


  
      async
   (async_kernel.kernel.Kernel.is_complete_request)" href="#async_kernel.kernel.Kernel.is_complete_request">is_complete_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness">is_complete request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="kernel_info_request


  
      async
   (async_kernel.kernel.Kernel.kernel_info_request)" href="#async_kernel.kernel.Kernel.kernel_info_request">kernel_info_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info">kernel info request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="load_connection_info (async_kernel.kernel.Kernel.load_connection_info)" href="#async_kernel.kernel.Kernel.load_connection_info">load_connection_info</a></code></b>
            –
            <div class="doc-md-description">
              <p>Load connection info from a dict containing connection info.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="raw_input (async_kernel.kernel.Kernel.raw_input)" href="#async_kernel.kernel.Kernel.raw_input">raw_input</a></code></b>
            –
            <div class="doc-md-description">
              <p>Forward raw_input to frontends.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="run_handler


  
      async
   (async_kernel.kernel.Kernel.run_handler)" href="#async_kernel.kernel.Kernel.run_handler">run_handler</a></code></b>
            –
            <div class="doc-md-description">
              <p>Runs the handler in the context of the job/message sending the reply content if it is provided.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="shutdown_request


  
      async
   (async_kernel.kernel.Kernel.shutdown_request)" href="#async_kernel.kernel.Kernel.shutdown_request">shutdown_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown">shutdown request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="stop


  
      staticmethod
   (async_kernel.kernel.Kernel.stop)" href="#async_kernel.kernel.Kernel.stop">stop</a></code></b>
            –
            <div class="doc-md-description">
              <p>Stop the running kernel.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="topic (async_kernel.kernel.Kernel.topic)" href="#async_kernel.kernel.Kernel.topic">topic</a></code></b>
            –
            <div class="doc-md-description">
              <p>prefixed topic for IOPub messages</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="unraisablehook (async_kernel.kernel.Kernel.unraisablehook)" href="#async_kernel.kernel.Kernel.unraisablehook">unraisablehook</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle unraisable exceptions (during gc for instance).</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="anyio_backend


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.anyio_backend)" href="#async_kernel.kernel.Kernel.anyio_backend">anyio_backend</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="anyio_backend_options


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.anyio_backend_options)" href="#async_kernel.kernel.Kernel.anyio_backend_options">anyio_backend_options</a></code></b>
              (<code><span title="traitlets.Dict">Dict</span>[<span title="async_kernel.kernelspec.Backend">Backend</span>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>] | None]</code>)
          –
          <div class="doc-md-description">
            <p>Default options to use with <a class="autorefs autorefs-external" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.run">anyio.run</a>. See also: <code>Kernel.handle_message_request</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="comm_manager


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.comm_manager)" href="#async_kernel.kernel.Kernel.comm_manager">comm_manager</a></code></b>
              (<code><span title="traitlets.Instance">Instance</span>[<span title="async_kernel.comm.CommManager">CommManager</span>]</code>)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="concurrency_mode


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.concurrency_mode)" href="#async_kernel.kernel.Kernel.concurrency_mode">concurrency_mode</a></code></b>
          –
          <div class="doc-md-description">
            <p>The mode to use when getting the run mode for running the handler of a message request.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="connection_file


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.connection_file)" href="#async_kernel.kernel.Kernel.connection_file">connection_file</a></code></b>
              (<code><span title="traitlets.TraitType">TraitType</span>[<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>)
          –
          <div class="doc-md-description">
            <p>JSON file in which to store connection info [default: kernel-<pid>.json]</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="debugger


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.debugger)" href="#async_kernel.kernel.Kernel.debugger">debugger</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="execution_count


  
      property
   (async_kernel.kernel.Kernel.execution_count)" href="#async_kernel.kernel.Kernel.execution_count">execution_count</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The execution count in context of the current coroutine, else the current value if there isn't one in context.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="help_links


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.help_links)" href="#async_kernel.kernel.Kernel.help_links">help_links</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="ip


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.ip)" href="#async_kernel.kernel.Kernel.ip">ip</a></code></b>
          –
          <div class="doc-md-description">
            <p>The kernel's IP address [default localhost].</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="kernel_name


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.kernel_name)" href="#async_kernel.kernel.Kernel.kernel_name">kernel_name</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <span title="traitlets.Unicode">Unicode</span></code>)
          –
          <div class="doc-md-description">
            <p>The kernels name - if it contains 'trio' a trio backend will be used instead of an asyncio backend.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="log


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.log)" href="#async_kernel.kernel.Kernel.log">log</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="quiet


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.quiet)" href="#async_kernel.kernel.Kernel.quiet">quiet</a></code></b>
          –
          <div class="doc-md-description">
            <p>Only send stdout/stderr to output stream</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="session


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.session)" href="#async_kernel.kernel.Kernel.session">session</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.kernel.Kernel.shell)" href="#async_kernel.kernel.Kernel.shell">shell</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>

                  <details class="quote">
                    <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialised</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># Only initialize once</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_initialised</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">excepthook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excepthook</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">unraisablehook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unraisablehook</span>
    <span class="n">signal</span><span class="o">.</span><span class="n">signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_signal_handler</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MPLBACKEND&quot;</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MPLBACKEND&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;module://matplotlib_inline.backend_inline&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">settings</span> <span class="ow">or</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.anyio_backend" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">anyio_backend</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.anyio_backend" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">anyio_backend</span> <span class="o">=</span> <span class="n"><span title="traitlets.UseEnum">UseEnum</span></span><span class="p">(</span><span class="n"><span title="async_kernel.kernelspec.Backend">Backend</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.anyio_backend_options" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">anyio_backend_options</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.anyio_backend_options" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">anyio_backend_options</span><span class="p">:</span> <span class="n"><span title="traitlets.Dict">Dict</span></span><span class="p">[</span><span class="n"><span title="async_kernel.kernelspec.Backend">Backend</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="traitlets.Dict">Dict</span></span><span class="p">(</span><span class="n"><span title="traitlets.Dict(allow_none)">allow_none</span></span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Default options to use with <a class="autorefs autorefs-external" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.run">anyio.run</a>. See also: <code>Kernel.handle_message_request</code></p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.comm_manager" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">comm_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_manager" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comm_manager</span><span class="p">:</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">[</span><span class="n"><span title="async_kernel.comm.CommManager">CommManager</span></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="s1">&#39;async_kernel.comm.CommManager&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.concurrency_mode" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">concurrency_mode</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.concurrency_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">concurrency_mode</span> <span class="o">=</span> <span class="n"><span title="traitlets.UseEnum">UseEnum</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="KernelConcurrencyMode (async_kernel.typing.KernelConcurrencyMode)" href="../typing/#async_kernel.typing.KernelConcurrencyMode">KernelConcurrencyMode</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The mode to use when getting the run mode for running the handler of a message request.</p>


<details class="see-also" open>
  <summary>See also</summary>
  <ul>
<li><a class="autorefs autorefs-internal" title="handle_message_request


  
      async
  " href="#async_kernel.kernel.Kernel.handle_message_request">async_kernel.Kernel.handle_message_request</a></li>
</ul>
</details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.connection_file" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">connection_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.connection_file" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">connection_file</span><span class="p">:</span> <span class="n"><span title="traitlets.TraitType">TraitType</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="traitlets.TraitType">TraitType</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JSON file in which to store connection info [default: kernel-<pid>.json]</p>
<p>This file will contain the IP, ports, and authentication key needed to connect
clients to this kernel. By default, this file will be created in the security dir
of the current profile, but can be specified by absolute path.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.debugger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">debugger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.debugger" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">debugger</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><span title="async_kernel.debugger.Debugger">Debugger</span></span><span class="p">,</span> <span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.execution_count" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">execution_count</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.execution_count" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">execution_count</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The execution count in context of the current coroutine, else the current value if there isn't one in context.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.help_links" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">help_links</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.help_links" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">help_links</span> <span class="o">=</span> <span class="n"><span title="traitlets.Tuple">Tuple</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.ip" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">ip</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.ip" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">ip</span> <span class="o">=</span> <span class="n"><span title="traitlets.Unicode">Unicode</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The kernel's IP address [default localhost].</p>
<p>If the IP address is something other than localhost, then Consoles on other machines 
will be able to connect to the Kernel, so be careful!</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.kernel_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">kernel_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.kernel_name" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kernel_name</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><span title="traitlets.Unicode">Unicode</span></span> <span class="o">=</span> <span class="n"><span title="traitlets.Unicode">Unicode</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The kernels name - if it contains 'trio' a trio backend will be used instead of an asyncio backend.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.log" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">log</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.log" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.quiet" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">quiet</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.quiet" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">quiet</span> <span class="o">=</span> <span class="n"><span title="traitlets.Bool">Bool</span></span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Only send stdout/stderr to output stream</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.session" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">session</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.session" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">session</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" title="jupyter_client.session.Session" href="https://jupyter-client.readthedocs.io/en/stable/api/jupyter_client.html#jupyter_client.session.Session">Session</a></span><span class="p">,</span> <span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.kernel.Kernel.shell" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">shell</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.shell" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">shell</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="AsyncInteractiveShell (async_kernel.asyncshell.AsyncInteractiveShell)" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell">AsyncInteractiveShell</a></span><span class="p">,</span> <span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.__aenter__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__aenter__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.__aenter__" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__aenter__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Start the kernel.</p>
<ul>
<li>Only one instance can (should) run at a time.</li>
<li>An instance can only be started once.</li>
<li>A new instance can be started after a previous instance has stopped.</li>
</ul>
<p>Usage:</p>
<pre><code>```python
async with Kerne() as kernel:
    await anyio.sleep_forever()
```
</code></pre>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the kernel.</span>

<span class="sd">    - Only one instance can (should) run at a time.</span>
<span class="sd">    - An instance can only be started once.</span>
<span class="sd">    - A new instance can be started after a previous instance has stopped.</span>

<span class="sd">    Usage:</span>

<span class="sd">        ```python</span>
<span class="sd">        async with Kerne() as kernel:</span>
<span class="sd">            await anyio.sleep_forever()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">AsyncExitStack</span><span class="p">()</span> <span class="k">as</span> <span class="n">stack</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">await</span> <span class="n">stack</span><span class="o">.</span><span class="n">enter_async_context</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_in_context</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__stack</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop_all</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.all_concurrency_run_modes" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">all_concurrency_run_modes</span>


<a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">all_concurrency_run_modes</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.all_concurrency_run_modes(socket_ids)">socket_ids</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="control


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="control


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">),</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.all_concurrency_run_modes(msg_types)">msg_types</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span>
    <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;KernelConcurrencyMode&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="SocketID (async_kernel.typing.SocketID)" href="../typing/#async_kernel.typing.SocketID">SocketID</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="KernelConcurrencyMode (async_kernel.typing.KernelConcurrencyMode)" href="../typing/#async_kernel.typing.KernelConcurrencyMode">KernelConcurrencyMode</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates a dictionary containing all combinations of SocketID, KernelConcurrencyMode, and MsgType,
along with their corresponding RunMode (if available).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">all_concurrency_run_modes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">socket_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">),</span>
    <span class="n">msg_types</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">MsgType</span><span class="p">]</span> <span class="o">=</span> <span class="n">MsgType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span>
    <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;KernelConcurrencyMode&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span>
    <span class="nb">tuple</span><span class="p">[</span><span class="n">SocketID</span><span class="p">,</span> <span class="n">KernelConcurrencyMode</span><span class="p">,</span> <span class="n">MsgType</span><span class="p">,</span> <span class="n">RunMode</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
<span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a dictionary containing all combinations of SocketID, KernelConcurrencyMode, and MsgType,</span>
<span class="sd">    along with their corresponding RunMode (if available).&quot;&quot;&quot;</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">socket_id</span> <span class="ow">in</span> <span class="n">socket_ids</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">concurrency_mode</span> <span class="ow">in</span> <span class="n">KernelConcurrencyMode</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">msg_type</span> <span class="ow">in</span> <span class="n">msg_types</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">concurrency_mode</span><span class="o">=</span><span class="n">concurrency_mode</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">concurrency_mode</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
    <span class="n">data_</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;KernelConcurrencyMode&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span> <span class="n">data_</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.comm_close" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">comm_close</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_close" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_close</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_close(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms">comm close request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm close request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_close</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket&quot;</span><span class="p">],</span> <span class="n">ident</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;ident&quot;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.comm_info_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">comm_info_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_info_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_info_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_info_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info">comm info request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="n">target_name</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">comms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span><span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span> <span class="o">==</span> <span class="n">target_name</span> <span class="ow">or</span> <span class="n">target_name</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;comms&quot;</span><span class="p">:</span> <span class="n">comms</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.comm_msg" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">comm_msg</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_msg" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_msg</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_msg(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages">comm msg request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm msg request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_msg</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket&quot;</span><span class="p">],</span> <span class="n">ident</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;ident&quot;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.comm_open" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">comm_open</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_open" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_open</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_open(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm">comm open request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm open request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_open</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket&quot;</span><span class="p">],</span> <span class="n">ident</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;ident&quot;</span><span class="p">],</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.complete_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">complete_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.complete_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.complete_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion">completion request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [completion request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="n">code</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]</span>
    <span class="n">cursor_pos</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">IPython</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">provisionalcompleter</span><span class="p">():</span>
        <span class="n">completions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">Completer</span><span class="o">.</span><span class="n">completions</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">cursor_pos</span><span class="p">)</span>
        <span class="n">completions</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">IPython</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">completer</span><span class="o">.</span><span class="n">rectify_completions</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">completions</span><span class="p">))</span>
    <span class="n">comps</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
            <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">end</span><span class="p">,</span>
            <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="s2">&quot;signature&quot;</span><span class="p">:</span> <span class="n">comp</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">completions</span>
    <span class="p">]</span>
    <span class="n">s</span><span class="p">,</span> <span class="n">e</span> <span class="o">=</span> <span class="n">completions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">completions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">end</span> <span class="k">if</span> <span class="n">completions</span> <span class="k">else</span> <span class="p">(</span><span class="n">cursor_pos</span><span class="p">,</span> <span class="n">cursor_pos</span><span class="p">)</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">completions</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;matches&quot;</span><span class="p">:</span> <span class="n">matches</span><span class="p">,</span>
        <span class="s2">&quot;cursor_end&quot;</span><span class="p">:</span> <span class="n">e</span><span class="p">,</span>
        <span class="s2">&quot;cursor_start&quot;</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span>
        <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;_jupyter_types_experimental&quot;</span><span class="p">:</span> <span class="n">comps</span><span class="p">},</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.debug_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">debug_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.debug_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">debug_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.debug_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug request</a> (control only).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">debug_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [debug request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request) (control only).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.excepthook" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">excepthook</span>


<a href="#async_kernel.kernel.Kernel.excepthook" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">excepthook</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.excepthook(etype)">etype</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.kernel.Kernel.excepthook(evalue)">evalue</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.kernel.Kernel.excepthook(tb)">tb</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle an exception.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">excepthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle an exception.&quot;&quot;&quot;</span>
    <span class="c1"># write uncaught traceback to &#39;real&#39; stderr, not zmq-forwarder</span>
    <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">__stderr__</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.execute_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">execute_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.execute_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.execute_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="ExecuteContent (async_kernel.typing.ExecuteContent)" href="../typing/#async_kernel.typing.ExecuteContent">ExecuteContent</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute">execute request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">ExecuteContent</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [execute request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">job</span><span class="p">[</span><span class="s2">&quot;run_mode&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="ow">and</span> <span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;received_time&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_on_error_time</span><span class="p">)</span>
        <span class="ow">and</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Aborting execute_request: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">error_to_content</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Aborting due to prior exception&quot;</span><span class="p">))</span> <span class="o">|</span> <span class="p">{</span>
            <span class="s2">&quot;execution_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_count</span>
        <span class="p">}</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">silent</span> <span class="o">:=</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;silent&quot;</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_execution_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">_execution_count_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_execution_count</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;execute_input&quot;</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span> <span class="s2">&quot;execution_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_count</span><span class="p">},</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">],</span>
            <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s2">&quot;execute_input&quot;</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">fut</span> <span class="o">=</span> <span class="p">(</span><span class="n">Caller</span><span class="o">.</span><span class="n">to_thread</span> <span class="k">if</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;run_mode&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span> <span class="k">else</span> <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_soon</span><span class="p">)(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">run_cell_async</span><span class="p">,</span>
        <span class="n">raw_cell</span><span class="o">=</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span>
        <span class="n">store_history</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;store_history&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
        <span class="n">transformed_cell</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">transform_cell</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]),</span>
        <span class="n">shell_futures</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">cell_id</span><span class="o">=</span><span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cellId&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">silent</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interrupts</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="k">lambda</span> <span class="n">fut</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_interrupts</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span><span class="p">:</span> <span class="n">ExecutionResult</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fut</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">error_before_exec</span> <span class="ow">or</span> <span class="n">result</span><span class="o">.</span><span class="n">error_in_exec</span> <span class="k">if</span> <span class="n">result</span> <span class="k">else</span> <span class="n">KernelInterruptError</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># A safeguard to catch exceptions not caught by the shell.</span>
        <span class="n">err</span> <span class="o">=</span> <span class="n">e</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">err</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">Tags</span><span class="o">.</span><span class="n">suppress_error</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="p">()))</span>  <span class="c1"># 1.</span>
        <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">err</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_execute_request_timeout</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">))</span>  <span class="c1"># 2.</span>
    <span class="p">):</span>
        <span class="c1"># Suppress the error due to either:</span>
        <span class="c1"># 1. tag</span>
        <span class="c1"># 2. timeout</span>
        <span class="n">err</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span> <span class="k">if</span> <span class="n">err</span> <span class="k">else</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
        <span class="s2">&quot;execution_count&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">execution_count</span><span class="p">,</span>
        <span class="s2">&quot;user_expressions&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">user_expressions</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_expressions&quot;</span><span class="p">,</span> <span class="p">{})),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">|=</span> <span class="n">error_to_content</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">silent</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stop_on_error&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_on_error_time</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;inf&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;An error occurred in a non-silent execution request&quot;</span><span class="p">)</span>
                <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_on_error_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.get_connection_info" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_connection_info</span>


<a href="#async_kernel.kernel.Kernel.get_connection_info" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_connection_info</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the connection info as a dict.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the connection info as a dict.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.get_run_mode" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_run_mode</span>


<a href="#async_kernel.kernel.Kernel.get_run_mode" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_run_mode</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="msg_type (async_kernel.kernel.Kernel.get_run_mode(msg_type))" href="#async_kernel.kernel.Kernel.get_run_mode(msg_type)">msg_type</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="socket_id (async_kernel.kernel.Kernel.get_run_mode(socket_id))" href="#async_kernel.kernel.Kernel.get_run_mode(socket_id)">socket_id</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="control


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="concurrency_mode (async_kernel.kernel.Kernel.get_run_mode(concurrency_mode))" href="#async_kernel.kernel.Kernel.get_run_mode(concurrency_mode)">concurrency_mode</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="KernelConcurrencyMode (async_kernel.typing.KernelConcurrencyMode)" href="../typing/#async_kernel.typing.KernelConcurrencyMode">KernelConcurrencyMode</a></span> <span class="o">|</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="job (async_kernel.kernel.Kernel.get_run_mode(job))" href="#async_kernel.kernel.Kernel.get_run_mode(job)">job</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the run mode for a given channel, message type and concurrency mode.</p>
<p>The run mode determines how the kernel will execute the message.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.get_run_mode(socket_id)" class="doc doc-heading doc-heading-parameter">              <b><code>socket_id</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(socket_id)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>[<a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a>, <a class="autorefs autorefs-internal" title="control


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a>]</code>, default:
                  <code><a class="autorefs autorefs-internal" title="shell


  
      class-attribute
      instance-attribute
   (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></code>
)
          –
          <div class="doc-md-description">
            <p>The socket ID the message was received on.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.get_run_mode(msg_type)" class="doc doc-heading doc-heading-parameter">              <b><code>msg_type</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(msg_type)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></code>)
          –
          <div class="doc-md-description">
            <p>The type of the message.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.get_run_mode(concurrency_mode)" class="doc doc-heading doc-heading-parameter">              <b><code>concurrency_mode</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(concurrency_mode)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="KernelConcurrencyMode (async_kernel.typing.KernelConcurrencyMode)" href="../typing/#async_kernel.typing.KernelConcurrencyMode">KernelConcurrencyMode</a> | <span title="async_kernel.typing.NoValue">NoValue</span></code>, default:
                  <code><span title="async_kernel.typing.NoValue">NoValue</span></code>
)
          –
          <div class="doc-md-description">
            <p>The concurrency mode of the kernel. Defaults to <a class="autorefs autorefs-internal" title="concurrency_mode


  
      class-attribute
      instance-attribute
  " href="#async_kernel.kernel.Kernel.concurrency_mode">kernel.concurrency_mode</a></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.get_run_mode(job)" class="doc doc-heading doc-heading-parameter">              <b><code>job</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(job)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The job associated with the message, if any.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></code>
          –
          <div class="doc-md-description">
            <p>The run mode for the message.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If a shutdown or debug request is received on the shell socket.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_run_mode</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">socket_id</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]</span> <span class="o">=</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span>
    <span class="n">concurrency_mode</span><span class="p">:</span> <span class="n">KernelConcurrencyMode</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">job</span><span class="p">:</span> <span class="n">Job</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunMode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Determine the run mode for a given channel, message type and concurrency mode.</span>

<span class="sd">    The run mode determines how the kernel will execute the message.</span>

<span class="sd">    Args:</span>
<span class="sd">        socket_id: The socket ID the message was received on.</span>
<span class="sd">        msg_type: The type of the message.</span>
<span class="sd">        concurrency_mode: The concurrency mode of the kernel. Defaults to [kernel.concurrency_mode][async_kernel.Kernel.concurrency_mode]</span>
<span class="sd">        job: The job associated with the message, if any.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run mode for the message.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If a shutdown or debug request is received on the shell socket.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">concurrency_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">concurrency_mode</span> <span class="k">if</span> <span class="n">concurrency_mode</span> <span class="ow">is</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="n">concurrency_mode</span>
    <span class="c1"># TODO: Are any of these options worth including?</span>
    <span class="c1"># if mode_from_metadata := job[&quot;msg&quot;][&quot;metadata&quot;].get(&quot;run_mode&quot;):</span>
    <span class="c1">#     return RunMode( mode_from_metadata)</span>
    <span class="c1"># if mode_from_header := job[&quot;msg&quot;][&quot;header&quot;].get(&quot;run_mode&quot;):</span>
    <span class="c1">#     return RunMode( mode_from_header)</span>
    <span class="k">match</span> <span class="p">(</span><span class="n">concurrency_mode</span><span class="p">,</span> <span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">):</span>
        <span class="k">case</span><span class="w"> </span><span class="n">KernelConcurrencyMode</span><span class="o">.</span><span class="n">blocking</span><span class="p">,</span> <span class="k">_</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">blocking</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">job</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">content</span> <span class="o">:=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="p">{}):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">mode_</span> <span class="o">:=</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">get_mode</span><span class="p">(</span><span class="n">code</span><span class="p">)):</span>
                        <span class="k">return</span> <span class="n">mode_</span>
                    <span class="k">if</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span>
                <span class="k">if</span> <span class="n">mode_</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_tags</span><span class="p">(</span><span class="n">job</span><span class="p">))</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">RunMode</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">mode_</span><span class="p">)))</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">shutdown_request</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">debug_request</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_type</span><span class="si">=}</span><span class="s2"> not allowed on shell!&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">inspect_request</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">complete_request</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">is_complete_request</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">history_request</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">kernel_info_request</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">comm_info_request</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">comm_open</span> <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">comm_close</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">blocking</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.getpass" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">getpass</span>


<a href="#async_kernel.kernel.Kernel.getpass" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">getpass</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.getpass(prompt)">prompt</span></span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Forward getpass to frontends.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">getpass</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forward getpass to frontends.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_request</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.handle_message_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">handle_message_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.handle_message_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">handle_message_request</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="job (async_kernel.kernel.Kernel.handle_message_request(job))" href="#async_kernel.kernel.Kernel.handle_message_request(job)">job</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The main handler for all shell and control messages.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.handle_message_request(job)" class="doc doc-heading doc-heading-parameter">              <b><code>job</code></b>
<a href="#async_kernel.kernel.Kernel.handle_message_request(job)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></code>)
          –
          <div class="doc-md-description">
            <p>The packed <a class="autorefs autorefs-internal" title="Message" href="../typing/#async_kernel.typing.Message">message</a> for handling.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">handle_message_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The main handler for all shell and control messages.</span>

<span class="sd">    Args:</span>
<span class="sd">        job: The packed [message][async_kernel.typing.Message] for handling.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">msg_type</span> <span class="o">=</span> <span class="n">MsgType</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;msg_type&quot;</span><span class="p">])</span>
        <span class="n">socket_id</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket_id&quot;</span><span class="p">]</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_handler</span><span class="p">(</span><span class="n">msg_type</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Invalid job </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">run_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">job</span><span class="o">=</span><span class="n">job</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2"> run mode </span><span class="si">%s</span><span class="s2"> handler: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">run_mode</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
    <span class="n">job</span><span class="p">[</span><span class="s2">&quot;run_mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_mode</span>
    <span class="n">runner</span> <span class="o">=</span> <span class="n">_wrap_handler</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_handler</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
    <span class="k">match</span> <span class="n">run_mode</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">queue_call</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="n">job</span><span class="p">,</span> <span class="n">send_nowait</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span><span class="p">:</span>
            <span class="n">Caller</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span><span class="p">:</span>
            <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">blocking</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">runner</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.history_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">history_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.history_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">history_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.history_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#history">history request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">history_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [history request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#history).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="n">history_manager</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">history_manager</span>
    <span class="k">assert</span> <span class="n">history_manager</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hist_access_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;tail&quot;</span><span class="p">:</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="n">history_manager</span><span class="o">.</span><span class="n">get_tail</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">],</span> <span class="n">raw</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw&quot;</span><span class="p">),</span> <span class="n">output</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">),</span> <span class="n">include_latest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hist_access_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;range&quot;</span><span class="p">:</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="n">history_manager</span><span class="o">.</span><span class="n">get_range</span><span class="p">(</span>
            <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;session&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stop&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="n">raw</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
            <span class="n">output</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;hist_access_type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;search&quot;</span><span class="p">:</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="n">history_manager</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
            <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;pattern&quot;</span><span class="p">),</span> <span class="n">raw</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raw&quot;</span><span class="p">),</span> <span class="n">output</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">),</span> <span class="n">n</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">),</span> <span class="n">unique</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;unique&quot;</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">hist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;history&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">hist</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.inspect_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">inspect_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.inspect_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">inspect_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.inspect_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection">inspect request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">inspect_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [inspect request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="n">detail_level</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;detail_level&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">omit_sections</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;omit_sections&quot;</span><span class="p">,</span> <span class="p">[]))</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">token_at_cursor</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">])</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;found&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">object_inspect_mime</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">detail_level</span><span class="o">=</span><span class="n">detail_level</span><span class="p">,</span> <span class="n">omit_sections</span><span class="o">=</span><span class="n">omit_sections</span><span class="p">)</span>
        <span class="n">content</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundle</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">enable_html_pager</span><span class="p">:</span>
            <span class="n">content</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;text/html&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="n">content</span><span class="p">[</span><span class="s2">&quot;found&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.interrupt_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">interrupt_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.interrupt_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">interrupt_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.interrupt_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt">interrupt request</a> (control only).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">interrupt_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [interrupt request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt) (control only).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_interrupt_requested</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
        <span class="n">signal</span><span class="o">.</span><span class="n">raise_signal</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">kill</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getpid</span><span class="p">(),</span> <span class="n">signal</span><span class="o">.</span><span class="n">SIGINT</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">interrupter</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_interrupts</span><span class="p">):</span>
        <span class="n">interrupter</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.iopub_send" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">iopub_send</span>


<a href="#async_kernel.kernel.Kernel.iopub_send" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">iopub_send</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(msg_or_type)">msg_or_type</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(content)">content</span></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(metadata)">metadata</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(parent)">parent</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(ident)">ident</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(buffers)">buffers</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Send a message on the zmq iopub socket.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">iopub_send</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">msg_or_type</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="n">Content</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">ident</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">buffers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a message on the zmq iopub socket.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="o">:=</span> <span class="n">Caller</span><span class="o">.</span><span class="n">iopub_sockets</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">thread</span> <span class="o">:=</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="n">stream</span><span class="o">=</span><span class="n">socket</span><span class="p">,</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="n">msg_or_type</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">parent</span> <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_parent</span><span class="p">(),</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
            <span class="n">ident</span><span class="o">=</span><span class="n">ident</span><span class="p">,</span>
            <span class="n">buffers</span><span class="o">=</span><span class="n">buffers</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;iopub_send: (thread=</span><span class="si">%s</span><span class="s2">) msg_type:&#39;</span><span class="si">%s</span><span class="s2">&#39;, content: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;msg_type&quot;</span><span class="p">],</span> <span class="n">msg</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_thread_caller</span><span class="o">.</span><span class="n">call_no_context</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">,</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="n">msg_or_type</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">parent</span> <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">ident</span><span class="o">=</span><span class="n">ident</span><span class="p">,</span>
            <span class="n">buffers</span><span class="o">=</span><span class="n">buffers</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.is_complete_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_complete_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.is_complete_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_complete_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.is_complete_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness">is_complete request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">is_complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [is_complete request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness).&quot;&quot;&quot;</span>
    <span class="n">status</span><span class="p">,</span> <span class="n">indent_spaces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">input_transformer_manager</span><span class="o">.</span><span class="n">check_complete</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;code&quot;</span><span class="p">])</span>
    <span class="n">content</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="n">status</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;incomplete&quot;</span><span class="p">:</span>
        <span class="n">content</span><span class="p">[</span><span class="s2">&quot;indent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent_spaces</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.kernel_info_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">kernel_info_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.kernel_info_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">kernel_info_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.kernel_info_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info">kernel info request</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">kernel_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [kernel info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.load_connection_info" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_connection_info</span>


<a href="#async_kernel.kernel.Kernel.load_connection_info" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_connection_info</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="info (async_kernel.kernel.Kernel.load_connection_info(info))" href="#async_kernel.kernel.Kernel.load_connection_info(info)">info</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load connection info from a dict containing connection info.</p>
<p>Typically this data comes from a connection file
and is called by load_connection_file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.kernel.Kernel.load_connection_info(info)" class="doc doc-heading doc-heading-parameter">              <b><code>info</code></b>
<a href="#async_kernel.kernel.Kernel.load_connection_info(info)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Dictionary containing connection_info. See the connection_file spec for details.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load connection info from a dict containing connection info.</span>

<span class="sd">    Typically this data comes from a connection file</span>
<span class="sd">    and is called by load_connection_file.</span>

<span class="sd">    Args:</span>
<span class="sd">        info: Dictionary containing connection_info. See the connection_file spec for details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ports</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Connection info is already loaded!&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">transport</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;transport&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">transport</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ip</span>
    <span class="k">for</span> <span class="n">socket</span> <span class="ow">in</span> <span class="n">SocketID</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">socket</span><span class="si">}</span><span class="s2">_port&quot;</span>
        <span class="k">if</span> <span class="n">socket</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ports</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_ports</span><span class="p">[</span><span class="n">socket</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;key&quot;</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">key</span>
    <span class="k">if</span> <span class="s2">&quot;signature_scheme&quot;</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">signature_scheme</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;signature_scheme&quot;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.raw_input" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">raw_input</span>


<a href="#async_kernel.kernel.Kernel.raw_input" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">raw_input</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.raw_input(prompt)">prompt</span></span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Forward raw_input to frontends.</p>
<h6 id="async_kernel.kernel.Kernel.raw_input--raises">Raises<a class="headerlink" href="#async_kernel.kernel.Kernel.raw_input--raises" title="Permanent link">&para;</a></h6>
<p>StdinNotImplementedError if active frontend doesn't support stdin.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">raw_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forward raw_input to frontends.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    StdinNotImplementedError if active frontend doesn&#39;t support stdin.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_request</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">prompt</span><span class="p">),</span> <span class="n">password</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.run_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run_handler</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.run_handler" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_handler</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.run_handler(handler)">handler</span></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.HandlerType">HandlerType</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.kernel.Kernel.run_handler(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Runs the handler in the context of the job/message sending the reply content if it is provided.</p>
<p>This method gets called for every valid request with the relevant handler.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">HandlerType</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="nb">dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs the handler in the context of the job/message sending the reply content if it is provided.</span>

<span class="sd">    This method gets called for every valid request with the relevant handler.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_send_reply</span><span class="p">(</span><span class="n">content</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a reply to the job with the specified content.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;status&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="n">content</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ok&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">send</span><span class="p">(</span>
            <span class="n">stream</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket&quot;</span><span class="p">],</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;msg_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">,</span> <span class="s2">&quot;reply&quot;</span><span class="p">),</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;header&quot;</span><span class="p">],</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
            <span class="n">ident</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;ident&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">msg</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;*** _send_reply </span><span class="si">%s</span><span class="s2">*** </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;socket_id&quot;</span><span class="p">],</span> <span class="n">msg</span><span class="p">)</span>

    <span class="n">utils</span><span class="o">.</span><span class="n">_job_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span><span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;busy&quot;</span><span class="p">},</span> <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">content</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">job</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_send_reply</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">_send_reply</span><span class="p">(</span><span class="n">error_to_content</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception in message handler:&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span><span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;idle&quot;</span><span class="p">},</span> <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.shutdown_request" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">shutdown_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.shutdown_request" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">shutdown_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.shutdown_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.Content">Content</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown">shutdown request</a> (control only).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [shutdown request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown) (control only).&quot;&quot;&quot;</span>
    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_no_context</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;restart&quot;</span><span class="p">:</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;restart&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.stop" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stop the running kernel.</p>
<p>Once a kernel is stopped; that instance of the kernel cannot be restarted.
Instead, a new kernel must be started.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop the running kernel.</span>

<span class="sd">    Once a kernel is stopped; that instance of the kernel cannot be restarted.</span>
<span class="sd">    Instead, a new kernel must be started.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">instance</span> <span class="o">:=</span> <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span><span class="p">:</span>
        <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">_stop_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.topic" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">topic</span>


<a href="#async_kernel.kernel.Kernel.topic" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">topic</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.topic(topic)">topic</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>prefixed topic for IOPub messages</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;prefixed topic for IOPub messages&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kernel.</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.kernel.Kernel.unraisablehook" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">unraisablehook</span>


<a href="#async_kernel.kernel.Kernel.unraisablehook" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">unraisablehook</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.unraisablehook(unraisable)">unraisable</span></span><span class="p">:</span> <span class="n"><span title="sys.UnraisableHookArgs">UnraisableHookArgs</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle unraisable exceptions (during gc for instance).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unraisablehook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unraisable</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">UnraisableHookArgs</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Handle unraisable exceptions (during gc for instance).&quot;</span>
    <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">,</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_value</span> <span class="ow">or</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">),</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_traceback</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">object</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.kernel.KernelInterruptError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">KernelInterruptError</span>


<a href="#async_kernel.kernel.KernelInterruptError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Raised to interrupt the kernel.</p>














    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.bind_socket" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">bind_socket</span>


<a href="#async_kernel.kernel.bind_socket" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">bind_socket</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.bind_socket(socket)">socket</span></span><span class="p">:</span> <span class="n"><span title="zmq.Socket">Socket</span></span><span class="p">[</span><span class="n"><span title="zmq.SocketType">SocketType</span></span><span class="p">],</span>
    <span class="n"><span title="async_kernel.kernel.bind_socket(transport)">transport</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;tcp&quot;</span><span class="p">,</span> <span class="s2">&quot;ipc&quot;</span><span class="p">],</span>
    <span class="n"><span title="async_kernel.kernel.bind_socket(ip)">ip</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.bind_socket(port)">port</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.bind_socket(max_attempts)">max_attempts</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Bind the socket to a port using the settings.</p>
<p>max_attempts: The maximum number of attempts to bind the socket. If un-specified,
defaults to 100 if port missing, else 2 attempts.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bind_socket</span><span class="p">(</span>
    <span class="n">socket</span><span class="p">:</span> <span class="n">Socket</span><span class="p">[</span><span class="n">SocketType</span><span class="p">],</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;tcp&quot;</span><span class="p">,</span> <span class="s2">&quot;ipc&quot;</span><span class="p">],</span>
    <span class="n">ip</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Bind the socket to a port using the settings.</span>

<span class="sd">    max_attempts: The maximum number of attempts to bind the socket. If un-specified,</span>
<span class="sd">    defaults to 100 if port missing, else 2 attempts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">socket</span><span class="o">.</span><span class="n">TYPE</span> <span class="o">==</span> <span class="n">SocketType</span><span class="o">.</span><span class="n">ROUTER</span><span class="p">:</span>
        <span class="c1"># ref: https://github.com/ipython/ipykernel/issues/270</span>
        <span class="n">socket</span><span class="o">.</span><span class="n">router_handover</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">transport</span> <span class="o">==</span> <span class="s2">&quot;ipc&quot;</span><span class="p">:</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">ip</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">max_attempts</span> <span class="ow">is</span> <span class="n">NoValue</span><span class="p">:</span>
        <span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">port</span> <span class="k">else</span> <span class="mi">100</span>
    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">transport</span> <span class="o">==</span> <span class="s2">&quot;tcp&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">port</span><span class="p">:</span>
                    <span class="n">port</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">bind_to_random_port</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;tcp://</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">transport</span> <span class="o">==</span> <span class="s2">&quot;ipc&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">port</span><span class="p">:</span>
                    <span class="n">port</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">while</span> <span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                        <span class="n">port</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">socket</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ipc://</span><span class="si">{</span><span class="n">ip</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid transport: </span><span class="si">{</span><span class="n">transport</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># pyright: ignore[reportUnreachable]</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ZMQError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="n">errno</span><span class="o">.</span><span class="n">EADDRINUSE</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">10048</span><span class="p">,</span> <span class="mi">135</span><span class="p">}:</span>
                <span class="k">raise</span>
            <span class="k">if</span> <span class="n">port</span> <span class="ow">and</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_attempts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">port</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to bind </span><span class="si">{</span><span class="n">socket</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">transport</span><span class="si">=}</span><span class="s2"> after </span><span class="si">{</span><span class="n">max_attempts</span><span class="si">}</span><span class="s2"> attempts.&quot;</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.error_to_content" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">error_to_content</span>


<a href="#async_kernel.kernel.error_to_content" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">error_to_content</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.error_to_content(error)">error</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#BaseException">BaseException</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.Content">Content</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convert the error to a dict.</p>
<p>ref: https://jupyter-client.readthedocs.io/en/stable/messaging.html#request-reply</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">error_to_content</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the error to a dict.</span>

<span class="sd">    ref: https://jupyter-client.readthedocs.io/en/stable/messaging.html#request-reply</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ename&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
        <span class="s2">&quot;evalue&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">),</span>
        <span class="s2">&quot;traceback&quot;</span><span class="p">:</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exception</span><span class="p">(</span><span class="n">error</span><span class="p">),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.run_kernel" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run_kernel</span>


<a href="#async_kernel.kernel.run_kernel" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_kernel</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="kernel (async_kernel.kernel.run_kernel(kernel))" href="#async_kernel.kernel.run_kernel(kernel)">kernel</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="Kernel (async_kernel.kernel.Kernel)" href="#async_kernel.kernel.Kernel">Kernel</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="wait_exit_context (async_kernel.kernel.run_kernel(wait_exit_context))" href="#async_kernel.kernel.run_kernel(wait_exit_context)">wait_exit_context</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[],</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" title="anyio.sleep_forever" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.sleep_forever">sleep_forever</a></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Runs a kernel using AnyIO, handling exceptions and setting the exit code.</p>
<p>The kernel is started within an AnyIO context, allowing it to run using either
the Trio or Asyncio backend, determined by the kernel's name.  The function
handles KeyboardInterrupt exceptions gracefully and prints any other exceptions
to both <code>sys.stderr</code> and <code>sys.__stderr__</code> before exiting with a non-zero code.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.run_kernel(kernel)" class="doc doc-heading doc-heading-parameter">              <b><code>kernel</code></b>
<a href="#async_kernel.kernel.run_kernel(kernel)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-internal" title="Kernel (async_kernel.kernel.Kernel)" href="#async_kernel.kernel.Kernel">Kernel</a></code>)
          –
          <div class="doc-md-description">
            <p>The kernel to run, which must be an instance of a class implementing the Kernel protocol.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.run_kernel(wait_exit_context)" class="doc doc-heading doc-heading-parameter">              <b><code>wait_exit_context</code></b>
<a href="#async_kernel.kernel.run_kernel(wait_exit_context)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[], <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>]</code>, default:
                  <code><a class="autorefs autorefs-external" title="anyio.sleep_forever" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.sleep_forever">sleep_forever</a></code>
)
          –
          <div class="doc-md-description">
            <p>An optional callable that returns an awaitable. This awaitable
is awaited within the kernel's context.  It defaults to <code>anyio.sleep_forever</code>,
which keeps the kernel running until it is externally interrupted or cancelled.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_kernel</span><span class="p">(</span><span class="n">kernel</span><span class="p">:</span> <span class="n">Kernel</span><span class="p">,</span> <span class="n">wait_exit_context</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">Awaitable</span><span class="p">]</span> <span class="o">=</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep_forever</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Runs a kernel using AnyIO, handling exceptions and setting the exit code.</span>

<span class="sd">    The kernel is started within an AnyIO context, allowing it to run using either</span>
<span class="sd">    the Trio or Asyncio backend, determined by the kernel&#39;s name.  The function</span>
<span class="sd">    handles KeyboardInterrupt exceptions gracefully and prints any other exceptions</span>
<span class="sd">    to both `sys.stderr` and `sys.__stderr__` before exiting with a non-zero code.</span>

<span class="sd">    Args:</span>
<span class="sd">        kernel: The kernel to run, which must be an instance of a class implementing the Kernel protocol.</span>
<span class="sd">        wait_exit_context: An optional callable that returns an awaitable. This awaitable</span>
<span class="sd">            is awaited within the kernel&#39;s context.  It defaults to `anyio.sleep_forever`,</span>
<span class="sd">            which keeps the kernel running until it is externally interrupted or cancelled.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_start</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">kernel</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">kernel</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">wait_exit_context</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">backend</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">Backend</span><span class="o">.</span><span class="n">trio</span><span class="p">,</span> <span class="n">Backend</span><span class="o">.</span><span class="n">asyncio</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Backend</span><span class="o">.</span><span class="n">trio</span> <span class="k">if</span> <span class="s2">&quot;trio&quot;</span> <span class="ow">in</span> <span class="n">kernel</span><span class="o">.</span><span class="n">kernel_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">else</span> <span class="n">Backend</span><span class="o">.</span><span class="n">asyncio</span>
        <span class="p">)</span>
        <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">_start</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">backend_options</span><span class="o">=</span><span class="n">kernel</span><span class="o">.</span><span class="n">anyio_backend_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">backend</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">__stderr__</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">__stderr__</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
    
  </aside>





                 
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../command/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Command">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Command
              </div>
            </div>
          </a>
        
        
          
          <a href="../kernelspec/" class="md-footer__link md-footer__link--next" aria-label="Next: Kernelspec">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Kernelspec
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy;   2025-present
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy", "toc.follow", "navigation.top", "header.autohide", "navigation.footer", "search.suggest", "search.highlight", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>