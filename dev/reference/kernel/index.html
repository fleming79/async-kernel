
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Async-kernel for Jupyter">
      
      
      
        <link rel="canonical" href="https://fleming79.github.io/async-kernel/dev/reference/kernel/">
      
      
        <link rel="prev" href="../interface/">
      
      
        <link rel="next" href="../kernelspec/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>kernel - async-kernel</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M11%209h2V7h-2m1%2013c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208m0-18A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202m-1%2015h2v-6h-2z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#async_kernel.kernel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
               You're not
viewing the latest version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="async-kernel" class="md-header__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            async-kernel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              kernel
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="darkula" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../usage/" class="md-tabs__link">
          
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
    
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="async-kernel" class="md-nav__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    async-kernel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../usage/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Usage
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../notebooks/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Notebooks
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notebooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/simple_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple example
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concurrency
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/caller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../caller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    caller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    comm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    command
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    common
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debugger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    debugger
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    kernel
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    kernel
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kernel
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel.KernelInterruptError" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KernelInterruptError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Kernel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.callers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;callers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.subshell_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;subshell_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.help_links" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;help_links
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.quiet" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;quiet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.print_kernel_messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;print_kernel_messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.connection_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection_file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.log" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.main_shell" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;main_shell
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debugger" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;debugger
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.event_started" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;event_started
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.event_stopped" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;event_stopped
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shell" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shell
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.caller" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;caller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_connection_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.stop" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.__asynccontextmanager__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__asynccontextmanager__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.iopub_send" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;iopub_send
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.topic" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;topic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.msg_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;msg_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_run_mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_run_mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_concurrency_run_modes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;kernel_info_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_info_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execute_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;complete_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.is_complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_complete_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.inspect_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inspect_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.history_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;history_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_open" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_open
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_msg" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_msg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_close" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_close
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interrupt_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;interrupt_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shutdown_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debug_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;debug_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.create_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.delete_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.list_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.excepthook" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;excepthook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.unraisablehook" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unraisablehook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_parent" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_parent
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernelspec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kernelspec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asyncshell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    asyncshell
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pending/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    pending
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    typing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kernel
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel.KernelInterruptError" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KernelInterruptError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Kernel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Kernel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interface" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;interface
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.callers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;callers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.subshell_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;subshell_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.help_links" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;help_links
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.quiet" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;quiet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.print_kernel_messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;print_kernel_messages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.connection_file" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;connection_file
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_name" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_name
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.log" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.main_shell" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;main_shell
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debugger" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;debugger
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_manager" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_manager
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.event_started" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;event_started
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.event_stopped" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;event_stopped
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shell" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shell
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.caller" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;caller
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;kernel_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.load_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;load_connection_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.stop" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.__asynccontextmanager__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__asynccontextmanager__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.iopub_send" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;iopub_send
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.topic" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;topic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.msg_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;msg_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_run_mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_run_mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_concurrency_run_modes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.kernel_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;kernel_info_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_info_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_info_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.execute_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;execute_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;complete_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.is_complete_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_complete_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.inspect_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;inspect_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.history_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;history_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_open" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_open
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_msg" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_msg
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.comm_close" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;comm_close
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.interrupt_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;interrupt_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.shutdown_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;shutdown_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.debug_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;debug_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.create_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.delete_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;delete_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.list_subshell_request" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;list_subshell_request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.excepthook" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;excepthook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.unraisablehook" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;unraisablehook
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_connection_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_connection_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.kernel.Kernel.get_parent" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_parent
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    Reference
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                  
                  


  
  


  <h1>kernel</h1>

<div class="doc doc-object doc-module">



<a id="async_kernel.kernel"></a>
    <div class="doc doc-contents first">

          









<p><span class="doc-section-title">Classes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" KernelInterruptError (async_kernel.kernel.KernelInterruptError)" href="#async_kernel.kernel.KernelInterruptError">KernelInterruptError</a></code></b>
          –
          <div class="doc-md-description">
            <p>Raised to interrupt the kernel.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" Kernel (async_kernel.kernel.Kernel)" href="#async_kernel.kernel.Kernel">Kernel</a></code></b>
          –
          <div class="doc-md-description">
            <p>A Jupyter kernel that supports concurrent execution providing an <a class="autorefs autorefs-internal" title=" AsyncInteractiveShell" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell">IPython InteractiveShell</a></p>
          </div>
        </li>
    </ul>







  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="async_kernel.kernel.KernelInterruptError" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">KernelInterruptError</span>


<a href="#async_kernel.kernel.KernelInterruptError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code></p>



        <p>Raised to interrupt the kernel.</p>

          












              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/async_kernel/asyncshell.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">KernelInterruptError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="s2">&quot;Raised to interrupt the kernel.&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="async_kernel.kernel.Kernel" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Kernel</span>


<a href="#async_kernel.kernel.Kernel" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="traitlets.HasTraits">HasTraits</span></code>, <code><a class="autorefs autorefs-external" title="anyio.AsyncContextManagerMixin" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.AsyncContextManagerMixin">AsyncContextManagerMixin</a></code></p>



        <p>A Jupyter kernel that supports concurrent execution providing an <a class="autorefs autorefs-internal" title=" AsyncInteractiveShell" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell">IPython InteractiveShell</a>
with support for kernel subshells.</p>


<details class="info" open>
  <summary>Info</summary>
  <p>Only one instance of a kernel is created at a time per subprocess. The instance can be obtained
with <code>Kernel()</code> or [get_kernel].</p>
</details>

<details class="starting-the-kernel" open>
  <summary>Starting the kernel</summary>
  <p>The kernel should appear in the list of kernels just as other kernels are. Variants of the kernel
can with custom configuration can be added at the <a class="autorefs autorefs-internal" title=" command_line" href="../command/#async_kernel.command.command_line">command line</a>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="async_kernel.kernel.Kernel--from-the-shell" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><input id="async_kernel.kernel.Kernel--blocking" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><input id="async_kernel.kernel.Kernel--inside-a-coroutine" name="async_kernel.kernel.Kernel--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="async_kernel.kernel.Kernel--from-the-shell">From the shell</label><label for="async_kernel.kernel.Kernel--blocking">Blocking</label><label for="async_kernel.kernel.Kernel--inside-a-coroutine">Inside a coroutine</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>async-kernel<span class="w"> </span>-f<span class="w"> </span>.
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">async_kernel.interface</span>

<span class="n">async_kernel</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">start_kernel_zmq_interface</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">async</span> <span class="k">with</span> <span class="n">Kernel</span><span class="p">():</span>
    <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep_forever</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
</details>

<details class="warning" open>
  <summary>Warning</summary>
  <p>Starting the kernel outside the main thread has the following implicatations:
    - Execute requests won't be run in the main thread.
    - Interrupts via signals won't work, so thread blocking calls in the shell cannot be interrupted.</p>
</details>

<details class="origins" open>
  <summary>Origins</summary>
  <ul>
<li><a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.kernelbase.Kernel">IPyKernel Kernel</a></li>
<li><a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.kernelapp.IPKernelApp">IPyKernel IPKernelApp</a></li>
<li><a class="autorefs autorefs-external" href="https://ipykernel.readthedocs.io/en/stable/api/ipykernel.html#ipykernel.ipkernel.IPythonKernel">IPyKernel IPythonKernel</a></li>
</ul>
</details>
          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <a href="../#reference">Reference</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../#highlights">Highlights</a>
  </span>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <a href="../asyncshell/#">asyncshell</a>
  </span>

            <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb last">
      <a href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncInteractiveShell</a>
  </span>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb last">
      <a href="../asyncshell/#async_kernel.asyncshell"><code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;asyncshell</a>
  </span>

      </li>
  </ul>

      </li>
  </ul>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Usage</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../../usage/#usage">Usage</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../../usage/#caller">Caller</a>
  </span>

      </li>
  </ul>

        <b class="doc doc-backlink-type">Returned by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../utils/#">utils</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../utils/#async_kernel.utils.get_kernel"><code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_kernel</a>
  </span>

      </li>
  </ul>

  </div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" load_settings (async_kernel.kernel.Kernel.load_settings)" href="#async_kernel.kernel.Kernel.load_settings">load_settings</a></code></b>
            –
            <div class="doc-md-description">
              <p>Load settings into the kernel.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" load_connection_info (async_kernel.kernel.Kernel.load_connection_info)" href="#async_kernel.kernel.Kernel.load_connection_info">load_connection_info</a></code></b>
            –
            <div class="doc-md-description">
              <p>Load connection info from a dict containing connection info.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" stop (async_kernel.kernel.Kernel.stop)" href="#async_kernel.kernel.Kernel.stop">stop</a></code></b>
            –
            <div class="doc-md-description">
              <p>A <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#staticmethod">staticmethod</a> to stop the running kernel.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" __asynccontextmanager__ (async_kernel.kernel.Kernel.__asynccontextmanager__)" href="#async_kernel.kernel.Kernel.__asynccontextmanager__">__asynccontextmanager__</a></code></b>
            –
            <div class="doc-md-description">
              <p>Start the kernel in an already running anyio event loop.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" iopub_send (async_kernel.kernel.Kernel.iopub_send)" href="#async_kernel.kernel.Kernel.iopub_send">iopub_send</a></code></b>
            –
            <div class="doc-md-description">
              <p>Send a message on the iopub socket.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" topic (async_kernel.kernel.Kernel.topic)" href="#async_kernel.kernel.Kernel.topic">topic</a></code></b>
            –
            <div class="doc-md-description">
              <p>prefixed topic for IOPub messages.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" msg_handler (async_kernel.kernel.Kernel.msg_handler)" href="#async_kernel.kernel.Kernel.msg_handler">msg_handler</a></code></b>
            –
            <div class="doc-md-description">
              <p>Schedule a message to be executed.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" run_handler (async_kernel.kernel.Kernel.run_handler)" href="#async_kernel.kernel.Kernel.run_handler">run_handler</a></code></b>
            –
            <div class="doc-md-description">
              <p>Asynchronously run a message handler for a given job, managing reply sending and execution state.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" get_run_mode (async_kernel.kernel.Kernel.get_run_mode)" href="#async_kernel.kernel.Kernel.get_run_mode">get_run_mode</a></code></b>
            –
            <div class="doc-md-description">
              <p>Determine the run mode for a given channel, message type and job.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" all_concurrency_run_modes (async_kernel.kernel.Kernel.all_concurrency_run_modes)" href="#async_kernel.kernel.Kernel.all_concurrency_run_modes">all_concurrency_run_modes</a></code></b>
            –
            <div class="doc-md-description">
              <p>Generates a dictionary containing all combinations of SocketID, and MsgType, along with their</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" kernel_info_request (async_kernel.kernel.Kernel.kernel_info_request)" href="#async_kernel.kernel.Kernel.kernel_info_request">kernel_info_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info">kernel info request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" comm_info_request (async_kernel.kernel.Kernel.comm_info_request)" href="#async_kernel.kernel.Kernel.comm_info_request">comm_info_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info">comm info request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" execute_request (async_kernel.kernel.Kernel.execute_request)" href="#async_kernel.kernel.Kernel.execute_request">execute_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute">execute request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" complete_request (async_kernel.kernel.Kernel.complete_request)" href="#async_kernel.kernel.Kernel.complete_request">complete_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion">completion request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" is_complete_request (async_kernel.kernel.Kernel.is_complete_request)" href="#async_kernel.kernel.Kernel.is_complete_request">is_complete_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness">is_complete request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" inspect_request (async_kernel.kernel.Kernel.inspect_request)" href="#async_kernel.kernel.Kernel.inspect_request">inspect_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection">inspect request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" history_request (async_kernel.kernel.Kernel.history_request)" href="#async_kernel.kernel.Kernel.history_request">history_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#history">history request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" comm_open (async_kernel.kernel.Kernel.comm_open)" href="#async_kernel.kernel.Kernel.comm_open">comm_open</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm">comm open request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" comm_msg (async_kernel.kernel.Kernel.comm_msg)" href="#async_kernel.kernel.Kernel.comm_msg">comm_msg</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages">comm msg request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" comm_close (async_kernel.kernel.Kernel.comm_close)" href="#async_kernel.kernel.Kernel.comm_close">comm_close</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms">comm close request</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" interrupt_request (async_kernel.kernel.Kernel.interrupt_request)" href="#async_kernel.kernel.Kernel.interrupt_request">interrupt_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle an <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt">interrupt request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" shutdown_request (async_kernel.kernel.Kernel.shutdown_request)" href="#async_kernel.kernel.Kernel.shutdown_request">shutdown_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown">shutdown request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" debug_request (async_kernel.kernel.Kernel.debug_request)" href="#async_kernel.kernel.Kernel.debug_request">debug_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" create_subshell_request (async_kernel.kernel.Kernel.create_subshell_request)" href="#async_kernel.kernel.Kernel.create_subshell_request">create_subshell_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#create-subshell">create subshell request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" delete_subshell_request (async_kernel.kernel.Kernel.delete_subshell_request)" href="#async_kernel.kernel.Kernel.delete_subshell_request">delete_subshell_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#delete-subshell">delete subshell request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" list_subshell_request (async_kernel.kernel.Kernel.list_subshell_request)" href="#async_kernel.kernel.Kernel.list_subshell_request">list_subshell_request</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#list-subshells">list subshell request</a> (control only).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" excepthook (async_kernel.kernel.Kernel.excepthook)" href="#async_kernel.kernel.Kernel.excepthook">excepthook</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle an exception.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" unraisablehook (async_kernel.kernel.Kernel.unraisablehook)" href="#async_kernel.kernel.Kernel.unraisablehook">unraisablehook</a></code></b>
            –
            <div class="doc-md-description">
              <p>Handle unraisable exceptions (during gc for instance).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" get_connection_info (async_kernel.kernel.Kernel.get_connection_info)" href="#async_kernel.kernel.Kernel.get_connection_info">get_connection_info</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return the connection info as a dict.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title=" get_parent (async_kernel.kernel.Kernel.get_parent)" href="#async_kernel.kernel.Kernel.get_parent">get_parent</a></code></b>
            –
            <div class="doc-md-description">
              <p>A convenience method to access the 'message' in the current context if there is one.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" interface (async_kernel.kernel.Kernel.interface)" href="#async_kernel.kernel.Kernel.interface">interface</a></code></b>
          –
          <div class="doc-md-description">
            <p>The abstraction to communicate with the kernel.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" callers (async_kernel.kernel.Kernel.callers)" href="#async_kernel.kernel.Kernel.callers">callers</a></code></b>
              (<code><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a>[<a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>[<a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a>, <a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a>], <span title="async_kernel.Caller">Caller</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>The caller associated with the kernel once it has started.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" subshell_manager (async_kernel.kernel.Kernel.subshell_manager)" href="#async_kernel.kernel.Kernel.subshell_manager">subshell_manager</a></code></b>
          –
          <div class="doc-md-description">
            <p>Dedicated to management of sub shells.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" help_links (async_kernel.kernel.Kernel.help_links)" href="#async_kernel.kernel.Kernel.help_links">help_links</a></code></b>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" quiet (async_kernel.kernel.Kernel.quiet)" href="#async_kernel.kernel.Kernel.quiet">quiet</a></code></b>
          –
          <div class="doc-md-description">
            <p>Only send stdout/stderr to output stream.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" print_kernel_messages (async_kernel.kernel.Kernel.print_kernel_messages)" href="#async_kernel.kernel.Kernel.print_kernel_messages">print_kernel_messages</a></code></b>
          –
          <div class="doc-md-description">
            <p>When enabled the kernel will print startup, shutdown and terminal errors.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" connection_file (async_kernel.kernel.Kernel.connection_file)" href="#async_kernel.kernel.Kernel.connection_file">connection_file</a></code></b>
              (<code><span title="traitlets.TraitType">TraitType</span>[<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>, <a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>)
          –
          <div class="doc-md-description">
            <p>JSON file in which to store connection info </p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" kernel_name (async_kernel.kernel.Kernel.kernel_name)" href="#async_kernel.kernel.Kernel.kernel_name">kernel_name</a></code></b>
          –
          <div class="doc-md-description">
            <p>The kernels name - if it contains 'trio' a trio backend will be used instead of an asyncio backend.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" log (async_kernel.kernel.Kernel.log)" href="#async_kernel.kernel.Kernel.log">log</a></code></b>
          –
          <div class="doc-md-description">
            <p>The logging adapter.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" main_shell (async_kernel.kernel.Kernel.main_shell)" href="#async_kernel.kernel.Kernel.main_shell">main_shell</a></code></b>
          –
          <div class="doc-md-description">
            <p>The interactive shell.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" debugger (async_kernel.kernel.Kernel.debugger)" href="#async_kernel.kernel.Kernel.debugger">debugger</a></code></b>
          –
          <div class="doc-md-description">
            <p>Handles <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug requests</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" comm_manager (async_kernel.kernel.Kernel.comm_manager)" href="#async_kernel.kernel.Kernel.comm_manager">comm_manager</a></code></b>
          –
          <div class="doc-md-description">
            <p>Creates <a class="autorefs autorefs-internal" title=" Comm" href="../comm/#async_kernel.comm.Comm">async_kernel.comm.Comm</a> instances and maintains a mapping to <code>comm_id</code> to <code>Comm</code> instances.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" event_started (async_kernel.kernel.Kernel.event_started)" href="#async_kernel.kernel.Kernel.event_started">event_started</a></code></b>
          –
          <div class="doc-md-description">
            <p>An event that occurs when the kernel is started.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" event_stopped (async_kernel.kernel.Kernel.event_stopped)" href="#async_kernel.kernel.Kernel.event_stopped">event_stopped</a></code></b>
          –
          <div class="doc-md-description">
            <p>An event that occurs when the kernel is stopped.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" settings (async_kernel.kernel.Kernel.settings)" href="#async_kernel.kernel.Kernel.settings">settings</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Settings that have been set to customise the behaviour of the kernel.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" shell (async_kernel.kernel.Kernel.shell)" href="#async_kernel.kernel.Kernel.shell">shell</a></code></b>
              (<code><a class="autorefs autorefs-internal" title=" AsyncInteractiveShell (async_kernel.asyncshell.AsyncInteractiveShell)" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell">AsyncInteractiveShell</a> | <a class="autorefs autorefs-internal" title=" AsyncInteractiveSubshell (async_kernel.asyncshell.AsyncInteractiveSubshell)" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveSubshell">AsyncInteractiveSubshell</a></code>)
          –
          <div class="doc-md-description">
            <p>The shell given the current context.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" caller (async_kernel.kernel.Kernel.caller)" href="#async_kernel.kernel.Kernel.caller">caller</a></code></b>
              (<code><span title="async_kernel.Caller">Caller</span></code>)
          –
          <div class="doc-md-description">
            <p>The caller for the shell channel.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title=" kernel_info (async_kernel.kernel.Kernel.kernel_info)" href="#async_kernel.kernel.Kernel.kernel_info">kernel_info</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]] | <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>, ...] | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A dict of detail sent in reply to for a 'kernel_info_request'.</p>
          </div>
        </li>
    </ul>

              <details class="mkdocstrings-source">
                <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Kernel</span><span class="p">(</span><span class="n">HasTraits</span><span class="p">,</span> <span class="n">anyio</span><span class="o">.</span><span class="n">AsyncContextManagerMixin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Jupyter kernel that supports concurrent execution providing an [IPython InteractiveShell][async_kernel.asyncshell.AsyncInteractiveShell]</span>
<span class="sd">    with support for kernel subshells.</span>

<span class="sd">    Info:</span>
<span class="sd">        Only one instance of a kernel is created at a time per subprocess. The instance can be obtained</span>
<span class="sd">        with `Kernel()` or [get_kernel].</span>

<span class="sd">    Starting the kernel:</span>
<span class="sd">        The kernel should appear in the list of kernels just as other kernels are. Variants of the kernel</span>
<span class="sd">        can with custom configuration can be added at the [command line][command.command_line].</span>

<span class="sd">        === &quot;From the shell&quot;</span>

<span class="sd">            ``` shell</span>
<span class="sd">            async-kernel -f .</span>
<span class="sd">            ```</span>

<span class="sd">        === &quot;Blocking&quot;</span>

<span class="sd">            ```python</span>
<span class="sd">            import async_kernel.interface</span>

<span class="sd">            async_kernel.interface.start_kernel_zmq_interface()</span>
<span class="sd">            ```</span>

<span class="sd">        === &quot;Inside a coroutine&quot;</span>

<span class="sd">            ```python</span>
<span class="sd">            async with Kernel():</span>
<span class="sd">                await anyio.sleep_forever()</span>
<span class="sd">            ```</span>

<span class="sd">    Warning:</span>
<span class="sd">        Starting the kernel outside the main thread has the following implicatations:</span>
<span class="sd">            - Execute requests won&#39;t be run in the main thread.</span>
<span class="sd">            - Interrupts via signals won&#39;t work, so thread blocking calls in the shell cannot be interrupted.</span>

<span class="sd">    Origins:</span>
<span class="sd">        - [IPyKernel Kernel][ipykernel.kernelbase.Kernel]</span>
<span class="sd">        - [IPyKernel IPKernelApp][ipykernel.kernelapp.IPKernelApp]</span>
<span class="sd">        - [IPyKernel IPythonKernel][ipykernel.ipkernel.IPythonKernel]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_instance</span><span class="p">:</span> <span class="n">Self</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_initialised</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">_settings</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>

    <span class="n">interface</span> <span class="o">=</span> <span class="n">traitlets</span><span class="o">.</span><span class="n">Instance</span><span class="p">(</span><span class="n">BaseKernelInterface</span><span class="p">)</span>
    <span class="s2">&quot;The abstraction to communicate with the kernel.&quot;</span>

    <span class="n">callers</span><span class="p">:</span> <span class="n">Fixed</span><span class="p">[</span><span class="n">Self</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">],</span> <span class="n">Caller</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
    <span class="s2">&quot;The caller associated with the kernel once it has started.&quot;</span>
    <span class="s2">&quot;&quot;</span>
    <span class="n">subshell_manager</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="n">SubshellManager</span><span class="p">)</span>
    <span class="s2">&quot;Dedicated to management of sub shells.&quot;</span>

    <span class="c1"># Public traits</span>
    <span class="n">help_links</span> <span class="o">=</span> <span class="n">Tuple</span><span class="p">()</span>
    <span class="s2">&quot;&quot;</span>
    <span class="n">quiet</span> <span class="o">=</span> <span class="n">traitlets</span><span class="o">.</span><span class="n">Bool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="s2">&quot;Only send stdout/stderr to output stream.&quot;</span>

    <span class="n">print_kernel_messages</span> <span class="o">=</span> <span class="n">traitlets</span><span class="o">.</span><span class="n">Bool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="s2">&quot;When enabled the kernel will print startup, shutdown and terminal errors.&quot;</span>

    <span class="n">connection_file</span><span class="p">:</span> <span class="n">traitlets</span><span class="o">.</span><span class="n">TraitType</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">traitlets</span><span class="o">.</span><span class="n">TraitType</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    JSON file in which to store connection info </span>

<span class="sd">    `&quot;kernel-&lt;pid&gt;.json&quot;`</span>

<span class="sd">    This file will contain the IP, ports, and authentication key needed to connect</span>
<span class="sd">    clients to this kernel. By default, this file will be created in the security dir</span>
<span class="sd">    of the current profile, but can be specified by absolute path.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">kernel_name</span> <span class="o">=</span> <span class="n">CUnicode</span><span class="p">()</span>
    <span class="s2">&quot;The kernels name - if it contains &#39;trio&#39; a trio backend will be used instead of an asyncio backend.&quot;</span>

    <span class="n">log</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">LoggerAdapter</span><span class="p">)</span>
    <span class="s2">&quot;The logging adapter.&quot;</span>

    <span class="c1"># Public fixed</span>
    <span class="n">main_shell</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">AsyncInteractiveShell</span><span class="o">.</span><span class="n">instance</span><span class="p">())</span>
    <span class="s2">&quot;The interactive shell.&quot;</span>

    <span class="n">debugger</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="n">Debugger</span><span class="p">)</span>
    <span class="s2">&quot;Handles [debug requests](https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request).&quot;</span>

    <span class="n">comm_manager</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="n">CommManager</span><span class="p">)</span>
    <span class="s2">&quot;Creates [async_kernel.comm.Comm][] instances and maintains a mapping to `comm_id` to `Comm` instances.&quot;</span>

    <span class="n">event_started</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="n">Event</span><span class="p">)</span>
    <span class="s2">&quot;An event that occurs when the kernel is started.&quot;</span>

    <span class="n">event_stopped</span> <span class="o">=</span> <span class="n">Fixed</span><span class="p">(</span><span class="n">Event</span><span class="p">)</span>
    <span class="s2">&quot;An event that occurs when the kernel is stopped.&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>  <span class="c1"># noqa: ARG004</span>
        <span class="c1">#  There is only one instance (including subclasses).</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">instance</span> <span class="o">:=</span> <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span><span class="p">):</span>
            <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span>  <span class="c1"># pyright: ignore[reportReturnType]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialised</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_initialised</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;MPLBACKEND&quot;</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MPLBACKEND&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;module://matplotlib_inline.backend_inline&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_settings</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

    <span class="nd">@override</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&lt;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_log</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoggerAdapter</span><span class="p">[</span><span class="n">Logger</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">logging</span><span class="o">.</span><span class="n">LoggerAdapter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;kernel_name&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_kernel_name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Literal</span><span class="p">[</span><span class="n">KernelName</span><span class="o">.</span><span class="n">trio</span><span class="p">,</span> <span class="n">KernelName</span><span class="o">.</span><span class="n">asyncio</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">current_async_library</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;trio&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">KernelName</span><span class="o">.</span><span class="n">trio</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">KernelName</span><span class="o">.</span><span class="n">asyncio</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;interface&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">default_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">async_kernel.interface.zmq</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZMQKernelInterface</span>  <span class="c1"># noqa: PLC0415</span>

        <span class="k">return</span> <span class="n">ZMQKernelInterface</span><span class="p">()</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;connection_file&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_connection_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">jupyter_runtime_dir</span><span class="p">())</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kernel-</span><span class="si">{</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">)</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="s2">&quot;help_links&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_default_help_links</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Async Kernel Reference &quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://fleming79.github.io/async-kernel/&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;IPython Reference&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://ipython.readthedocs.io/en/stable/&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;IPython magic Reference&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://ipython.readthedocs.io/en/stable/interactive/magics.html&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Matplotlib ipympl Reference&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://matplotlib.org/ipympl/&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Matplotlib Reference&quot;</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;https://matplotlib.org/contents.html&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="s2">&quot;connection_file&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_observe_connection_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">change</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">callers</span> <span class="ow">and</span> <span class="p">(</span><span class="n">path</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_file</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Loading connection file </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_connection_info</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>

    <span class="nd">@traitlets</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="s2">&quot;connection_file&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_connection_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">proposal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">proposal</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="s2">&quot;Settings that have been set to customise the behaviour of the kernel.&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;kernel_name&quot;</span><span class="p">,</span> <span class="s2">&quot;connection_file&quot;</span><span class="p">)}</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">shell</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncInteractiveShell</span> <span class="o">|</span> <span class="n">AsyncInteractiveSubshell</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The shell given the current context.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - The `subshell_id` of the main shell is `None`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">get_shell</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">caller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Caller</span><span class="p">:</span>
        <span class="s2">&quot;The caller for the shell channel.&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">transport</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">,</span> <span class="s2">&quot;transport&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="nd">@transport</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">transport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">callers</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">has_trait</span><span class="p">(</span><span class="s2">&quot;transport&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">set_trait</span><span class="p">(</span><span class="s2">&quot;transport&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">kernel_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">|</span> <span class="n">Any</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="nb">bool</span><span class="p">]:</span>
        <span class="s2">&quot;A dict of detail sent in reply to for a &#39;kernel_info_request&#39;.&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;protocol_version&quot;</span><span class="p">:</span> <span class="n">async_kernel</span><span class="o">.</span><span class="n">kernel_protocol_version</span><span class="p">,</span>
            <span class="s2">&quot;implementation&quot;</span><span class="p">:</span> <span class="s2">&quot;async_kernel&quot;</span><span class="p">,</span>
            <span class="s2">&quot;implementation_version&quot;</span><span class="p">:</span> <span class="n">async_kernel</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span>
            <span class="s2">&quot;language_info&quot;</span><span class="p">:</span> <span class="n">async_kernel</span><span class="o">.</span><span class="n">kernel_protocol_version_info</span><span class="p">,</span>
            <span class="s2">&quot;banner&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">banner</span><span class="p">,</span>
            <span class="s2">&quot;help_links&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">help_links</span><span class="p">,</span>
            <span class="s2">&quot;debugger&quot;</span><span class="p">:</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">LAUNCHED_BY_DEBUGPY</span><span class="p">,</span>
            <span class="s2">&quot;kernel_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_name</span><span class="p">,</span>
            <span class="s2">&quot;supported_features&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;kernel subshells&quot;</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load settings into the kernel.</span>

<span class="sd">        Permitted until the kernel async context has been entered.</span>

<span class="sd">        Args:</span>
<span class="sd">            settings:</span>
<span class="sd">                key: dotted.path.of.attribute.</span>
<span class="sd">                value: The value to set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_started</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;It is too late to load settings!&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">settings_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="ow">or</span> <span class="p">{</span><span class="s2">&quot;kernel_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_name</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">settings_</span> <span class="o">|=</span> <span class="n">utils</span><span class="o">.</span><span class="n">setattr_nested</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">settings_</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load connection info from a dict containing connection info.</span>

<span class="sd">        Typically this data comes from a connection file</span>
<span class="sd">        and is called by load_connection_file.</span>

<span class="sd">        Args:</span>
<span class="sd">            info: Dictionary containing connection_info. See the connection_file spec for details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">load_connection_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A [staticmethod][] to stop the running kernel.</span>

<span class="sd">        Once an instance of a kernel is stopped the instance cannot be restarted.</span>
<span class="sd">        Instead a new instance should be started.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">instance</span> <span class="o">:=</span> <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stop</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;_stop&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">stop</span><span class="p">()</span>

    <span class="nd">@asynccontextmanager</span>
    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">__asynccontextmanager__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Self</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Start the kernel in an already running anyio event loop.&quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_shell</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">callers</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span><span class="p">()</span> <span class="k">as</span> <span class="n">scope</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_stop</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">scope</span><span class="o">.</span><span class="n">cancel</span><span class="p">,</span> <span class="s2">&quot;Stopping kernel&quot;</span><span class="p">)</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">excepthook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excepthook</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">unraisablehook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unraisablehook</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">patch_comm</span><span class="p">()</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="bp">self</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_started</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Kernel started: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
                        <span class="k">yield</span> <span class="bp">self</span>
                    <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">scope</span><span class="o">.</span><span class="n">cancel_called</span><span class="p">:</span>
                            <span class="k">raise</span>
                    <span class="k">finally</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_stopped</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">new_session</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">stop_all_subshells</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">AsyncInteractiveShell</span><span class="o">.</span><span class="n">clear_instance</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span><span class="p">(</span><span class="n">shield</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Kernel stopped: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">iopub_send</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">msg_or_type</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">content</span><span class="p">:</span> <span class="n">Content</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parent</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
        <span class="n">ident</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">buffers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a message on the iopub socket.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
            <span class="n">msg_or_type</span><span class="p">,</span>
            <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
            <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
            <span class="n">ident</span><span class="o">=</span><span class="n">ident</span><span class="p">,</span>
            <span class="n">buffers</span><span class="o">=</span><span class="n">buffers</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;prefixed topic for IOPub messages.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kernel.</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">msg_handler</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">socket_id</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">],</span>
        <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">,</span>
        <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">,</span>
        <span class="n">send_reply</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Job</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">CoroutineType</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
        <span class="o">/</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Schedule a message to be executed.&quot;&quot;&quot;</span>
        <span class="c1"># Note: There are never any active pending trackers in this context.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subshell_id</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subshell_id</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">]</span>  <span class="c1"># pyright: ignore[reportTypedDictNotRequiredAccess]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">subshell_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">cache_wrap_handler</span><span class="p">(</span><span class="n">subshell_id</span><span class="p">,</span> <span class="n">send_reply</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_handler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_handler</span><span class="p">(</span><span class="n">msg_type</span><span class="p">))</span>
        <span class="n">run_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">job</span><span class="o">=</span><span class="n">job</span><span class="p">)</span>
        <span class="k">match</span> <span class="n">run_mode</span><span class="p">:</span>
            <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">direct</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
            <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">queue_call</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
            <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
            <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">run_mode</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HandlerType</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;A handler was not found for </span><span class="si">{</span><span class="n">msg_type</span><span class="si">=}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>  <span class="c1"># pyright: ignore[reportReturnType]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_handler</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subshell_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">send_reply</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Job</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">CoroutineType</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
        <span class="n">handler</span><span class="p">:</span> <span class="n">HandlerType</span><span class="p">,</span>
        <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously run a message handler for a given job, managing reply sending and execution state.</span>

<span class="sd">        Args:</span>
<span class="sd">            subshell_id: The id of the subshell to set the context of the handler.</span>
<span class="sd">            send_reply: A coroutine function responsible for sending the reply.</span>
<span class="sd">            handler: A coroutine function to handle the job / message.</span>

<span class="sd">                - It is a method on the kernel whose name corresponds to the [message type that it handles][async_kernel.typing.MsgType].</span>
<span class="sd">                - The handler should return a dict to use as &#39;content&#39;in a reply.</span>
<span class="sd">                - If status is not included in the dict it gets added automatically as `{&#39;status&#39;: &#39;ok&#39;}`.</span>
<span class="sd">                - If a reply is not expected the handler should return `None`.</span>

<span class="sd">            job: The job dictionary containing message, socket, and identification information.</span>

<span class="sd">        Workflow:</span>
<span class="sd">            - Sets the current job and subshell_id context variables.</span>
<span class="sd">            - Sends a &quot;busy&quot; status message on the IOPub channel.</span>
<span class="sd">            - Awaits the handler; if the handler returns a content dict, a reply is sent using send_reply.</span>
<span class="sd">            - On exception, sends an error reply and logs the exception.</span>
<span class="sd">            - Resets the job and subshell_id context variables.</span>
<span class="sd">            - Sends an &quot;idle&quot; status message on the IOPub channel.</span>

<span class="sd">        Notes:</span>
<span class="sd">            - Replies are sent even if exceptions occur in the handler.</span>
<span class="sd">            - The reply message type is derived from the original request type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job_token</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_job_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
        <span class="n">subshell_token</span> <span class="o">=</span> <span class="n">SubshellPendingManager</span><span class="o">.</span><span class="n">_contextvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">subshell_id</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
                <span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">],</span>
                <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;busy&quot;</span><span class="p">},</span>
                <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="n">topic</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">content</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">job</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">send_reply</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">send_reply</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="n">utils</span><span class="o">.</span><span class="n">error_to_content</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception in message handler:&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">_job_var</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">job_token</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
            <span class="n">SubshellPendingManager</span><span class="o">.</span><span class="n">_contextvar</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">subshell_token</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
                <span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
                <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">],</span>
                <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;idle&quot;</span><span class="p">},</span>
                <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">del</span> <span class="n">job</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_run_mode</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">socket_id</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]</span> <span class="o">=</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span>
        <span class="n">job</span><span class="p">:</span> <span class="n">Job</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunMode</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determine the run mode for a given channel, message type and job.</span>

<span class="sd">        Args:</span>
<span class="sd">            socket_id: The socket ID the message was received on.</span>
<span class="sd">            msg_type: The type of the message.</span>
<span class="sd">            job: The job associated with the message, if any.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The run mode for the message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># receive_msg_loop - DEBUG WARNING</span>

        <span class="c1"># TODO: Are any of these options worth including?</span>
        <span class="c1"># if mode_from_metadata := job[&quot;msg&quot;][&quot;metadata&quot;].get(&quot;run_mode&quot;):</span>
        <span class="c1">#     return RunMode( mode_from_metadata)</span>
        <span class="c1"># if mode_from_header := job[&quot;msg&quot;][&quot;header&quot;].get(&quot;run_mode&quot;):</span>
        <span class="c1">#     return RunMode( mode_from_header)</span>
        <span class="k">match</span> <span class="p">(</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">):</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">comm_msg</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
            <span class="k">case</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">job</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">content</span> <span class="o">:=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="p">{}):</span>
                        <span class="k">if</span> <span class="n">code</span> <span class="o">:=</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">):</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="n">code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;# &quot;</span><span class="p">,</span> <span class="s2">&quot;##&quot;</span><span class="p">)):</span>
                                    <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
                                <span class="k">if</span> <span class="n">code</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;RunMode.&quot;</span><span class="p">):</span>
                                    <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;RunMode.&quot;</span><span class="p">))</span>
                            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                                <span class="k">pass</span>
                        <span class="k">if</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">):</span>
                            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span>
                    <span class="k">if</span> <span class="n">mode_</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_tags</span><span class="p">(</span><span class="n">job</span><span class="p">))</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">RunMode</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">mode_</span><span class="p">)))</span>
                <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
            <span class="k">case</span> <span class="p">(</span>
                <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span>
                <span class="n">MsgType</span><span class="o">.</span><span class="n">shutdown_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">debug_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">create_subshell_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">delete_subshell_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">list_subshell_request</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_type</span><span class="si">=}</span><span class="s2"> not allowed on shell!&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">debug_request</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
            <span class="k">case</span> <span class="p">(</span>
                <span class="n">_</span><span class="p">,</span>
                <span class="n">MsgType</span><span class="o">.</span><span class="n">complete_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">inspect_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">history_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">create_subshell_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">delete_subshell_request</span>
                <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">is_complete_request</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">direct</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">all_concurrency_run_modes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">socket_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">),</span>
        <span class="n">msg_types</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">MsgType</span><span class="p">]</span> <span class="o">=</span> <span class="n">MsgType</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span>
        <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span>
        <span class="nb">tuple</span><span class="p">[</span><span class="n">SocketID</span><span class="p">,</span> <span class="n">MsgType</span><span class="p">,</span> <span class="n">RunMode</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a dictionary containing all combinations of SocketID, and MsgType, along with their</span>
<span class="sd">        corresponding RunMode (if available).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">socket_id</span> <span class="ow">in</span> <span class="n">socket_ids</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">msg_type</span> <span class="ow">in</span> <span class="n">msg_types</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
        <span class="n">data_</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span> <span class="n">data_</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">kernel_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [kernel info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_info</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [comm info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info).&quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="n">target_name</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">comms</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span><span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span> <span class="o">==</span> <span class="n">target_name</span> <span class="ow">or</span> <span class="n">target_name</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;comms&quot;</span><span class="p">:</span> <span class="n">comms</span><span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">ExecuteContent</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [execute request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">execute_request</span><span class="p">(</span><span class="o">**</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [completion request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">do_complete_request</span><span class="p">(</span>
            <span class="n">code</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">cursor_pos</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">is_complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [is_complete request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">is_complete_request</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">inspect_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [inspect request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection).&quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">inspect_request</span><span class="p">(</span>
            <span class="n">code</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">cursor_pos</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">detail_level</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;detail_level&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">history_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [history request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#history).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">history_request</span><span class="p">(</span><span class="o">**</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [comm open request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_open</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [comm msg request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_msg</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [comm close request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_close</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">interrupt_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle an [interrupt request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt) (control only).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">interrupt</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [shutdown request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown) (control only).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;restart&quot;</span><span class="p">:</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;restart&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">debug_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [debug request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request) (control only).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">Kernel</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [create subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#create-subshell) (control only).&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">create_subshell</span><span class="p">(</span><span class="n">protected</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">subshell_id</span><span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [delete subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#delete-subshell) (control only).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">delete_subshell</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle a [list subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#list-subshells) (control only).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">list_subshells</span><span class="p">())}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">excepthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle an exception.&quot;&quot;&quot;</span>
        <span class="c1"># write uncaught traceback to &#39;real&#39; stderr, not zmq-forwarder</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_kernel_messages</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">__stderr__</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unraisablehook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unraisable</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">UnraisableHookArgs</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="s2">&quot;Handle unraisable exceptions (during gc for instance).&quot;</span>
        <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">,</span>
            <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_value</span> <span class="ow">or</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">),</span>
            <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_traceback</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">object</span><span class="p">})</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the connection info as a dict.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A convenience method to access the &#39;message&#39; in the current context if there is one.</span>

<span class="sd">        &#39;parent&#39; is the parameter name used by [Session.send][jupyter_client.session.Session.send] to provide context when sending a reply.</span>

<span class="sd">        See also:</span>
<span class="sd">            - [Kernel.iopub_send][Kernel.iopub_send]</span>
<span class="sd">            - [ipywidgets.Output][ipywidgets.widgets.widget_output.Output]:</span>
<span class="sd">                Uses `get_ipython().kernel.get_parent()` to obtain the `msg_id` which</span>
<span class="sd">                is used to &#39;capture&#39; output when its context has been acquired.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.interface" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">interface</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.interface" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">interface</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title=" BaseKernelInterface (async_kernel.interface.base.BaseKernelInterface)" href="../interface/#async_kernel.interface.base.BaseKernelInterface">BaseKernelInterface</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The abstraction to communicate with the kernel.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.callers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">callers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.callers" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">callers</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">],</span> <span class="n"><span title="async_kernel.Caller">Caller</span></span><span class="p">]]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The caller associated with the kernel once it has started.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.subshell_manager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">subshell_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.subshell_manager" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">subshell_manager</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title=" SubshellManager (async_kernel.asyncshell.SubshellManager)" href="../asyncshell/#async_kernel.asyncshell.SubshellManager">SubshellManager</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Dedicated to management of sub shells.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.help_links" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">help_links</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.help_links" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">help_links</span> <span class="o">=</span> <span class="n"><span title="traitlets.Tuple">Tuple</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.quiet" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">quiet</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.quiet" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">quiet</span> <span class="o">=</span> <span class="n"><span title="traitlets.Bool">Bool</span></span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Only send stdout/stderr to output stream.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.print_kernel_messages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">print_kernel_messages</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.print_kernel_messages" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">print_kernel_messages</span> <span class="o">=</span> <span class="n"><span title="traitlets.Bool">Bool</span></span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>When enabled the kernel will print startup, shutdown and terminal errors.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.connection_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">connection_file</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.connection_file" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">connection_file</span><span class="p">:</span> <span class="n"><span title="traitlets.TraitType">TraitType</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="traitlets.TraitType">TraitType</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>JSON file in which to store connection info </p>
<p><code>"kernel-&lt;pid&gt;.json"</code></p>
<p>This file will contain the IP, ports, and authentication key needed to connect
clients to this kernel. By default, this file will be created in the security dir
of the current profile, but can be specified by absolute path.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.kernel_name" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kernel_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.kernel_name" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kernel_name</span> <span class="o">=</span> <span class="n"><span title="traitlets.CUnicode">CUnicode</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The kernels name - if it contains 'trio' a trio backend will be used instead of an asyncio backend.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.log" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">log</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.log" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span> <span class="o">=</span> <span class="n"><span title="traitlets.Instance">Instance</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The logging adapter.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.main_shell" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">main_shell</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.main_shell" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">main_shell</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n"><span title="async_kernel.asyncshell.AsyncInteractiveShell.instance">instance</span></span><span class="p">())</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The interactive shell.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.debugger" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">debugger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.debugger" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">debugger</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title=" Debugger (async_kernel.debugger.Debugger)" href="../debugger/#async_kernel.debugger.Debugger">Debugger</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handles <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug requests</a>.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.comm_manager" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">comm_manager</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_manager" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">comm_manager</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><span title="async_kernel.comm.CommManager">CommManager</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Creates <a class="autorefs autorefs-internal" title=" Comm" href="../comm/#async_kernel.comm.Comm">async_kernel.comm.Comm</a> instances and maintains a mapping to <code>comm_id</code> to <code>Comm</code> instances.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.event_started" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">event_started</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.event_started" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">event_started</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" title="aiologic.Event" href="http://aiologic.readthedocs.io/latest/api.html#aiologic.Event">Event</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>An event that occurs when the kernel is started.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.event_stopped" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">event_stopped</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.event_stopped" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">event_stopped</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" Fixed (async_kernel.common.Fixed)" href="../common/#async_kernel.common.Fixed">Fixed</a></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-external" title="aiologic.Event" href="http://aiologic.readthedocs.io/latest/api.html#aiologic.Event">Event</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>An event that occurs when the kernel is stopped.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.settings" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">settings</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.settings" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">settings</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Settings that have been set to customise the behaviour of the kernel.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.shell" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">shell</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.shell" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">shell</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" AsyncInteractiveShell (async_kernel.asyncshell.AsyncInteractiveShell)" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveShell">AsyncInteractiveShell</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-internal" title=" AsyncInteractiveSubshell (async_kernel.asyncshell.AsyncInteractiveSubshell)" href="../asyncshell/#async_kernel.asyncshell.AsyncInteractiveSubshell">AsyncInteractiveSubshell</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The shell given the current context.</p>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>The <code>subshell_id</code> of the main shell is <code>None</code>.</li>
</ul>
</details>
          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.caller" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">caller</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.caller" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">caller</span><span class="p">:</span> <span class="n"><span title="async_kernel.Caller">Caller</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The caller for the shell channel.</p>

          
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="async_kernel.kernel.Kernel.kernel_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">kernel_info</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.kernel_info" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">kernel_info</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span>
    <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A dict of detail sent in reply to for a 'kernel_info_request'.</p>

          
    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.load_settings" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load_settings</span>


<a href="#async_kernel.kernel.Kernel.load_settings" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_settings</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.load_settings(settings)">settings</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load settings into the kernel.</p>
<p>Permitted until the kernel async context has been entered.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.load_settings(settings)" class="doc doc-heading doc-heading-parameter">              <b><code>settings</code></b>
<a href="#async_kernel.kernel.Kernel.load_settings(settings)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>key: dotted.path.of.attribute.
value: The value to set.</p>
          </div>
        </li>
    </ul>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load settings into the kernel.</span>

<span class="sd">    Permitted until the kernel async context has been entered.</span>

<span class="sd">    Args:</span>
<span class="sd">        settings:</span>
<span class="sd">            key: dotted.path.of.attribute.</span>
<span class="sd">            value: The value to set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_started</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;It is too late to load settings!&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">settings_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="ow">or</span> <span class="p">{</span><span class="s2">&quot;kernel_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_name</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">settings_</span> <span class="o">|=</span> <span class="n">utils</span><span class="o">.</span><span class="n">setattr_nested</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">settings_</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.load_connection_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load_connection_info</span>


<a href="#async_kernel.kernel.Kernel.load_connection_info" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_connection_info</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.load_connection_info(info)">info</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load connection info from a dict containing connection info.</p>
<p>Typically this data comes from a connection file
and is called by load_connection_file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.load_connection_info(info)" class="doc doc-heading doc-heading-parameter">              <b><code>info</code></b>
<a href="#async_kernel.kernel.Kernel.load_connection_info(info)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Dictionary containing connection_info. See the connection_file spec for details.</p>
          </div>
        </li>
    </ul>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load connection info from a dict containing connection info.</span>

<span class="sd">    Typically this data comes from a connection file</span>
<span class="sd">    and is called by load_connection_file.</span>

<span class="sd">    Args:</span>
<span class="sd">        info: Dictionary containing connection_info. See the connection_file spec for details.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">load_connection_info</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.stop" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">stop</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.stop" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#staticmethod">staticmethod</a> to stop the running kernel.</p>
<p>Once an instance of a kernel is stopped the instance cannot be restarted.
Instead a new instance should be started.</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A [staticmethod][] to stop the running kernel.</span>

<span class="sd">    Once an instance of a kernel is stopped the instance cannot be restarted.</span>
<span class="sd">    Instead a new instance should be started.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">instance</span> <span class="o">:=</span> <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">stop</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;_stop&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
        <span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.__asynccontextmanager__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__asynccontextmanager__</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.__asynccontextmanager__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__asynccontextmanager__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.AsyncGenerator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator">AsyncGenerator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Start the kernel in an already running anyio event loop.</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@asynccontextmanager</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">__asynccontextmanager__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Self</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Start the kernel in an already running anyio event loop.&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_shell</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">callers</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span><span class="p">()</span> <span class="k">as</span> <span class="n">scope</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">scope</span><span class="o">.</span><span class="n">cancel</span><span class="p">,</span> <span class="s2">&quot;Stopping kernel&quot;</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">excepthook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">excepthook</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">unraisablehook</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unraisablehook</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">patch_comm</span><span class="p">()</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="bp">self</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_started</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Kernel started: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="bp">self</span>
                <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">scope</span><span class="o">.</span><span class="n">cancel_called</span><span class="p">:</span>
                        <span class="k">raise</span>
                <span class="k">finally</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">kernel</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_stopped</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">new_session</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">stop_all_subshells</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">Kernel</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">AsyncInteractiveShell</span><span class="o">.</span><span class="n">clear_instance</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span><span class="p">(</span><span class="n">shield</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Kernel stopped: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.iopub_send" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">iopub_send</span>


<a href="#async_kernel.kernel.Kernel.iopub_send" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">iopub_send</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(msg_or_type)">msg_or_type</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Message (async_kernel.typing.Message)" href="../typing/#async_kernel.typing.Message">Message</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(content)">content</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(metadata)">metadata</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(parent)">parent</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Message (async_kernel.typing.Message)" href="../typing/#async_kernel.typing.Message">Message</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-internal" title=" NoValue (async_kernel.typing.NoValue)" href="../typing/#async_kernel.typing.NoValue">NoValue</a></span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" NoValue (async_kernel.typing.NoValue)" href="../typing/#async_kernel.typing.NoValue">NoValue</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(ident)">ident</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.iopub_send(buffers)">buffers</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Send a message on the iopub socket.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <a href="../asyncshell/#">asyncshell</a>
  </span>

            <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb last">
      <a href="../asyncshell/#async_kernel.asyncshell.AsyncDisplayHook"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncDisplayHook</a>
  </span>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb last">
      <a href="../asyncshell/#async_kernel.asyncshell.AsyncDisplayPublisher"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncDisplayPublisher</a>
  </span>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb last">
      <a href="../asyncshell/#async_kernel.asyncshell"><code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;asyncshell</a>
  </span>

      </li>
  </ul>

      </li>
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <a href="#">kernel</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="#async_kernel.kernel.Kernel"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Kernel</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="#async_kernel.kernel.Kernel.get_parent"><code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_parent</a>
  </span>

      </li>
  </ul>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">iopub_send</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">msg_or_type</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">content</span><span class="p">:</span> <span class="n">Content</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">parent</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">ident</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">buffers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Send a message on the iopub socket.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
        <span class="n">msg_or_type</span><span class="p">,</span>
        <span class="n">content</span><span class="o">=</span><span class="n">content</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">ident</span><span class="o">=</span><span class="n">ident</span><span class="p">,</span>
        <span class="n">buffers</span><span class="o">=</span><span class="n">buffers</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.topic" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">topic</span>


<a href="#async_kernel.kernel.Kernel.topic" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">topic</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.topic(topic)">topic</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>prefixed topic for IOPub messages.</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;prefixed topic for IOPub messages.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;kernel.</span><span class="si">{</span><span class="n">topic</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.msg_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">msg_handler</span>


<a href="#async_kernel.kernel.Kernel.msg_handler" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">msg_handler</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.msg_handler(socket_id)">socket_id</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">],</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.msg_handler(msg_type)">msg_type</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.msg_handler(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.msg_handler(send_reply)">send_reply</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="types.CoroutineType" href="https://docs.python.org/3/library/types.html#types.CoroutineType">CoroutineType</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Schedule a message to be executed.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.RunMode"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RunMode</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">msg_handler</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">socket_id</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">],</span>
    <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">,</span>
    <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">,</span>
    <span class="n">send_reply</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Job</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">CoroutineType</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Schedule a message to be executed.&quot;&quot;&quot;</span>
    <span class="c1"># Note: There are never any active pending trackers in this context.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">subshell_id</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subshell_id</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;header&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">]</span>  <span class="c1"># pyright: ignore[reportTypedDictNotRequiredAccess]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">subshell_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">cache_wrap_handler</span><span class="p">(</span><span class="n">subshell_id</span><span class="p">,</span> <span class="n">send_reply</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_handler</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_handler</span><span class="p">(</span><span class="n">msg_type</span><span class="p">))</span>
    <span class="n">run_mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">job</span><span class="o">=</span><span class="n">job</span><span class="p">)</span>
    <span class="k">match</span> <span class="n">run_mode</span><span class="p">:</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">direct</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">queue_call</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
        <span class="k">case</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">callers</span><span class="p">[</span><span class="n">socket_id</span><span class="p">]</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">run_mode</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.run_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">run_handler</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.run_handler" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_handler</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.run_handler(subshell_id)">subshell_id</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.run_handler(send_reply)">send_reply</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="types.CoroutineType" href="https://docs.python.org/3/library/types.html#types.CoroutineType">CoroutineType</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.run_handler(handler)">handler</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" HandlerType (async_kernel.typing.HandlerType)" href="../typing/#async_kernel.typing.HandlerType">HandlerType</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.run_handler(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Asynchronously run a message handler for a given job, managing reply sending and execution state.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.run_handler(subshell_id)" class="doc doc-heading doc-heading-parameter">              <b><code>subshell_id</code></b>
<a href="#async_kernel.kernel.Kernel.run_handler(subshell_id)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>)
          –
          <div class="doc-md-description">
            <p>The id of the subshell to set the context of the handler.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.run_handler(send_reply)" class="doc doc-heading doc-heading-parameter">              <b><code>send_reply</code></b>
<a href="#async_kernel.kernel.Kernel.run_handler(send_reply)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>], <a class="autorefs autorefs-external" title="types.CoroutineType" href="https://docs.python.org/3/library/types.html#types.CoroutineType">CoroutineType</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>, None]]</code>)
          –
          <div class="doc-md-description">
            <p>A coroutine function responsible for sending the reply.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.run_handler(handler)" class="doc doc-heading doc-heading-parameter">              <b><code>handler</code></b>
<a href="#async_kernel.kernel.Kernel.run_handler(handler)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-internal" title=" HandlerType (async_kernel.typing.HandlerType)" href="../typing/#async_kernel.typing.HandlerType">HandlerType</a></code>)
          –
          <div class="doc-md-description">
            <p>A coroutine function to handle the job / message.</p>
<ul>
<li>It is a method on the kernel whose name corresponds to the <a class="autorefs autorefs-internal" title=" MsgType" href="../typing/#async_kernel.typing.MsgType">message type that it handles</a>.</li>
<li>The handler should return a dict to use as 'content'in a reply.</li>
<li>If status is not included in the dict it gets added automatically as <code>{'status': 'ok'}</code>.</li>
<li>If a reply is not expected the handler should return <code>None</code>.</li>
</ul>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.run_handler(job)" class="doc doc-heading doc-heading-parameter">              <b><code>job</code></b>
<a href="#async_kernel.kernel.Kernel.run_handler(job)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The job dictionary containing message, socket, and identification information.</p>
          </div>
        </li>
    </ul>


<details class="workflow" open>
  <summary>Workflow</summary>
  <ul>
<li>Sets the current job and subshell_id context variables.</li>
<li>Sends a "busy" status message on the IOPub channel.</li>
<li>Awaits the handler; if the handler returns a content dict, a reply is sent using send_reply.</li>
<li>On exception, sends an error reply and logs the exception.</li>
<li>Resets the job and subshell_id context variables.</li>
<li>Sends an "idle" status message on the IOPub channel.</li>
</ul>
</details>

<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Replies are sent even if exceptions occur in the handler.</li>
<li>The reply message type is derived from the original request type.</li>
</ul>
</details>
          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run_handler</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">subshell_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">send_reply</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Job</span><span class="p">,</span> <span class="nb">dict</span><span class="p">],</span> <span class="n">CoroutineType</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]],</span>
    <span class="n">handler</span><span class="p">:</span> <span class="n">HandlerType</span><span class="p">,</span>
    <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously run a message handler for a given job, managing reply sending and execution state.</span>

<span class="sd">    Args:</span>
<span class="sd">        subshell_id: The id of the subshell to set the context of the handler.</span>
<span class="sd">        send_reply: A coroutine function responsible for sending the reply.</span>
<span class="sd">        handler: A coroutine function to handle the job / message.</span>

<span class="sd">            - It is a method on the kernel whose name corresponds to the [message type that it handles][async_kernel.typing.MsgType].</span>
<span class="sd">            - The handler should return a dict to use as &#39;content&#39;in a reply.</span>
<span class="sd">            - If status is not included in the dict it gets added automatically as `{&#39;status&#39;: &#39;ok&#39;}`.</span>
<span class="sd">            - If a reply is not expected the handler should return `None`.</span>

<span class="sd">        job: The job dictionary containing message, socket, and identification information.</span>

<span class="sd">    Workflow:</span>
<span class="sd">        - Sets the current job and subshell_id context variables.</span>
<span class="sd">        - Sends a &quot;busy&quot; status message on the IOPub channel.</span>
<span class="sd">        - Awaits the handler; if the handler returns a content dict, a reply is sent using send_reply.</span>
<span class="sd">        - On exception, sends an error reply and logs the exception.</span>
<span class="sd">        - Resets the job and subshell_id context variables.</span>
<span class="sd">        - Sends an &quot;idle&quot; status message on the IOPub channel.</span>

<span class="sd">    Notes:</span>
<span class="sd">        - Replies are sent even if exceptions occur in the handler.</span>
<span class="sd">        - The reply message type is derived from the original request type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">job_token</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_job_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">job</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
    <span class="n">subshell_token</span> <span class="o">=</span> <span class="n">SubshellPendingManager</span><span class="o">.</span><span class="n">_contextvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">subshell_id</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">],</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;busy&quot;</span><span class="p">},</span>
            <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="n">topic</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">content</span> <span class="o">:=</span> <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">job</span><span class="p">))</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">send_reply</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">send_reply</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="n">utils</span><span class="o">.</span><span class="n">error_to_content</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Exception in message handler:&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">_job_var</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">job_token</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
        <span class="n">SubshellPendingManager</span><span class="o">.</span><span class="n">_contextvar</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">subshell_token</span><span class="p">)</span>  <span class="c1"># pyright: ignore[reportPrivateUsage]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iopub_send</span><span class="p">(</span>
            <span class="n">msg_or_type</span><span class="o">=</span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
            <span class="n">parent</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">],</span>
            <span class="n">content</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;execution_state&quot;</span><span class="p">:</span> <span class="s2">&quot;idle&quot;</span><span class="p">},</span>
            <span class="n">ident</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">del</span> <span class="n">job</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.get_run_mode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_run_mode</span>


<a href="#async_kernel.kernel.Kernel.get_run_mode" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_run_mode</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.get_run_mode(msg_type)">msg_type</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.get_run_mode(socket_id)">socket_id</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.get_run_mode(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Determine the run mode for a given channel, message type and job.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.get_run_mode(socket_id)" class="doc doc-heading doc-heading-parameter">              <b><code>socket_id</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(socket_id)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>[<a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a>, <a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a>]</code>, default:
                  <code><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></code>
)
          –
          <div class="doc-md-description">
            <p>The socket ID the message was received on.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.get_run_mode(msg_type)" class="doc doc-heading doc-heading-parameter">              <b><code>msg_type</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(msg_type)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></code>)
          –
          <div class="doc-md-description">
            <p>The type of the message.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h4 id="async_kernel.kernel.Kernel.get_run_mode(job)" class="doc doc-heading doc-heading-parameter">              <b><code>job</code></b>
<a href="#async_kernel.kernel.Kernel.get_run_mode(job)" class="headerlink" title="Permanent link">&para;</a></h4>              (<code><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The job associated with the message, if any.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title=" RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></code>
          –
          <div class="doc-md-description">
            <p>The run mode for the message.</p>
          </div>
        </li>
    </ul>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.RunMode"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;RunMode</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_run_mode</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">msg_type</span><span class="p">:</span> <span class="n">MsgType</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">socket_id</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]</span> <span class="o">=</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span>
    <span class="n">job</span><span class="p">:</span> <span class="n">Job</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RunMode</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determine the run mode for a given channel, message type and job.</span>

<span class="sd">    Args:</span>
<span class="sd">        socket_id: The socket ID the message was received on.</span>
<span class="sd">        msg_type: The type of the message.</span>
<span class="sd">        job: The job associated with the message, if any.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The run mode for the message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># receive_msg_loop - DEBUG WARNING</span>

    <span class="c1"># TODO: Are any of these options worth including?</span>
    <span class="c1"># if mode_from_metadata := job[&quot;msg&quot;][&quot;metadata&quot;].get(&quot;run_mode&quot;):</span>
    <span class="c1">#     return RunMode( mode_from_metadata)</span>
    <span class="c1"># if mode_from_header := job[&quot;msg&quot;][&quot;header&quot;].get(&quot;run_mode&quot;):</span>
    <span class="c1">#     return RunMode( mode_from_header)</span>
    <span class="k">match</span> <span class="p">(</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">):</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">comm_msg</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="k">case</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">execute_request</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">job</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">content</span> <span class="o">:=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">,</span> <span class="p">{}):</span>
                    <span class="k">if</span> <span class="n">code</span> <span class="o">:=</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">code</span> <span class="o">:=</span> <span class="n">code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;# &quot;</span><span class="p">,</span> <span class="s2">&quot;##&quot;</span><span class="p">)):</span>
                                <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="n">code</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
                            <span class="k">if</span> <span class="n">code</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;RunMode.&quot;</span><span class="p">):</span>
                                <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">removeprefix</span><span class="p">(</span><span class="s2">&quot;RunMode.&quot;</span><span class="p">))</span>
                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                            <span class="k">pass</span>
                    <span class="k">if</span> <span class="n">content</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;silent&quot;</span><span class="p">):</span>
                        <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">task</span>
                <span class="k">if</span> <span class="n">mode_</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_tags</span><span class="p">(</span><span class="n">job</span><span class="p">))</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">RunMode</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">RunMode</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">mode_</span><span class="p">)))</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="k">case</span> <span class="p">(</span>
            <span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span>
            <span class="n">MsgType</span><span class="o">.</span><span class="n">shutdown_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">debug_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">create_subshell_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">delete_subshell_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">list_subshell_request</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg_type</span><span class="si">=}</span><span class="s2"> not allowed on shell!&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">,</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">debug_request</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">queue</span>
        <span class="k">case</span> <span class="p">(</span>
            <span class="n">_</span><span class="p">,</span>
            <span class="n">MsgType</span><span class="o">.</span><span class="n">complete_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">inspect_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">history_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">create_subshell_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">delete_subshell_request</span>
            <span class="o">|</span> <span class="n">MsgType</span><span class="o">.</span><span class="n">is_complete_request</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">thread</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">RunMode</span><span class="o">.</span><span class="n">direct</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.all_concurrency_run_modes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">all_concurrency_run_modes</span>


<a href="#async_kernel.kernel.Kernel.all_concurrency_run_modes" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">all_concurrency_run_modes</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.all_concurrency_run_modes(socket_ids)">socket_ids</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title=" shell (async_kernel.typing.SocketID.shell)" href="../typing/#async_kernel.typing.SocketID.shell">shell</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" control (async_kernel.typing.SocketID.control)" href="../typing/#async_kernel.typing.SocketID.control">control</a></span><span class="p">),</span>
    <span class="n"><span title="async_kernel.kernel.Kernel.all_concurrency_run_modes(msg_types)">msg_types</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span>
    <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" SocketID (async_kernel.typing.SocketID)" href="../typing/#async_kernel.typing.SocketID">SocketID</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" MsgType (async_kernel.typing.MsgType)" href="../typing/#async_kernel.typing.MsgType">MsgType</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title=" RunMode (async_kernel.typing.RunMode)" href="../typing/#async_kernel.typing.RunMode">RunMode</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
<span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generates a dictionary containing all combinations of SocketID, and MsgType, along with their
corresponding RunMode (if available).</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">all_concurrency_run_modes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">socket_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">SocketID</span><span class="o">.</span><span class="n">shell</span><span class="p">,</span> <span class="n">SocketID</span><span class="o">.</span><span class="n">control</span><span class="p">),</span>
    <span class="n">msg_types</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">MsgType</span><span class="p">]</span> <span class="o">=</span> <span class="n">MsgType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span>
    <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span>
    <span class="nb">tuple</span><span class="p">[</span><span class="n">SocketID</span><span class="p">,</span> <span class="n">MsgType</span><span class="p">,</span> <span class="n">RunMode</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
<span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a dictionary containing all combinations of SocketID, and MsgType, along with their</span>
<span class="sd">    corresponding RunMode (if available).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">socket_id</span> <span class="ow">in</span> <span class="n">socket_ids</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">msg_type</span> <span class="ow">in</span> <span class="n">msg_types</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_run_mode</span><span class="p">(</span><span class="n">msg_type</span><span class="p">,</span> <span class="n">socket_id</span><span class="o">=</span><span class="n">socket_id</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">socket_id</span><span class="p">,</span> <span class="n">msg_type</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>
    <span class="n">data_</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="s2">&quot;SocketID&quot;</span><span class="p">,</span> <span class="s2">&quot;MsgType&quot;</span><span class="p">,</span> <span class="s2">&quot;RunMode&quot;</span><span class="p">],</span> <span class="n">data_</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.kernel_info_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">kernel_info_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.kernel_info_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">kernel_info_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.kernel_info_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info">kernel info request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">kernel_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [kernel info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-info).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">kernel_info</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.comm_info_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">comm_info_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_info_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_info_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_info_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info">comm info request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.comm_info_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_info_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_info_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm info request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-info).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="n">target_name</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">comms</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;target_name&quot;</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span><span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comms</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">target_name</span> <span class="o">==</span> <span class="n">target_name</span> <span class="ow">or</span> <span class="n">target_name</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;comms&quot;</span><span class="p">:</span> <span class="n">comms</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.execute_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">execute_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.execute_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">execute_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.execute_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" ExecuteContent (async_kernel.typing.ExecuteContent)" href="../typing/#async_kernel.typing.ExecuteContent">ExecuteContent</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute">execute request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.execute_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;execute_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">ExecuteContent</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [execute request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#execute).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">execute_request</span><span class="p">(</span><span class="o">**</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.complete_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">complete_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.complete_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">complete_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.complete_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion">completion request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.complete_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;complete_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [completion request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#completion).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">do_complete_request</span><span class="p">(</span>
        <span class="n">code</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">cursor_pos</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.is_complete_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">is_complete_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.is_complete_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_complete_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.is_complete_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness">is_complete request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.is_complete_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;is_complete_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">is_complete_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [is_complete request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#code-completeness).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">is_complete_request</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.inspect_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">inspect_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.inspect_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">inspect_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.inspect_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection">inspect request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.inspect_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;inspect_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">inspect_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [inspect request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#introspection).&quot;&quot;&quot;</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">inspect_request</span><span class="p">(</span>
        <span class="n">code</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
        <span class="n">cursor_pos</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cursor_pos&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">detail_level</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;detail_level&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.history_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">history_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.history_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">history_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.history_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#history">history request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">history_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [history request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#history).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">history_request</span><span class="p">(</span><span class="o">**</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.comm_open" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">comm_open</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_open" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_open</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_open(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm">comm open request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm open request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#opening-a-comm).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_open</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.comm_msg" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">comm_msg</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_msg" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_msg</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_msg(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages">comm msg request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_msg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm msg request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#comm-messages).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_msg</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.comm_close" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">comm_close</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.comm_close" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">comm_close</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.comm_close(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms">comm close request</a>.</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.comm_close"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;comm_close</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">comm_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [comm close request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#tearing-down-comms).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">comm_manager</span><span class="o">.</span><span class="n">comm_close</span><span class="p">(</span><span class="n">stream</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ident</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">])</span>  <span class="c1"># pyright: ignore[reportArgumentType]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.interrupt_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">interrupt_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.interrupt_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">interrupt_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.interrupt_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle an <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt">interrupt request</a> (control only).</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">interrupt_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle an [interrupt request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-interrupt) (control only).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">interrupt</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.shutdown_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">shutdown_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.shutdown_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">shutdown_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.shutdown_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown">shutdown request</a> (control only).</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.shutdown_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;shutdown_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">shutdown_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [shutdown request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#kernel-shutdown) (control only).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;restart&quot;</span><span class="p">:</span> <span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;restart&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.debug_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">debug_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.debug_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">debug_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.debug_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request">debug request</a> (control only).</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.list_subshell_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;list_subshell_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">debug_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [debug request](https://jupyter-client.readthedocs.io/en/stable/messaging.html#debug-request) (control only).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugger</span><span class="o">.</span><span class="n">process_request</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.create_subshell_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">create_subshell_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.create_subshell_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">create_subshell_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.create_subshell_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#create-subshell">create subshell request</a> (control only).</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.create_subshell_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;create_subshell_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">create_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">Kernel</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [create subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#create-subshell) (control only).&quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">create_subshell</span><span class="p">(</span><span class="n">protected</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">subshell_id</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.delete_subshell_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">delete_subshell_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.delete_subshell_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">delete_subshell_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.delete_subshell_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#delete-subshell">delete subshell request</a> (control only).</p>

          


  <div class="doc doc-backlinks">
        <b class="doc doc-backlink-type">Referenced by:</b>
          <ul class="doc doc-backlink-list">
      <li class="doc doc-backlink">
            <span class="doc doc-backlink-crumb">
      <span>Reference</span>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#">typing</a>
  </span>

            <span class="doc doc-backlink-crumb">
      <a href="../typing/#async_kernel.typing.MsgType"><code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MsgType</a>
  </span>

            <span class="doc doc-backlink-crumb last">
      <a href="../typing/#async_kernel.typing.MsgType.delete_subshell_request"><code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;delete_subshell_request</a>
  </span>

      </li>
  </ul>

  </div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">delete_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [delete subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#delete-subshell) (control only).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">delete_subshell</span><span class="p">(</span><span class="n">job</span><span class="p">[</span><span class="s2">&quot;msg&quot;</span><span class="p">][</span><span class="s2">&quot;content&quot;</span><span class="p">][</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.list_subshell_request" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">list_subshell_request</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.kernel.Kernel.list_subshell_request" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">list_subshell_request</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.list_subshell_request(job)">job</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title=" Job (async_kernel.typing.Job)" href="../typing/#async_kernel.typing.Job">Job</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Content (async_kernel.typing.Content)" href="../typing/#async_kernel.typing.Content">Content</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle a <a href="https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#list-subshells">list subshell request</a> (control only).</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">list_subshell_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">[</span><span class="n">Content</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Content</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle a [list subshell request](https://jupyter.org/enhancement-proposals/91-kernel-subshells/kernel-subshells.html#list-subshells) (control only).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;subshell_id&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subshell_manager</span><span class="o">.</span><span class="n">list_subshells</span><span class="p">())}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.excepthook" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">excepthook</span>


<a href="#async_kernel.kernel.Kernel.excepthook" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">excepthook</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.excepthook(etype)">etype</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.kernel.Kernel.excepthook(evalue)">evalue</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.kernel.Kernel.excepthook(tb)">tb</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle an exception.</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">excepthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle an exception.&quot;&quot;&quot;</span>
    <span class="c1"># write uncaught traceback to &#39;real&#39; stderr, not zmq-forwarder</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_kernel_messages</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exception</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">evalue</span><span class="p">,</span> <span class="n">tb</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">__stderr__</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.unraisablehook" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">unraisablehook</span>


<a href="#async_kernel.kernel.Kernel.unraisablehook" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">unraisablehook</span><span class="p">(</span><span class="n"><span title="async_kernel.kernel.Kernel.unraisablehook(unraisable)">unraisable</span></span><span class="p">:</span> <span class="n"><span title="sys.UnraisableHookArgs">UnraisableHookArgs</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Handle unraisable exceptions (during gc for instance).</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unraisablehook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unraisable</span><span class="p">:</span> <span class="n">sys</span><span class="o">.</span><span class="n">UnraisableHookArgs</span><span class="p">,</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Handle unraisable exceptions (during gc for instance).&quot;</span>
    <span class="n">exc_info</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">,</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_value</span> <span class="ow">or</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_type</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">),</span>
        <span class="n">unraisable</span><span class="o">.</span><span class="n">exc_traceback</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">unraisable</span><span class="o">.</span><span class="n">err_msg</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">exc_info</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">unraisable</span><span class="o">.</span><span class="n">object</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.get_connection_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_connection_info</span>


<a href="#async_kernel.kernel.Kernel.get_connection_info" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_connection_info</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the connection info as a dict.</p>

          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_connection_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the connection info as a dict.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">connection_file</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="async_kernel.kernel.Kernel.get_parent" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_parent</span>


<a href="#async_kernel.kernel.Kernel.get_parent" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_parent</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title=" Message (async_kernel.typing.Message)" href="../typing/#async_kernel.typing.Message">Message</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A convenience method to access the 'message' in the current context if there is one.</p>
<p>'parent' is the parameter name used by <a class="autorefs autorefs-external" href="https://jupyter-client.readthedocs.io/en/stable/api/jupyter_client.html#jupyter_client.session.Session.send">Session.send</a> to provide context when sending a reply.</p>


<details class="see-also" open>
  <summary>See also</summary>
  <ul>
<li><a class="autorefs autorefs-internal" title=" iopub_send" href="#async_kernel.kernel.Kernel.iopub_send">Kernel.iopub_send</a></li>
<li><a class="autorefs autorefs-external" href="https://ipywidgets.readthedocs.io/en/stable/reference/ipywidgets.html#ipywidgets.widgets.widget_output.Output">ipywidgets.Output</a>:
    Uses <code>get_ipython().kernel.get_parent()</code> to obtain the <code>msg_id</code> which
    is used to 'capture' output when its context has been acquired.</li>
</ul>
</details>
          

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/async_kernel/kernel.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A convenience method to access the &#39;message&#39; in the current context if there is one.</span>

<span class="sd">    &#39;parent&#39; is the parameter name used by [Session.send][jupyter_client.session.Session.send] to provide context when sending a reply.</span>

<span class="sd">    See also:</span>
<span class="sd">        - [Kernel.iopub_send][Kernel.iopub_send]</span>
<span class="sd">        - [ipywidgets.Output][ipywidgets.widgets.widget_output.Output]:</span>
<span class="sd">            Uses `get_ipython().kernel.get_parent()` to obtain the `msg_id` which</span>
<span class="sd">            is used to &#39;capture&#39; output when its context has been acquired.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
    
  </aside>





                 
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../interface/" class="md-footer__link md-footer__link--prev" aria-label="Previous: interface">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                interface
              </div>
            </div>
          </a>
        
        
          
          <a href="../kernelspec/" class="md-footer__link md-footer__link--next" aria-label="Next: kernelspec">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                kernelspec
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy;   2025-present
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy", "toc.follow", "navigation.top", "header.autohide", "navigation.footer", "search.suggest", "search.highlight", "navigation.instant", "navigation.indexes", "navigation.path"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>