
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Async-kernel for Jupyter">
      
      
      
        <link rel="canonical" href="https://fleming79.github.io/async-kernel/dev/reference/caller/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../comm/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Caller - async-kernel</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M11%209h2V7h-2m1%2013c-4.41%200-8-3.59-8-8s3.59-8%208-8%208%203.59%208%208-3.59%208-8%208m0-18A10%2010%200%200%200%202%2012a10%2010%200%200%200%2010%2010%2010%2010%200%200%200%2010-10A10%2010%200%200%200%2012%202m-1%2015h2v-6h-2z%22/%3E%3C/svg%3E');}</style>


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#async_kernel.caller" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
               You're not
viewing the latest version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="async-kernel" class="md-header__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            async-kernel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Caller
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="darkula" data-md-color-primary="blue" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../usage/" class="md-tabs__link">
          
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
    
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="async-kernel" class="md-nav__button md-logo" aria-label="async-kernel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    async-kernel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fleming79/async-kernel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    fleming79/async-kernel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../usage/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../notebooks/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 10h5.5L14 4.5zM5 3h10l6 6v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-1.11.89-2 2-2m0 9v2h14v-2zm0 4v2h9v-2z"/></svg>
  
  <span class="md-ellipsis">
    Notebooks
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/simple_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple example
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concurrency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/caller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caller
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Caller
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Caller
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;caller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" caller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.get_caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_caller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.is_set" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.set" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncLock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncLock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.acquire" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acquire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.is_in_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_in_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.release" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;release
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Caller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Caller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.MAX_BUFFER_SIZE" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MAX_BUFFER_SIZE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MAX_IDLE_POOL_INSTANCES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.backend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;backend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.protected" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;protected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.running" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;running
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stopped" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stopped
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.__new__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__new__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.all_callers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_callers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.as_completed" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;as_completed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_direct" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_direct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_later" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_later
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_soon" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_soon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.current_future" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;current_future
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_call" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_exists" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.start_new" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_new
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stop_all" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.to_thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.to_thread_by_name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_thread_by_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Future
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Future">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.add_done_callback" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_done_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.cancel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;cancel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.cancelled" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;cancelled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.done" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;done
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.exception" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.get_caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_caller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.remove_done_callback" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;remove_done_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.result" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_cancel_scope" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_cancel_scope
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_exception" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_result" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.FutureCancelledError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FutureCancelledError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.InvalidStateError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InvalidStateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ReentrantAsyncLock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ReentrantAsyncLock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.acquire" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acquire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.is_in_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_in_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.release" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;release
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kernel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernelspec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kernelspec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asyncshell/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asyncshell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Typing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#async_kernel.caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;caller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" caller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncEvent
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncEvent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.get_caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_caller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.is_set" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.set" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncEvent.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;AsyncLock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" AsyncLock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.acquire" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acquire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.is_in_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_in_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.AsyncLock.release" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;release
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Caller
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Caller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.MAX_BUFFER_SIZE" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MAX_BUFFER_SIZE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;MAX_IDLE_POOL_INSTANCES
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.backend" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;backend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.log" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.protected" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;protected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.running" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;running
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stopped" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;stopped
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.__new__" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__new__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.all_callers" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;all_callers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.as_completed" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;as_completed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_direct" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_direct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_later" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_later
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.call_soon" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;call_soon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.current_future" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;current_future
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_call" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_close" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.queue_exists" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;queue_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.start_new" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;start_new
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stop" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.stop_all" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;stop_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.to_thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.to_thread_by_name" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;to_thread_by_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Caller.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Future
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" Future">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.metadata" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;metadata
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.thread" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;thread
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.add_done_callback" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;add_done_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.cancel" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;cancel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.cancelled" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;cancelled
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.done" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;done
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.exception" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.get_caller" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_caller
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.remove_done_callback" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;remove_done_callback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.result" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_cancel_scope" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_cancel_scope
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_exception" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.set_result" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.Future.wait" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;wait
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.FutureCancelledError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;FutureCancelledError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.InvalidStateError" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;InvalidStateError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ReentrantAsyncLock
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" ReentrantAsyncLock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.count" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-attribute"></code>&nbsp;count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.acquire" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;acquire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.is_in_context" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_in_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#async_kernel.caller.ReentrantAsyncLock.release" class="md-nav__link">
    <span class="md-ellipsis">
      <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;release
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                  
                  


  
  


  <h1>Caller</h1>

<div class="doc doc-object doc-module">



<h2 id="async_kernel.caller" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">async_kernel.caller</span>


<a href="#async_kernel.caller" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">










<p><span class="doc-section-title">Classes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="AsyncEvent (async_kernel.caller.AsyncEvent)" href="#async_kernel.caller.AsyncEvent">AsyncEvent</a></code></b>
          –
          <div class="doc-md-description">
            <p>An asynchronous thread-safe event compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="AsyncLock (async_kernel.caller.AsyncLock)" href="#async_kernel.caller.AsyncLock">AsyncLock</a></code></b>
          –
          <div class="doc-md-description">
            <p>Implements a mutex asynchronous lock that is compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="Caller (async_kernel.caller.Caller)" href="#async_kernel.caller.Caller">Caller</a></code></b>
          –
          <div class="doc-md-description">
            <p>A class to enable calling functions and coroutines between anyio event loops.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></code></b>
          –
          <div class="doc-md-description">
            <p>A class representing a future result modelled on <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio-future.html#asyncio.Future">asyncio.Future</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="FutureCancelledError (async_kernel.caller.FutureCancelledError)" href="#async_kernel.caller.FutureCancelledError">FutureCancelledError</a></code></b>
          –
          <div class="doc-md-description">
            <p>Used to indicate a <code>Future</code> is cancelled.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="InvalidStateError (async_kernel.caller.InvalidStateError)" href="#async_kernel.caller.InvalidStateError">InvalidStateError</a></code></b>
          –
          <div class="doc-md-description">
            <p>An invalid state of a <a class="autorefs autorefs-internal" title="Future" href="#async_kernel.caller.Future">Future</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="ReentrantAsyncLock (async_kernel.caller.ReentrantAsyncLock)" href="#async_kernel.caller.ReentrantAsyncLock">ReentrantAsyncLock</a></code></b>
          –
          <div class="doc-md-description">
            <p>Implements a Reentrant asynchronous lock compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>
          </div>
        </li>
    </ul>







  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.AsyncEvent" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AsyncEvent</span>


<a href="#async_kernel.caller.AsyncEvent" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AsyncEvent</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.AsyncEvent(thread)">thread</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>An asynchronous thread-safe event compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="get_caller (async_kernel.caller.AsyncEvent.get_caller)" href="#async_kernel.caller.AsyncEvent.get_caller">get_caller</a></code></b>
            –
            <div class="doc-md-description">
              <p>The <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a> that is running for this <em>events</em> thread.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="is_set (async_kernel.caller.AsyncEvent.is_set)" href="#async_kernel.caller.AsyncEvent.is_set">is_set</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return <code>True</code> if the flag is set, <code>False</code> if not.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="set (async_kernel.caller.AsyncEvent.set)" href="#async_kernel.caller.AsyncEvent.set">set</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set the internal flag to <code>True</code> and trigger notification.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="wait


  
      async
   (async_kernel.caller.AsyncEvent.wait)" href="#async_kernel.caller.AsyncEvent.wait">wait</a></code></b>
            –
            <div class="doc-md-description">
              <p>Wait until the flag has been set.</p>
            </div>
          </li>
    </ul>



                  <details class="quote">
                    <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">thread</span> <span class="ow">or</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncEvent.get_caller" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_caller</span>


<a href="#async_kernel.caller.AsyncEvent.get_caller" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_caller</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Caller (async_kernel.caller.Caller)" href="#async_kernel.caller.Caller">Caller</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a> that is running for this <em>events</em> thread.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_caller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Caller</span><span class="p">:</span>
    <span class="s2">&quot;The [async_kernel.caller.Caller][] that is running for this *events* thread.&quot;</span>
    <span class="k">return</span> <span class="n">Caller</span><span class="p">(</span><span class="n">thread</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncEvent.is_set" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_set</span>


<a href="#async_kernel.caller.AsyncEvent.is_set" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_set</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return <code>True</code> if the flag is set, <code>False</code> if not.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;Return `True` if the flag is set, `False` if not.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncEvent.set" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set</span>


<a href="#async_kernel.caller.AsyncEvent.set" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the internal flag to <code>True</code> and trigger notification.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Set the internal flag to `True` and trigger notification.&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncEvent.wait" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">wait</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.AsyncEvent.wait" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">wait</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Wait until the flag has been set.</p>
<p>If the flag has already been set when this method is called, it returns immediately.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wait until the flag has been set.</span>

<span class="sd">    If the flag has already been set when this method is called, it returns immediately.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="ow">is</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span> <span class="o">=</span> <span class="n">anyio</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_anyio_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">wait_thread_event</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_thread_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.AsyncLock" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AsyncLock</span>


<a href="#async_kernel.caller.AsyncLock" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AsyncLock</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Implements a mutex asynchronous lock that is compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>Attempting to lock a 'mutuex' configured lock that is <em>locked</em> will raise a <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError">RuntimeError</a>.</li>
</ul>
</div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="acquire


  
      async
   (async_kernel.caller.AsyncLock.acquire)" href="#async_kernel.caller.AsyncLock.acquire">acquire</a></code></b>
            –
            <div class="doc-md-description">
              <p>Acquire a lock.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="is_in_context (async_kernel.caller.AsyncLock.is_in_context)" href="#async_kernel.caller.AsyncLock.is_in_context">is_in_context</a></code></b>
            –
            <div class="doc-md-description">
              <p>Returns <code>True</code> if the current context has the lock.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="release


  
      async
   (async_kernel.caller.AsyncLock.release)" href="#async_kernel.caller.AsyncLock.release">release</a></code></b>
            –
            <div class="doc-md-description">
              <p>Decrement the internal counter.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="count


  
      property
   (async_kernel.caller.AsyncLock.count)" href="#async_kernel.caller.AsyncLock.count">count</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Returns the number of times the locked context has been entered.</p>
          </div>
        </li>
    </ul>

                  <details class="quote">
                    <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="p">:</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">ContextVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">ContextVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lock:</span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">:</span> <span class="n">deque</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Future</span><span class="p">[</span><span class="n">Future</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.AsyncLock.count" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">count</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.AsyncLock.count" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">count</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the number of times the locked context has been entered.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncLock.acquire" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">acquire</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.AsyncLock.acquire" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">acquire</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Acquire a lock.</p>
<p>If the lock is reentrant the internal counter increments to share the lock.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Acquire a lock.</span>

<span class="sd">    If the lock is reentrant the internal counter increments to share the lock.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Already locked and not reentrant!&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># Get the context.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">ctx</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">get</span><span class="p">()):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_count</span> <span class="o">=</span> <span class="n">ctx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="c1"># Check if we can lock or re-enter an active lock.</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span><span class="p">)</span> <span class="ow">and</span> <span class="p">((</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">())):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="n">ctx</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="c1"># Join the queue.</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Future</span><span class="p">[</span><span class="kc">None</span> <span class="o">|</span> <span class="n">Future</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">Future</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fut</span> <span class="o">=</span> <span class="k">await</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fut</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="n">ctx</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">ctx</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncLock.is_in_context" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_in_context</span>


<a href="#async_kernel.caller.AsyncLock.is_in_context" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_in_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns <code>True</code> if the current context has the lock.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_in_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;Returns `True` if the current context has the lock.&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.AsyncLock.release" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">release</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.AsyncLock.release" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">release</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Decrement the internal counter.</p>
<p>If the current depth==1 the lock will be passed to the next queued or released if there isn't one.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decrement the internal counter.</span>

<span class="sd">    If the current depth==1 the lock will be passed to the next queued or released if there isn&#39;t one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">InvalidStateError</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fut</span> <span class="o">=</span> <span class="n">Future</span><span class="p">()</span>
            <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
            <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.Caller" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Caller</span>


<a href="#async_kernel.caller.Caller" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>A class to enable calling functions and coroutines between anyio event loops.</p>
<p>The <code>Caller</code> class provides a mechanism to execute functions and coroutines
in a dedicated thread, leveraging AnyIO for asynchronous task management.
It supports scheduling calls with delays, executing them immediately,
and running them without a context.  It also provides a means to manage
a pool of threads for general purpose offloading of tasks.</p>
<p>The class maintains a registry of instances, associating each with a specific
thread. It uses a task group to manage the execution of scheduled tasks and
provides methods to start, stop, and query the status of the caller.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="__new__ (async_kernel.caller.Caller.__new__)" href="#async_kernel.caller.Caller.__new__">__new__</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create the <code>Caller</code> instance for the current thread or retrieve an existing instance</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="all_callers


  
      classmethod
   (async_kernel.caller.Caller.all_callers)" href="#async_kernel.caller.Caller.all_callers">all_callers</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod to get a list of the callers.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="as_completed


  
      async
      classmethod
   (async_kernel.caller.Caller.as_completed)" href="#async_kernel.caller.Caller.as_completed">as_completed</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod iterator to get <a class="autorefs autorefs-internal" title="Future" href="#async_kernel.caller.Future">Futures</a> as they complete.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="call_direct (async_kernel.caller.Caller.call_direct)" href="#async_kernel.caller.Caller.call_direct">call_direct</a></code></b>
            –
            <div class="doc-md-description">
              <p>Schedule func to be called in caller's event loop directly.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="call_later (async_kernel.caller.Caller.call_later)" href="#async_kernel.caller.Caller.call_later">call_later</a></code></b>
            –
            <div class="doc-md-description">
              <p>Schedule func to be called in caller's event loop copying the current context.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="call_soon (async_kernel.caller.Caller.call_soon)" href="#async_kernel.caller.Caller.call_soon">call_soon</a></code></b>
            –
            <div class="doc-md-description">
              <p>Schedule func to be called in caller's event loop copying the current context.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="current_future


  
      classmethod
   (async_kernel.caller.Caller.current_future)" href="#async_kernel.caller.Caller.current_future">current_future</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod that returns the current future when called from inside a function scheduled by Caller.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="get_instance


  
      classmethod
   (async_kernel.caller.Caller.get_instance)" href="#async_kernel.caller.Caller.get_instance">get_instance</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod that gets an instance by name, possibly starting a new instance.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="queue_call (async_kernel.caller.Caller.queue_call)" href="#async_kernel.caller.Caller.queue_call">queue_call</a></code></b>
            –
            <div class="doc-md-description">
              <p>Queue the execution of <code>func</code> with the arguments <code>*args</code> in a queue unique to it (not thread-safe).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="queue_close (async_kernel.caller.Caller.queue_close)" href="#async_kernel.caller.Caller.queue_close">queue_close</a></code></b>
            –
            <div class="doc-md-description">
              <p>Close the execution queue associated with func (thread-safe).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="queue_exists (async_kernel.caller.Caller.queue_exists)" href="#async_kernel.caller.Caller.queue_exists">queue_exists</a></code></b>
            –
            <div class="doc-md-description">
              <p>Returns True if an execution queue exists for <code>func</code>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="start_new


  
      classmethod
   (async_kernel.caller.Caller.start_new)" href="#async_kernel.caller.Caller.start_new">start_new</a></code></b>
            –
            <div class="doc-md-description">
              <p>Start a new thread with a new Caller open in the context of anyio event loop.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="stop (async_kernel.caller.Caller.stop)" href="#async_kernel.caller.Caller.stop">stop</a></code></b>
            –
            <div class="doc-md-description">
              <p>Stop the caller, cancelling all pending tasks and close the thread.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="stop_all


  
      classmethod
   (async_kernel.caller.Caller.stop_all)" href="#async_kernel.caller.Caller.stop_all">stop_all</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod to stop all un-protected callers.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="to_thread


  
      classmethod
   (async_kernel.caller.Caller.to_thread)" href="#async_kernel.caller.Caller.to_thread">to_thread</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod to call func in a separate thread see also <a class="autorefs autorefs-internal" title="to_thread_by_name


  
      classmethod
  " href="#async_kernel.caller.Caller.to_thread_by_name">to_thread_by_name</a>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="to_thread_by_name


  
      classmethod
   (async_kernel.caller.Caller.to_thread_by_name)" href="#async_kernel.caller.Caller.to_thread_by_name">to_thread_by_name</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod to call func in the thread specified by name.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="wait


  
      async
      classmethod
   (async_kernel.caller.Caller.wait)" href="#async_kernel.caller.Caller.wait">wait</a></code></b>
            –
            <div class="doc-md-description">
              <p>A classmethod to wait for the futures given by items to complete.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="MAX_BUFFER_SIZE


  
      class-attribute
      instance-attribute
   (async_kernel.caller.Caller.MAX_BUFFER_SIZE)" href="#async_kernel.caller.Caller.MAX_BUFFER_SIZE">MAX_BUFFER_SIZE</a></code></b>
          –
          <div class="doc-md-description">
            <p>The default  maximum_buffer_size used in <a class="autorefs autorefs-internal" title="queue_call" href="#async_kernel.caller.Caller.queue_call">queue_call</a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="MAX_IDLE_POOL_INSTANCES


  
      class-attribute
      instance-attribute
   (async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES)" href="#async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES">MAX_IDLE_POOL_INSTANCES</a></code></b>
          –
          <div class="doc-md-description">
            <p>The number of <code>pool</code> instances to leave idle (See also<a class="autorefs autorefs-internal" title="to_thread


  
      classmethod
  " href="#async_kernel.caller.Caller.to_thread">to_thread</a>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="backend


  
      instance-attribute
   (async_kernel.caller.Caller.backend)" href="#async_kernel.caller.Caller.backend">backend</a></code></b>
              (<code><span title="async_kernel.kernelspec.Backend">Backend</span></code>)
          –
          <div class="doc-md-description">
            <p>The <code>anyio</code> backend the caller is running in.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="log


  
      instance-attribute
   (async_kernel.caller.Caller.log)" href="#async_kernel.caller.Caller.log">log</a></code></b>
              (<code><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="protected


  
      property
   (async_kernel.caller.Caller.protected)" href="#async_kernel.caller.Caller.protected">protected</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
          –
          <div class="doc-md-description">
            <p>Returns <code>True</code> if the caller is protected from stopping.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="running


  
      property
   (async_kernel.caller.Caller.running)" href="#async_kernel.caller.Caller.running">running</a></code></b>
          –
          <div class="doc-md-description">
            <p>Returns <code>True</code> when the caller is available to run requests.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="stopped


  
      property
   (async_kernel.caller.Caller.stopped)" href="#async_kernel.caller.Caller.stopped">stopped</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>)
          –
          <div class="doc-md-description">
            <p>Returns  <code>True</code> if the caller is stopped.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="thread


  
      instance-attribute
   (async_kernel.caller.Caller.thread)" href="#async_kernel.caller.Caller.thread">thread</a></code></b>
              (<code><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></code>)
          –
          <div class="doc-md-description">
            <p>The thread in which the caller will run.</p>
          </div>
        </li>
    </ul>




  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.MAX_BUFFER_SIZE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">MAX_BUFFER_SIZE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.caller.Caller.MAX_BUFFER_SIZE" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MAX_BUFFER_SIZE</span> <span class="o">=</span> <span class="mi">1000</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The default  maximum_buffer_size used in <a class="autorefs autorefs-internal" title="queue_call" href="#async_kernel.caller.Caller.queue_call">queue_call</a>.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">MAX_IDLE_POOL_INSTANCES</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.caller.Caller.MAX_IDLE_POOL_INSTANCES" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">MAX_IDLE_POOL_INSTANCES</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The number of <code>pool</code> instances to leave idle (See also<a class="autorefs autorefs-internal" title="to_thread


  
      classmethod
  " href="#async_kernel.caller.Caller.to_thread">to_thread</a>).</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.backend" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">backend</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.caller.Caller.backend" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">backend</span><span class="p">:</span> <span class="n"><span title="async_kernel.kernelspec.Backend">Backend</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The <code>anyio</code> backend the caller is running in.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.log" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">log</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.caller.Caller.log" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">log</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.protected" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">protected</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.Caller.protected" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">protected</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns <code>True</code> if the caller is protected from stopping.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.running" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">running</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.Caller.running" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">running</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns <code>True</code> when the caller is available to run requests.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.stopped" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">stopped</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.Caller.stopped" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">stopped</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns  <code>True</code> if the caller is stopped.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Caller.thread" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">thread</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#async_kernel.caller.Caller.thread" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The thread in which the caller will run.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.__new__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__new__</span>


<a href="#async_kernel.caller.Caller.__new__" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__new__</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="thread (async_kernel.caller.Caller.__new__(thread))" href="#async_kernel.caller.Caller.__new__(thread)">thread</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="log (async_kernel.caller.Caller.__new__(log))" href="#async_kernel.caller.Caller.__new__(log)">log</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="create (async_kernel.caller.Caller.__new__(create))" href="#async_kernel.caller.Caller.__new__(create)">create</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="protected (async_kernel.caller.Caller.__new__(protected))" href="#async_kernel.caller.Caller.__new__(protected)">protected</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create the <code>Caller</code> instance for the current thread or retrieve an existing instance
by passing the thread.</p>
<p>The caller provides a way to execute synchronous code in a separate
thread, and to call asynchronous code from synchronous code.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.__new__(thread)" class="doc doc-heading doc-heading-parameter">              <b><code>thread</code></b>
<a href="#async_kernel.caller.Caller.__new__(thread)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.__new__(log)" class="doc doc-heading doc-heading-parameter">              <b><code>log</code></b>
<a href="#async_kernel.caller.Caller.__new__(log)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Logger to use for logging messages.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.__new__(create)" class="doc doc-heading doc-heading-parameter">              <b><code>create</code></b>
<a href="#async_kernel.caller.Caller.__new__(create)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to create a new instance if one does not exist for the current thread.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.__new__(protected)" class="doc doc-heading doc-heading-parameter">              <b><code>protected</code></b>
<a href="#async_kernel.caller.Caller.__new__(protected)" class="headerlink" title="Permanent link">&para;</a></h5>          –
          <div class="doc-md-description">
            <p>Whether the caller is protected from having its event loop closed.</p>
          </div>
        </li>
    </ul>
        <h6 id="async_kernel.caller.Caller.__new__--returns">Returns<a class="headerlink" href="#async_kernel.caller.Caller.__new__--returns" title="Permanent link">&para;</a></h6>
<p>Caller
    The <code>Caller</code> instance for the current thread.</p>
<h6 id="async_kernel.caller.Caller.__new__--raises">Raises<a class="headerlink" href="#async_kernel.caller.Caller.__new__--raises" title="Permanent link">&para;</a></h6>
<p>RuntimeError
    If <code>create</code> is False and a <code>Caller</code> instance does not exist.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__new__</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">thread</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">log</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">LoggerAdapter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">protected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create the `Caller` instance for the current thread or retrieve an existing instance</span>
<span class="sd">    by passing the thread.</span>

<span class="sd">    The caller provides a way to execute synchronous code in a separate</span>
<span class="sd">    thread, and to call asynchronous code from synchronous code.</span>

<span class="sd">    Args:</span>
<span class="sd">        thread:</span>
<span class="sd">        log: Logger to use for logging messages.</span>
<span class="sd">        create: Whether to create a new instance if one does not exist for the current thread.</span>
<span class="sd">        protected : Whether the caller is protected from having its event loop closed.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Caller</span>
<span class="sd">        The `Caller` instance for the current thread.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    RuntimeError</span>
<span class="sd">        If `create` is False and a `Caller` instance does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">thread</span> <span class="o">=</span> <span class="n">thread</span> <span class="ow">or</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">inst</span> <span class="o">:=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">thread</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">create</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;A caller is not provided for </span><span class="si">{</span><span class="n">thread</span><span class="si">=}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">sniffio</span><span class="o">.</span><span class="n">current_async_library</span><span class="p">())</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">thread</span> <span class="o">=</span> <span class="n">thread</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">log</span> <span class="ow">or</span> <span class="n">logging</span><span class="o">.</span><span class="n">LoggerAdapter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">())</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">_callers</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">_callers_added</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">_protected</span> <span class="o">=</span> <span class="n">protected</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">_queue_map</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakKeyDictionary</span><span class="p">()</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span> <span class="o">=</span> <span class="n">inst</span>
    <span class="k">return</span> <span class="n">inst</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.all_callers" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">all_callers</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.all_callers" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">all_callers</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="running_only (async_kernel.caller.Caller.all_callers(running_only))" href="#async_kernel.caller.Caller.all_callers(running_only)">running_only</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Caller (async_kernel.caller.Caller)" href="#async_kernel.caller.Caller">Caller</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod to get a list of the callers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.all_callers(running_only)" class="doc doc-heading doc-heading-parameter">              <b><code>running_only</code></b>
<a href="#async_kernel.caller.Caller.all_callers(running_only)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Restrict the list to callers that are active (running in an async context).</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">all_callers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">running_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Caller</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod to get a list of the callers.</span>

<span class="sd">    Args:</span>
<span class="sd">        running_only: Restrict the list to callers that are active (running in an async context).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">caller</span> <span class="k">for</span> <span class="n">caller</span> <span class="ow">in</span> <span class="n">Caller</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">caller</span><span class="o">.</span><span class="n">_running</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">running_only</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.as_completed" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">as_completed</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.as_completed" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">as_completed</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="items (async_kernel.caller.Caller.as_completed(items))" href="#async_kernel.caller.Caller.as_completed(items)">items</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.AsyncGenerator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator">AsyncGenerator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_concurrent (async_kernel.caller.Caller.as_completed(max_concurrent))" href="#async_kernel.caller.Caller.as_completed(max_concurrent)">max_concurrent</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="shield (async_kernel.caller.Caller.as_completed(shield))" href="#async_kernel.caller.Caller.as_completed(shield)">shield</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.AsyncGenerator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator">AsyncGenerator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod iterator to get <a class="autorefs autorefs-internal" title="Future" href="#async_kernel.caller.Future">Futures</a> as they complete.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.as_completed(items)" class="doc doc-heading doc-heading-parameter">              <b><code>items</code></b>
<a href="#async_kernel.caller.Caller.as_completed(items)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a>[<a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a>[<span title="async_kernel.typing.T">T</span>]] | <a class="autorefs autorefs-external" title="collections.abc.AsyncGenerator" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.AsyncGenerator">AsyncGenerator</a>[<a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a>[<span title="async_kernel.typing.T">T</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>Either a container with existing futures or generator of Futures.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.as_completed(max_concurrent)" class="doc doc-heading doc-heading-parameter">              <b><code>max_concurrent</code></b>
<a href="#async_kernel.caller.Caller.as_completed(max_concurrent)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.NoValue">NoValue</span> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><span title="async_kernel.typing.NoValue">NoValue</span></code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of concurrent futures to monitor at a time.
This is useful when <code>items</code> is a generator utilising Caller.to_thread.
By default this will limit to <code>Caller.MAX_IDLE_POOL_INSTANCES</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.as_completed(shield)" class="doc doc-heading doc-heading-parameter">              <b><code>shield</code></b>
<a href="#async_kernel.caller.Caller.as_completed(shield)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Shield existing items from cancellation.</p>
          </div>
        </li>
    </ul>
        <div class="admonition tip">
<p class="admonition-title">Tip</p>
<ol>
<li>Pass a generator should you wish to limit the number future jobs when calling to_thread/to_task etc.</li>
<li>Pass a set/list/tuple to ensure all get monitored at once.</li>
</ol>
</div>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">as_completed</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]]</span> <span class="o">|</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">max_concurrent</span><span class="p">:</span> <span class="n">NoValue</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">shield</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod iterator to get [Futures][async_kernel.caller.Future] as they complete.</span>

<span class="sd">    Args:</span>
<span class="sd">        items: Either a container with existing futures or generator of Futures.</span>
<span class="sd">        max_concurrent: The maximum number of concurrent futures to monitor at a time.</span>
<span class="sd">            This is useful when `items` is a generator utilising Caller.to_thread.</span>
<span class="sd">            By default this will limit to `Caller.MAX_IDLE_POOL_INSTANCES`.</span>
<span class="sd">        shield: Shield existing items from cancellation.</span>

<span class="sd">    !!! tip</span>

<span class="sd">        1. Pass a generator should you wish to limit the number future jobs when calling to_thread/to_task etc.</span>
<span class="sd">        2. Pass a set/list/tuple to ensure all get monitored at once.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_future_ready</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="n">has_result</span><span class="p">:</span> <span class="n">deque</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
    <span class="n">futures</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">resume</span><span class="p">:</span> <span class="n">AsyncEvent</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;AsyncEvent | None&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">current_future</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">current_future</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="nb">set</span> <span class="o">|</span> <span class="nb">list</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">max_concurrent_</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_concurrent_</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">MAX_IDLE_POOL_INSTANCES</span> <span class="k">if</span> <span class="n">max_concurrent</span> <span class="ow">is</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_concurrent</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_on_done</span><span class="p">(</span><span class="n">fut</span><span class="p">:</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">has_result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
        <span class="n">event_future_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">iter_items</span><span class="p">():</span>
        <span class="k">nonlocal</span> <span class="n">done</span><span class="p">,</span> <span class="n">resume</span>
        <span class="n">gen</span> <span class="o">=</span> <span class="n">items</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">AsyncGenerator</span><span class="p">)</span> <span class="k">else</span> <span class="nb">iter</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">fut</span> <span class="o">=</span> <span class="k">await</span> <span class="n">anext</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">gen</span><span class="p">,</span> <span class="n">AsyncGenerator</span><span class="p">)</span> <span class="k">else</span> <span class="nb">next</span><span class="p">(</span><span class="n">gen</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">fut</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">current_future</span><span class="p">:</span>
                    <span class="n">futures</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">fut</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
                        <span class="n">has_result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
                        <span class="n">event_future_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fut</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="n">_on_done</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">max_concurrent_</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">futures</span><span class="p">)</span> <span class="o">==</span> <span class="n">max_concurrent_</span><span class="p">:</span>
                        <span class="n">resume</span> <span class="o">=</span> <span class="n">AsyncEvent</span><span class="p">()</span>
                        <span class="k">await</span> <span class="n">resume</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">StopAsyncIteration</span><span class="p">,</span> <span class="ne">StopIteration</span><span class="p">):</span>
            <span class="k">return</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">event_future_ready</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

    <span class="n">fut</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">iter_items</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">futures</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">has_result</span><span class="p">:</span>
                <span class="n">event_future_ready</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">fut</span> <span class="o">=</span> <span class="n">has_result</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
                <span class="n">futures</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">fut</span>
                <span class="k">if</span> <span class="n">resume</span><span class="p">:</span>
                    <span class="n">resume</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">wait_thread_event</span><span class="p">(</span><span class="n">event_future_ready</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">fut</span> <span class="ow">in</span> <span class="n">futures</span><span class="p">:</span>
            <span class="n">fut</span><span class="o">.</span><span class="n">remove_done_callback</span><span class="p">(</span><span class="n">_on_done</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">shield</span><span class="p">:</span>
                <span class="n">fut</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="s2">&quot;Cancelled by as_completed&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.call_direct" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">call_direct</span>


<a href="#async_kernel.caller.Caller.call_direct" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">call_direct</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.call_direct(func))" href="#async_kernel.caller.Caller.call_direct(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.P">P</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.call_direct(*args))" href="#async_kernel.caller.Caller.call_direct(*args)">args</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.args">args</span></span><span class="p">,</span> <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="**kwargs (async_kernel.caller.Caller.call_direct(**kwargs))" href="#async_kernel.caller.Caller.call_direct(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.kwargs">kwargs</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Schedule func to be called in caller's event loop directly.</p>
<p>The call is made without copying the context and does not use a future.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_direct(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.call_direct(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[<span title="async_kernel.typing.P">P</span>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The function (awaitables permitted, though discouraged).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_direct(*args)" class="doc doc-heading doc-heading-parameter">              <b><code>*args</code></b>
<a href="#async_kernel.caller.Caller.call_direct(*args)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.args">args</span></code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>Arguments to use with func.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_direct(**kwargs)" class="doc doc-heading doc-heading-parameter">              <b><code>**kwargs</code></b>
<a href="#async_kernel.caller.Caller.call_direct(**kwargs)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.kwargs">kwargs</span></code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>Keyword arguments to use with func.</p>
          </div>
        </li>
    </ul>
        <details class="warning">
<summary>Warning</summary>
<p><strong>Use this method for lightweight calls only.</strong></p>
</details>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">call_direct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Schedule func to be called in caller&#39;s event loop directly.</span>

<span class="sd">    The call is made without copying the context and does not use a future.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function (awaitables permitted, though discouraged).</span>
<span class="sd">        *args: Arguments to use with func.</span>
<span class="sd">        **kwargs: Keyword arguments to use with func.</span>

<span class="sd">    ??? warning</span>

<span class="sd">        **Use this method for lightweight calls only.**</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_callers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_callers_added</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.call_later" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">call_later</span>


<a href="#async_kernel.caller.Caller.call_later" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">call_later</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="delay (async_kernel.caller.Caller.call_later(delay))" href="#async_kernel.caller.Caller.call_later(delay)">delay</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.call_later(func))" href="#async_kernel.caller.Caller.call_later(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.P">P</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.typing.T">T</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.call_later(*args))" href="#async_kernel.caller.Caller.call_later(*args)">args</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.args">args</span></span><span class="p">,</span> <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="**kwargs (async_kernel.caller.Caller.call_later(**kwargs))" href="#async_kernel.caller.Caller.call_later(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.kwargs">kwargs</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Schedule func to be called in caller's event loop copying the current context.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_later(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.call_later(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[<span title="async_kernel.typing.P">P</span>, <span title="async_kernel.typing.T">T</span> | <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>[<span title="async_kernel.typing.T">T</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>The function (awaitables permitted, though discouraged).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_later(delay)" class="doc doc-heading doc-heading-parameter">              <b><code>delay</code></b>
<a href="#async_kernel.caller.Caller.call_later(delay)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The minimum delay to add between submission and execution.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_later(*args)" class="doc doc-heading doc-heading-parameter">              <b><code>*args</code></b>
<a href="#async_kernel.caller.Caller.call_later(*args)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.args">args</span></code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>Arguments to use with func.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_later(**kwargs)" class="doc doc-heading doc-heading-parameter">              <b><code>**kwargs</code></b>
<a href="#async_kernel.caller.Caller.call_later(**kwargs)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.kwargs">kwargs</span></code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>Keyword arguments to use with func.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">call_later</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">T</span> <span class="o">|</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Schedule func to be called in caller&#39;s event loop copying the current context.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function (awaitables permitted, though discouraged).</span>
<span class="sd">        delay: The minimum delay to add between submission and execution.</span>
<span class="sd">        *args: Arguments to use with func.</span>
<span class="sd">        **kwargs: Keyword arguments to use with func.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">anyio</span><span class="o">.</span><span class="n">ClosedResourceError</span>
    <span class="n">fut</span><span class="p">:</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread</span> <span class="ow">and</span> <span class="p">(</span><span class="n">tg</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_taskgroup</span><span class="p">):</span>
        <span class="n">tg</span><span class="o">.</span><span class="n">start_soon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wrap_call</span><span class="p">,</span> <span class="n">fut</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">(),</span> <span class="n">delay</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">contextvars</span><span class="o">.</span><span class="n">copy_context</span><span class="p">(),</span> <span class="p">(</span><span class="n">fut</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">monotonic</span><span class="p">(),</span> <span class="n">delay</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callers_added</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_outstanding</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">fut</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.call_soon" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">call_soon</span>


<a href="#async_kernel.caller.Caller.call_soon" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">call_soon</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.call_soon(func))" href="#async_kernel.caller.Caller.call_soon(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.P">P</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.typing.T">T</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.call_soon(*args))" href="#async_kernel.caller.Caller.call_soon(*args)">args</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.args">args</span></span><span class="p">,</span> <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="**kwargs (async_kernel.caller.Caller.call_soon(**kwargs))" href="#async_kernel.caller.Caller.call_soon(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.kwargs">kwargs</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Schedule func to be called in caller's event loop copying the current context.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_soon(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.call_soon(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[<span title="async_kernel.typing.P">P</span>, <span title="async_kernel.typing.T">T</span> | <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>[<span title="async_kernel.typing.T">T</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>The function (awaitables permitted, though discouraged).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_soon(*args)" class="doc doc-heading doc-heading-parameter">              <b><code>*args</code></b>
<a href="#async_kernel.caller.Caller.call_soon(*args)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.args">args</span></code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>Arguments to use with func.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.call_soon(**kwargs)" class="doc doc-heading doc-heading-parameter">              <b><code>**kwargs</code></b>
<a href="#async_kernel.caller.Caller.call_soon(**kwargs)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.kwargs">kwargs</span></code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>Keyword arguments to use with func.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">call_soon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">T</span> <span class="o">|</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Schedule func to be called in caller&#39;s event loop copying the current context.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The function (awaitables permitted, though discouraged).</span>
<span class="sd">        *args: Arguments to use with func.</span>
<span class="sd">        **kwargs: Keyword arguments to use with func.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_later</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.current_future" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">current_future</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.current_future" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">current_future</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod that returns the current future when called from inside a function scheduled by Caller.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">current_future</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A classmethod that returns the current future when called from inside a function scheduled by Caller.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_future_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.get_instance" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_instance</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.get_instance" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_instance</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="name (async_kernel.caller.Caller.get_instance(name))" href="#async_kernel.caller.Caller.get_instance(name)">name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s1">&#39;MainThread&#39;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="create (async_kernel.caller.Caller.get_instance(create))" href="#async_kernel.caller.Caller.get_instance(create)">create</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod that gets an instance by name, possibly starting a new instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.get_instance(name)" class="doc doc-heading doc-heading-parameter">              <b><code>name</code></b>
<a href="#async_kernel.caller.Caller.get_instance(name)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>&#39;MainThread&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The name to identify the caller.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.get_instance(create)" class="doc doc-heading doc-heading-parameter">              <b><code>create</code></b>
<a href="#async_kernel.caller.Caller.get_instance(create)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Create a new instance if one with the corresponding name does not already exist.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;MainThread&quot;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">create</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod that gets an instance by name, possibly starting a new instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name to identify the caller.</span>
<span class="sd">        create: Create a new instance if one with the corresponding name does not already exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">thread</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">create</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">start_new</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;A Caller was not found for </span><span class="si">{</span><span class="n">name</span><span class="si">=}</span><span class="s2">.&quot;</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.queue_call" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">queue_call</span>


<a href="#async_kernel.caller.Caller.queue_call" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">queue_call</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.queue_call(func))" href="#async_kernel.caller.Caller.queue_call(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.queue_call(*args))" href="#async_kernel.caller.Caller.queue_call(*args)">args</a></span><span class="p">:</span> <span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_buffer_size (async_kernel.caller.Caller.queue_call(max_buffer_size))" href="#async_kernel.caller.Caller.queue_call(max_buffer_size)">max_buffer_size</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="wait (async_kernel.caller.Caller.queue_call(wait))" href="#async_kernel.caller.Caller.queue_call(wait)">wait</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="types.CoroutineType" href="https://docs.python.org/3/library/types.html#types.CoroutineType">CoroutineType</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">queue_call</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.queue_call(func))" href="#async_kernel.caller.Caller.queue_call(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.queue_call(*args))" href="#async_kernel.caller.Caller.queue_call(*args)">args</a></span><span class="p">:</span> <span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_buffer_size (async_kernel.caller.Caller.queue_call(max_buffer_size))" href="#async_kernel.caller.Caller.queue_call(max_buffer_size)">max_buffer_size</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="wait (async_kernel.caller.Caller.queue_call(wait))" href="#async_kernel.caller.Caller.queue_call(wait)">wait</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>          </div>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">queue_call</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.queue_call(func))" href="#async_kernel.caller.Caller.queue_call(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.queue_call(*args))" href="#async_kernel.caller.Caller.queue_call(*args)">args</a></span><span class="p">:</span> <span class="o">*</span><span class="n"><span title="async_kernel.typing.PosArgsT">PosArgsT</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_buffer_size (async_kernel.caller.Caller.queue_call(max_buffer_size))" href="#async_kernel.caller.Caller.queue_call(max_buffer_size)">max_buffer_size</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="wait (async_kernel.caller.Caller.queue_call(wait))" href="#async_kernel.caller.Caller.queue_call(wait)">wait</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="types.CoroutineType" href="https://docs.python.org/3/library/types.html#types.CoroutineType">CoroutineType</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Queue the execution of <code>func</code> with the arguments <code>*args</code> in a queue unique to it (not thread-safe).</p>
<p>The args are added to a queue associated with the provided <code>func</code>. If queue does not already exist for
func, a new queue is created with a specified maximum buffer size. The arguments are then sent to the queue,
and an <code>execute_loop</code> coroutine is started to consume the queue and execute the function with the received
arguments.  Exceptions during execution are caught and logged.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.queue_call(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.queue_call(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[*<span title="async_kernel.typing.PosArgsT">PosArgsT</span>], <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>[<a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</code>)
          –
          <div class="doc-md-description">
            <p>The asynchronous function to execute.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.queue_call(*args)" class="doc doc-heading doc-heading-parameter">              <b><code>*args</code></b>
<a href="#async_kernel.caller.Caller.queue_call(*args)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code>*<span title="async_kernel.typing.PosArgsT">PosArgsT</span></code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>The arguments to pass to the function.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.queue_call(max_buffer_size)" class="doc doc-heading doc-heading-parameter">              <b><code>max_buffer_size</code></b>
<a href="#async_kernel.caller.Caller.queue_call(max_buffer_size)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.NoValue">NoValue</span> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code><span title="async_kernel.typing.NoValue">NoValue</span></code>
)
          –
          <div class="doc-md-description">
            <p>The maximum buffer size for the queue. If NoValue, defaults to [async_kernel.Caller.MAX_BUFFER_SIZE].</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.queue_call(wait)" class="doc doc-heading doc-heading-parameter">              <b><code>wait</code></b>
<a href="#async_kernel.caller.Caller.queue_call(wait)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Set as True to return a coroutine that will return once the request is sent.
Use this to prevent experiencing exceptions if the buffer is full.</p>
          </div>
        </li>
    </ul>
        <div class="admonition info">
<p class="admonition-title">Info</p>
<p>The queue will stay open until one of the following occurs.</p>
<ol>
<li>It explicitly closed with the method <code>queue_close</code>.</li>
<li>All strong references are lost the function/method.</li>
</ol>
</div>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">queue_call</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="o">*</span><span class="n">PosArgsT</span><span class="p">],</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="o">*</span><span class="n">PosArgsT</span><span class="p">,</span>
    <span class="n">max_buffer_size</span><span class="p">:</span> <span class="n">NoValue</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">wait</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CoroutineType</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Queue the execution of `func` with the arguments `*args` in a queue unique to it (not thread-safe).</span>

<span class="sd">    The args are added to a queue associated with the provided `func`. If queue does not already exist for</span>
<span class="sd">    func, a new queue is created with a specified maximum buffer size. The arguments are then sent to the queue,</span>
<span class="sd">    and an `execute_loop` coroutine is started to consume the queue and execute the function with the received</span>
<span class="sd">    arguments.  Exceptions during execution are caught and logged.</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The asynchronous function to execute.</span>
<span class="sd">        *args: The arguments to pass to the function.</span>
<span class="sd">        max_buffer_size: The maximum buffer size for the queue. If NoValue, defaults to [async_kernel.Caller.MAX_BUFFER_SIZE].</span>
<span class="sd">        wait: Set as True to return a coroutine that will return once the request is sent.</span>
<span class="sd">            Use this to prevent experiencing exceptions if the buffer is full.</span>

<span class="sd">    !!! info</span>

<span class="sd">        The queue will stay open until one of the following occurs.</span>

<span class="sd">        1. It explicitly closed with the method `queue_close`.</span>
<span class="sd">        1. All strong references are lost the function/method.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_in_thread</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sender</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">func</span><span class="p">)):</span>
        <span class="n">max_buffer_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_BUFFER_SIZE</span> <span class="k">if</span> <span class="n">max_buffer_size</span> <span class="ow">is</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="n">max_buffer_size</span>
        <span class="n">sender</span><span class="p">,</span> <span class="n">queue</span> <span class="o">=</span> <span class="n">anyio</span><span class="o">.</span><span class="n">create_memory_object_stream</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="o">*</span><span class="n">PosArgsT</span><span class="p">]](</span><span class="n">max_buffer_size</span><span class="o">=</span><span class="n">max_buffer_size</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">execute_loop</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">anyio</span><span class="o">.</span><span class="n">get_cancelled_exc_class</span><span class="p">()):</span>
                    <span class="k">async</span> <span class="k">with</span> <span class="n">queue</span> <span class="k">as</span> <span class="n">receive_stream</span><span class="p">:</span>
                        <span class="k">async</span> <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">receive_stream</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">func</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="p">:</span>
                                <span class="k">break</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="k">await</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s2">&quot;Execution </span><span class="si">%f</span><span class="s2"> failed&quot;</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="n">e</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="p">[</span><span class="n">func</span><span class="p">]</span> <span class="o">=</span> <span class="n">sender</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">execute_loop</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="k">if</span> <span class="n">wait</span> <span class="k">else</span> <span class="n">sender</span><span class="o">.</span><span class="n">send_nowait</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.queue_close" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">queue_close</span>


<a href="#async_kernel.caller.Caller.queue_close" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">queue_close</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.queue_close(func))" href="#async_kernel.caller.Caller.queue_close(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Close the execution queue associated with func (thread-safe).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.queue_close(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.queue_close(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></code>)
          –
          <div class="doc-md-description">
            <p>The queue of the function to close.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">queue_close</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Close the execution queue associated with func (thread-safe).</span>

<span class="sd">    Args:</span>
<span class="sd">        func: The queue of the function to close.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sender</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.queue_exists" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">queue_exists</span>


<a href="#async_kernel.caller.Caller.queue_exists" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">queue_exists</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Caller.queue_exists(func)">func</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns True if an execution queue exists for <code>func</code>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">queue_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;Returns True if an execution queue exists for `func`.&quot;</span>
    <span class="k">return</span> <span class="n">func</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.start_new" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">start_new</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.start_new" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">start_new</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="backend (async_kernel.caller.Caller.start_new(backend))" href="#async_kernel.caller.Caller.start_new(backend)">backend</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.kernelspec.Backend">Backend</span></span> <span class="o">|</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="log (async_kernel.caller.Caller.start_new(log))" href="#async_kernel.caller.Caller.start_new(log)">log</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.caller.Caller.start_new(name)">name</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="protected (async_kernel.caller.Caller.start_new(protected))" href="#async_kernel.caller.Caller.start_new(protected)">protected</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="backend_options (async_kernel.caller.Caller.start_new(backend_options))" href="#async_kernel.caller.Caller.start_new(backend_options)">backend_options</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span> <span class="o">=</span> <span class="n"><span title="async_kernel.typing.NoValue">NoValue</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Start a new thread with a new Caller open in the context of anyio event loop.</p>
<p>A new thread and caller is always started and ready to start new jobs as soon as it is returned.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.start_new(backend)" class="doc doc-heading doc-heading-parameter">              <b><code>backend</code></b>
<a href="#async_kernel.caller.Caller.start_new(backend)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.kernelspec.Backend">Backend</span> | <span title="async_kernel.typing.NoValue">NoValue</span></code>, default:
                  <code><span title="async_kernel.typing.NoValue">NoValue</span></code>
)
          –
          <div class="doc-md-description">
            <p>The backend to use for the anyio event loop (anyio.run). Defaults to the backend from where it is called.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.start_new(log)" class="doc doc-heading doc-heading-parameter">              <b><code>log</code></b>
<a href="#async_kernel.caller.Caller.start_new(log)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="logging.LoggerAdapter" href="https://docs.python.org/3/library/logging.html#logging.LoggerAdapter">LoggerAdapter</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A logging adapter to use for debug messages.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.start_new(protected)" class="doc doc-heading doc-heading-parameter">              <b><code>protected</code></b>
<a href="#async_kernel.caller.Caller.start_new(protected)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>When True, the caller will not shutdown unless shutdown is called with <code>force=True</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.start_new(backend_options)" class="doc doc-heading doc-heading-parameter">              <b><code>backend_options</code></b>
<a href="#async_kernel.caller.Caller.start_new(backend_options)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a> | None | <span title="async_kernel.typing.NoValue">NoValue</span></code>, default:
                  <code><span title="async_kernel.typing.NoValue">NoValue</span></code>
)
          –
          <div class="doc-md-description">
            <p>Backend options for <a class="autorefs autorefs-external" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.run">anyio.run</a>. Defaults to <code>Kernel.backend_options</code>.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">start_new</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">backend</span><span class="p">:</span> <span class="n">Backend</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
    <span class="n">log</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">LoggerAdapter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">protected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">backend_options</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">|</span> <span class="n">NoValue</span> <span class="o">=</span> <span class="n">NoValue</span><span class="p">,</span>  <span class="c1"># pyright: ignore[reportInvalidTypeForm]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Start a new thread with a new Caller open in the context of anyio event loop.</span>

<span class="sd">    A new thread and caller is always started and ready to start new jobs as soon as it is returned.</span>

<span class="sd">    Args:</span>
<span class="sd">        backend: The backend to use for the anyio event loop (anyio.run). Defaults to the backend from where it is called.</span>
<span class="sd">        log: A logging adapter to use for debug messages.</span>
<span class="sd">        protected: When True, the caller will not shutdown unless shutdown is called with `force=True`.</span>
<span class="sd">        backend_options: Backend options for [anyio.run][]. Defaults to `Kernel.backend_options`.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">anyio_run_caller</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">caller_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">nonlocal</span> <span class="n">caller</span>
            <span class="k">async</span> <span class="k">with</span> <span class="bp">cls</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="n">log</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">protected</span><span class="o">=</span><span class="n">protected</span><span class="p">)</span> <span class="k">as</span> <span class="n">caller</span><span class="p">:</span>
                <span class="n">ready_event</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
                <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">anyio</span><span class="o">.</span><span class="n">get_cancelled_exc_class</span><span class="p">()):</span>
                    <span class="k">await</span> <span class="n">anyio</span><span class="o">.</span><span class="n">sleep_forever</span><span class="p">()</span>

        <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">caller_context</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend_</span><span class="p">,</span> <span class="n">backend_options</span><span class="o">=</span><span class="n">backend_options</span><span class="p">)</span>

    <span class="k">assert</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">=}</span><span class="s2"> already exists!&quot;</span>
    <span class="n">backend_</span> <span class="o">=</span> <span class="n">Backend</span><span class="p">(</span><span class="n">backend</span> <span class="k">if</span> <span class="n">backend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NoValue</span> <span class="k">else</span> <span class="n">sniffio</span><span class="o">.</span><span class="n">current_async_library</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">backend_options</span> <span class="ow">is</span> <span class="n">NoValue</span><span class="p">:</span>
        <span class="n">backend_options</span> <span class="o">=</span> <span class="n">async_kernel</span><span class="o">.</span><span class="n">Kernel</span><span class="p">()</span><span class="o">.</span><span class="n">anyio_backend_options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">backend_</span><span class="p">)</span>
    <span class="n">caller</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="s2">&quot;Self&quot;</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
    <span class="n">ready_event</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
    <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">anyio_run_caller</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">ready_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">caller</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">caller</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.stop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop</span>


<a href="#async_kernel.caller.Caller.stop" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n"><span title="async_kernel.caller.Caller.stop(force)">force</span></span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Stop the caller, cancelling all pending tasks and close the thread.</p>
<p>If the instance is protected, this is no-op unless force is used.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Stop the caller, cancelling all pending tasks and close the thread.</span>

<span class="sd">    If the instance is protected, this is no-op unless force is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_protected</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">sender</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">sender</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_queue_map</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_callers_added</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">thread</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_thread_pool</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_thread_pool</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">thread</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stopped_event</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.stop_all" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">stop_all</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.stop_all" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">stop_all</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="_stop_protected (async_kernel.caller.Caller.stop_all(_stop_protected))" href="#async_kernel.caller.Caller.stop_all(_stop_protected)">_stop_protected</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod to stop all un-protected callers.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.stop_all(_stop_protected)" class="doc doc-heading doc-heading-parameter">              <b><code>_stop_protected</code></b>
<a href="#async_kernel.caller.Caller.stop_all(_stop_protected)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>A private argument to shutdown protected instances.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">stop_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">_stop_protected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod to stop all un-protected callers.</span>

<span class="sd">    Args:</span>
<span class="sd">        _stop_protected: A private argument to shutdown protected instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">caller</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
        <span class="n">caller</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="n">_stop_protected</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.to_thread" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">to_thread</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.to_thread" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_thread</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.caller.Caller.to_thread(func)">func</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.P">P</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.typing.T">T</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n"><span title="async_kernel.caller.Caller.to_thread(*args)">args</span></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.args">args</span></span><span class="p">,</span> <span class="o">**</span><span class="n"><span title="async_kernel.caller.Caller.to_thread(**kwargs)">kwargs</span></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.kwargs">kwargs</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod to call func in a separate thread see also <a class="autorefs autorefs-internal" title="to_thread_by_name


  
      classmethod
  " href="#async_kernel.caller.Caller.to_thread_by_name">to_thread_by_name</a>.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">to_thread</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">T</span> <span class="o">|</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A classmethod to call func in a separate thread see also [to_thread_by_name][async_kernel.Caller.to_thread_by_name].&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_thread_by_name</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.to_thread_by_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">to_thread_by_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.to_thread_by_name" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_thread_by_name</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="name (async_kernel.caller.Caller.to_thread_by_name(name))" href="#async_kernel.caller.Caller.to_thread_by_name(name)">name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="func (async_kernel.caller.Caller.to_thread_by_name(func))" href="#async_kernel.caller.Caller.to_thread_by_name(func)">func</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.P">P</span></span><span class="p">,</span> <span class="n"><span title="async_kernel.typing.T">T</span></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="o">*</span><span class="n"><a class="autorefs autorefs-internal" title="*args (async_kernel.caller.Caller.to_thread_by_name(*args))" href="#async_kernel.caller.Caller.to_thread_by_name(*args)">args</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.args">args</span></span><span class="p">,</span>
    <span class="o">**</span><span class="n"><a class="autorefs autorefs-internal" title="**kwargs (async_kernel.caller.Caller.to_thread_by_name(**kwargs))" href="#async_kernel.caller.Caller.to_thread_by_name(**kwargs)">kwargs</a></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.P.kwargs">kwargs</span></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod to call func in the thread specified by name.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.to_thread_by_name(name)" class="doc doc-heading doc-heading-parameter">              <b><code>name</code></b>
<a href="#async_kernel.caller.Caller.to_thread_by_name(name)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>)
          –
          <div class="doc-md-description">
            <p>The name of the <code>Caller</code>. A new <code>Caller</code> is created if an instance corresponding to name  <sup id="async_kernel.caller.Caller.to_thread_by_name--fnref:notes"><a class="footnote-ref" href="#async_kernel.caller.Caller.to_thread_by_name--fn:notes">1</a></sup>.</p>
<div class="footnote">
<hr />
<ol>
<li id="async_kernel.caller.Caller.to_thread_by_name--fn:notes">
<p>'MainThread' is special name corresponding to the main thread.
A <code>RuntimeError</code> will be raised if a Caller does not exist for the main thread.&#160;<a class="footnote-backref" href="#async_kernel.caller.Caller.to_thread_by_name--fnref:notes" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.to_thread_by_name(func)" class="doc doc-heading doc-heading-parameter">              <b><code>func</code></b>
<a href="#async_kernel.caller.Caller.to_thread_by_name(func)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[<span title="async_kernel.typing.P">P</span>, <span title="async_kernel.typing.T">T</span> | <a class="autorefs autorefs-external" title="collections.abc.Awaitable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Awaitable">Awaitable</a>[<span title="async_kernel.typing.T">T</span>]]</code>)
          –
          <div class="doc-md-description">
            <p>The function to call. If it returns an awaitable, the awaitable will be awaited.
Passing a coroutine as <code>func</code> discourage, but will be awaited.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.to_thread_by_name(*args)" class="doc doc-heading doc-heading-parameter">              <b><code>*args</code></b>
<a href="#async_kernel.caller.Caller.to_thread_by_name(*args)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.args">args</span></code>, default:
                  <code>()</code>
)
          –
          <div class="doc-md-description">
            <p>Arguments to use with func.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Caller.to_thread_by_name(**kwargs)" class="doc doc-heading doc-heading-parameter">              <b><code>**kwargs</code></b>
<a href="#async_kernel.caller.Caller.to_thread_by_name(**kwargs)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="async_kernel.typing.P.kwargs">kwargs</span></code>, default:
                  <code>{}</code>
)
          –
          <div class="doc-md-description">
            <p>Keyword arguments to use with func.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a>[<span title="async_kernel.typing.T">T</span>]</code>
          –
          <div class="doc-md-description">
            <p>A future that can be awaited for the  result of func.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">to_thread_by_name</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="n">P</span><span class="p">,</span> <span class="n">T</span> <span class="o">|</span> <span class="n">Awaitable</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">P</span><span class="o">.</span><span class="n">kwargs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod to call func in the thread specified by name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name: The name of the `Caller`. A new `Caller` is created if an instance corresponding to name  [^notes].</span>

<span class="sd">            [^notes]:  &#39;MainThread&#39; is special name corresponding to the main thread.</span>
<span class="sd">                A `RuntimeError` will be raised if a Caller does not exist for the main thread.</span>

<span class="sd">        func: The function to call. If it returns an awaitable, the awaitable will be awaited.</span>
<span class="sd">            Passing a coroutine as `func` discourage, but will be awaited.</span>

<span class="sd">        *args: Arguments to use with func.</span>
<span class="sd">        **kwargs: Keyword arguments to use with func.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A future that can be awaited for the  result of func.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">caller</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_to_thread_pool</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_to_thread_pool</span>
        <span class="k">else</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_instance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">create</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fut</span> <span class="o">=</span> <span class="n">caller</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_pool_instances</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">caller</span><span class="p">)</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="n">caller</span><span class="o">.</span><span class="n">_to_thread_on_done</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fut</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Caller.wait" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">wait</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#async_kernel.caller.Caller.wait" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">wait</span><span class="p">(</span>
    <span class="n"><span title="async_kernel.caller.Caller.wait(items)">items</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Iterable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.caller.Caller.wait(timeout)">timeout</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><span title="async_kernel.caller.Caller.wait(return_when)">return_when</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span>
        <span class="s2">&quot;FIRST_COMPLETED&quot;</span><span class="p">,</span> <span class="s2">&quot;FIRST_EXCEPTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ALL_COMPLETED&quot;</span>
    <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ALL_COMPLETED&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="Future (async_kernel.caller.Future)" href="#async_kernel.caller.Future">Future</a></span><span class="p">[</span><span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A classmethod to wait for the futures given by items to complete.</p>
<p>Returns two sets of the futures: (done, pending).</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="n">done</span><span class="p">,</span> <span class="n">pending</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<ul>
<li>This does not raise a TimeoutError!</li>
<li>Futures that aren't done when the timeout occurs are returned in the second set.</li>
</ul>
</div>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">items</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]],</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">return_when</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;FIRST_COMPLETED&quot;</span><span class="p">,</span> <span class="s2">&quot;FIRST_EXCEPTION&quot;</span><span class="p">,</span> <span class="s2">&quot;ALL_COMPLETED&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ALL_COMPLETED&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">set</span><span class="p">[</span><span class="n">T</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="n">T</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A classmethod to wait for the futures given by items to complete.</span>

<span class="sd">    Returns two sets of the futures: (done, pending).</span>

<span class="sd">    !!! example</span>

<span class="sd">        ```python</span>
<span class="sd">        done, pending = await asyncio.wait(items)</span>
<span class="sd">        ```</span>

<span class="sd">    !!! info</span>

<span class="sd">        - This does not raise a TimeoutError!</span>
<span class="sd">        - Futures that aren&#39;t done when the timeout occurs are returned in the second set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">done</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">pending</span> <span class="o">:=</span> <span class="nb">set</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">move_on_after</span><span class="p">(</span><span class="n">timeout</span><span class="p">):</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">fut</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="n">shield</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">pending</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
                <span class="n">done</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">return_when</span> <span class="o">==</span> <span class="s2">&quot;FIRST_COMPLETED&quot;</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">return_when</span> <span class="o">==</span> <span class="s2">&quot;FIRST_EXCEPTION&quot;</span> <span class="ow">and</span> <span class="p">(</span><span class="n">fut</span><span class="o">.</span><span class="n">cancelled</span><span class="p">()</span> <span class="ow">or</span> <span class="n">fut</span><span class="o">.</span><span class="n">exception</span><span class="p">()):</span>
                    <span class="k">break</span>
    <span class="k">return</span> <span class="n">done</span><span class="p">,</span> <span class="n">pending</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.Future" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Future</span>


<a href="#async_kernel.caller.Future" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Future</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future(thread)">thread</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">**</span><span class="n"><span title="async_kernel.caller.Future(**metadata)">metadata</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>A class representing a future result modelled on <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/asyncio-future.html#asyncio.Future">asyncio.Future</a>.</p>
<p>This class provides an anyio compatible Future primitive. It is designed
to work with <code>Caller</code> to enable thread-safe calling, setting and awaiting
execution results.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="add_done_callback (async_kernel.caller.Future.add_done_callback)" href="#async_kernel.caller.Future.add_done_callback">add_done_callback</a></code></b>
            –
            <div class="doc-md-description">
              <p>Add a callback for when the callback is done (not thread-safe).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="cancel (async_kernel.caller.Future.cancel)" href="#async_kernel.caller.Future.cancel">cancel</a></code></b>
            –
            <div class="doc-md-description">
              <p>Cancel the Future and schedule callbacks (thread-safe using Caller).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="cancelled (async_kernel.caller.Future.cancelled)" href="#async_kernel.caller.Future.cancelled">cancelled</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return True if the Future is cancelled.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="done (async_kernel.caller.Future.done)" href="#async_kernel.caller.Future.done">done</a></code></b>
            –
            <div class="doc-md-description">
              <p>Returns True if the Future is done.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="exception (async_kernel.caller.Future.exception)" href="#async_kernel.caller.Future.exception">exception</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return the exception that was set on the Future.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="get_caller (async_kernel.caller.Future.get_caller)" href="#async_kernel.caller.Future.get_caller">get_caller</a></code></b>
            –
            <div class="doc-md-description">
              <p>The <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a> that is running for this <em>futures</em> thread.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="remove_done_callback (async_kernel.caller.Future.remove_done_callback)" href="#async_kernel.caller.Future.remove_done_callback">remove_done_callback</a></code></b>
            –
            <div class="doc-md-description">
              <p>Remove all instances of a callback from the callbacks list.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="result (async_kernel.caller.Future.result)" href="#async_kernel.caller.Future.result">result</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return the result of the Future.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="set_cancel_scope (async_kernel.caller.Future.set_cancel_scope)" href="#async_kernel.caller.Future.set_cancel_scope">set_cancel_scope</a></code></b>
            –
            <div class="doc-md-description">
              <p>Provide a cancel scope for cancellation.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="set_exception (async_kernel.caller.Future.set_exception)" href="#async_kernel.caller.Future.set_exception">set_exception</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set the exception (thread-safe using Caller).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="set_result (async_kernel.caller.Future.set_result)" href="#async_kernel.caller.Future.set_result">set_result</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set the result (thread-safe using Caller).</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="wait


  
      async
   (async_kernel.caller.Future.wait)" href="#async_kernel.caller.Future.wait">wait</a></code></b>
            –
            <div class="doc-md-description">
              <p>Wait for future to be done (thread-safe) returning the result if specified.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="metadata


  
      property
   (async_kernel.caller.Future.metadata)" href="#async_kernel.caller.Future.metadata">metadata</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</code>)
          –
          <div class="doc-md-description">
            <p>A dict provided to store metadata with the future.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="thread


  
      property
   (async_kernel.caller.Future.thread)" href="#async_kernel.caller.Future.thread">thread</a></code></b>
              (<code><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></code>)
          –
          <div class="doc-md-description">
            <p>The thread to which the future is associated.</p>
          </div>
        </li>
    </ul>

                  <details class="quote">
                    <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">**</span><span class="n">metadata</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cancel_scope</span><span class="p">:</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_done</span> <span class="o">=</span> <span class="n">AsyncEvent</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_done_callbacks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span> <span class="o">=</span> <span class="n">metadata</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_setting_value</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span> <span class="o">=</span> <span class="n">thread</span> <span class="ow">or</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Future.metadata" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">metadata</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.Future.metadata" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">metadata</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A dict provided to store metadata with the future.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The metadata is used when forming the representation of the future.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="async_kernel.caller.Future.metadata--at-init" name="async_kernel.caller.Future.metadata--__tabbed_1" type="radio" /><input id="async_kernel.caller.Future.metadata--on-the-instance" name="async_kernel.caller.Future.metadata--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="async_kernel.caller.Future.metadata--at-init">At init</label><label for="async_kernel.caller.Future.metadata--on-the-instance">On the instance</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">fut</span> <span class="o">=</span> <span class="n">Future</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;My future&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">fut</span> <span class="o">=</span> <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_soon</span><span class="p">(</span><span class="n">anyio</span><span class="o">.</span><span class="n">sleep</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">fut</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;My future&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
</div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.Future.thread" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">thread</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.Future.thread" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">thread</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="threading.Thread" href="https://docs.python.org/3/library/threading.html#threading.Thread">Thread</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The thread to which the future is associated.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.add_done_callback" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_done_callback</span>


<a href="#async_kernel.caller.Future.add_done_callback" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_done_callback</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future.add_done_callback(fn)">fn</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Add a callback for when the callback is done (not thread-safe).</p>
<p>If the Future is already done it will be scheduled for calling.</p>
<p>The result of the future and done callbacks are always called for the futures thread.
Callbacks are called in the reverse order in which they were added in the owning thread.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Self</span><span class="p">],</span> <span class="nb">object</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a callback for when the callback is done (not thread-safe).</span>

<span class="sd">    If the Future is already done it will be scheduled for calling.</span>

<span class="sd">    The result of the future and done callbacks are always called for the futures thread.</span>
<span class="sd">    Callbacks are called in the reverse order in which they were added in the owning thread.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_done_callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_caller</span><span class="p">()</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.cancel" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">cancel</span>


<a href="#async_kernel.caller.Future.cancel" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">cancel</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="msg (async_kernel.caller.Future.cancel(msg))" href="#async_kernel.caller.Future.cancel(msg)">msg</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Cancel the Future and schedule callbacks (thread-safe using Caller).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Future.cancel(msg)" class="doc doc-heading doc-heading-parameter">              <b><code>msg</code></b>
<a href="#async_kernel.caller.Future.cancel(msg)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The message to use when raising a FutureCancelledError.</p>
          </div>
        </li>
    </ul>
        <p>Returns if it has been cancelled.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cancel the Future and schedule callbacks (thread-safe using Caller).</span>

<span class="sd">    Args:</span>
<span class="sd">        msg: The message to use when raising a FutureCancelledError.</span>

<span class="sd">    Returns if it has been cancelled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">msg</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span> <span class="o">=</span> <span class="n">msg</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span> <span class="ow">or</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">scope</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cancel_scope</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">threading</span><span class="o">.</span><span class="n">current_thread</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="p">:</span>
                <span class="n">scope</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Caller</span><span class="p">(</span><span class="n">thread</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="p">)</span><span class="o">.</span><span class="n">call_direct</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancelled</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.cancelled" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">cancelled</span>


<a href="#async_kernel.caller.Future.cancelled" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">cancelled</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return True if the Future is cancelled.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cancelled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if the Future is cancelled.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.done" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">done</span>


<a href="#async_kernel.caller.Future.done" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">done</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns True if the Future is done.</p>
<p>Done means either that a result / exception is available.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">done</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if the Future is done.</span>

<span class="sd">    Done means either that a result / exception is available.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.exception" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">exception</span>


<a href="#async_kernel.caller.Future.exception" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">exception</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#BaseException">BaseException</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the exception that was set on the Future.</p>
<p>If the Future has been cancelled, this method raises a <a class="autorefs autorefs-internal" title="FutureCancelledError" href="#async_kernel.caller.FutureCancelledError">FutureCancelledError</a> exception.</p>
<p>If the Future isn't done yet, this method raises an <a class="autorefs autorefs-internal" title="InvalidStateError" href="#async_kernel.caller.InvalidStateError">InvalidStateError</a> exception.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exception</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the exception that was set on the Future.</span>

<span class="sd">    If the Future has been cancelled, this method raises a [FutureCancelledError][async_kernel.caller.FutureCancelledError] exception.</span>

<span class="sd">    If the Future isn&#39;t done yet, this method raises an [InvalidStateError][async_kernel.caller.InvalidStateError] exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span><span class="p">:</span>
        <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_cancelled_error</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">InvalidStateError</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exception</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.get_caller" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_caller</span>


<a href="#async_kernel.caller.Future.get_caller" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_caller</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="Caller (async_kernel.caller.Caller)" href="#async_kernel.caller.Caller">Caller</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a> that is running for this <em>futures</em> thread.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_caller</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Caller</span><span class="p">:</span>
    <span class="s2">&quot;The [async_kernel.caller.Caller][] that is running for this *futures* thread.&quot;</span>
    <span class="k">return</span> <span class="n">Caller</span><span class="p">(</span><span class="n">thread</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_thread</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.remove_done_callback" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remove_done_callback</span>


<a href="#async_kernel.caller.Future.remove_done_callback" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remove_done_callback</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future.remove_done_callback(fn)">fn</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Remove all instances of a callback from the callbacks list.</p>
<p>Returns the number of callbacks removed.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remove_done_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Self</span><span class="p">],</span> <span class="nb">object</span><span class="p">],</span> <span class="o">/</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove all instances of a callback from the callbacks list.</span>

<span class="sd">    Returns the number of callbacks removed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">fn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done_callbacks</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_done_callbacks</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">n</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.result" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">result</span>


<a href="#async_kernel.caller.Future.result" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">result</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.T">T</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the result of the Future.</p>
<p>If the Future has been cancelled, this method raises a <a class="autorefs autorefs-internal" title="FutureCancelledError" href="#async_kernel.caller.FutureCancelledError">FutureCancelledError</a> exception.</p>
<p>If the Future isn't done yet, this method raises an <a class="autorefs autorefs-internal" title="InvalidStateError" href="#async_kernel.caller.InvalidStateError">InvalidStateError</a> exception.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the result of the Future.</span>

<span class="sd">    If the Future has been cancelled, this method raises a [FutureCancelledError][async_kernel.caller.FutureCancelledError] exception.</span>

<span class="sd">    If the Future isn&#39;t done yet, this method raises an [InvalidStateError][async_kernel.caller.InvalidStateError] exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancelled</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">InvalidStateError</span>
    <span class="k">if</span> <span class="n">e</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">exception</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">e</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.set_cancel_scope" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_cancel_scope</span>


<a href="#async_kernel.caller.Future.set_cancel_scope" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_cancel_scope</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future.set_cancel_scope(scope)">scope</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="anyio.CancelScope" href="https://anyio.readthedocs.io/en/stable/api.html#anyio.CancelScope">CancelScope</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Provide a cancel scope for cancellation.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_cancel_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scope</span><span class="p">:</span> <span class="n">anyio</span><span class="o">.</span><span class="n">CancelScope</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Provide a cancel scope for cancellation.&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cancelled</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cancel_scope</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidStateError</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cancel_scope</span> <span class="o">=</span> <span class="n">scope</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.set_exception" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_exception</span>


<a href="#async_kernel.caller.Future.set_exception" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_exception</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future.set_exception(exception)">exception</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#BaseException">BaseException</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the exception (thread-safe using Caller).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Set the exception (thread-safe using Caller).&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_set_value</span><span class="p">(</span><span class="s2">&quot;exception&quot;</span><span class="p">,</span> <span class="n">exception</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.set_result" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_result</span>


<a href="#async_kernel.caller.Future.set_result" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_result</span><span class="p">(</span><span class="n"><span title="async_kernel.caller.Future.set_result(value)">value</span></span><span class="p">:</span> <span class="n"><span title="async_kernel.typing.T">T</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the result (thread-safe using Caller).</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="s2">&quot;Set the result (thread-safe using Caller).&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_set_value</span><span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.Future.wait" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">wait</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.Future.wait" class="headerlink" title="Permanent link">&para;</a></h4>
          <div class="doc-overloads">
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">wait</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="timeout (async_kernel.caller.Future.wait(timeout))" href="#async_kernel.caller.Future.wait(timeout)">timeout</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="shield (async_kernel.caller.Future.wait(shield))" href="#async_kernel.caller.Future.wait(shield)">shield</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span> <span class="o">|</span> <span class="o">...</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="result (async_kernel.caller.Future.wait(result))" href="#async_kernel.caller.Future.wait(result)">result</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.T">T</span></span>
</code></pre></div><div class="doc-signature highlight"><pre><span></span><code><span class="nf">wait</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="timeout (async_kernel.caller.Future.wait(timeout))" href="#async_kernel.caller.Future.wait(timeout)">timeout</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="shield (async_kernel.caller.Future.wait(shield))" href="#async_kernel.caller.Future.wait(shield)">shield</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="o">...</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="result (async_kernel.caller.Future.wait(result))" href="#async_kernel.caller.Future.wait(result)">result</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Literal" href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a></span><span class="p">[</span><span class="kc">False</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>          </div>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">wait</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="timeout (async_kernel.caller.Future.wait(timeout))" href="#async_kernel.caller.Future.wait(timeout)">timeout</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="shield (async_kernel.caller.Future.wait(shield))" href="#async_kernel.caller.Future.wait(shield)">shield</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="result (async_kernel.caller.Future.wait(result))" href="#async_kernel.caller.Future.wait(result)">result</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="async_kernel.typing.T">T</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Wait for future to be done (thread-safe) returning the result if specified.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Future.wait(timeout)" class="doc doc-heading doc-heading-parameter">              <b><code>timeout</code></b>
<a href="#async_kernel.caller.Future.wait(timeout)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Timeout in seconds.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Future.wait(shield)" class="doc doc-heading doc-heading-parameter">              <b><code>shield</code></b>
<a href="#async_kernel.caller.Future.wait(shield)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Shield the future from cancellation.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="async_kernel.caller.Future.wait(result)" class="doc doc-heading doc-heading-parameter">              <b><code>result</code></b>
<a href="#async_kernel.caller.Future.wait(result)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether the result should be returned.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">wait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">shield</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wait for future to be done (thread-safe) returning the result if specified.</span>

<span class="sd">    Args:</span>
<span class="sd">        timeout: Timeout in seconds.</span>
<span class="sd">        shield: Shield the future from cancellation.</span>
<span class="sd">        result: Whether the result should be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">():</span>
            <span class="k">with</span> <span class="n">anyio</span><span class="o">.</span><span class="n">fail_after</span><span class="p">(</span><span class="n">timeout</span><span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_done</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="k">if</span> <span class="n">result</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">shield</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="s2">&quot;Cancelled with waiter cancellation.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.FutureCancelledError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">FutureCancelledError</span>


<a href="#async_kernel.caller.FutureCancelledError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>Used to indicate a <code>Future</code> is cancelled.</p>














    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.InvalidStateError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">InvalidStateError</span>


<a href="#async_kernel.caller.InvalidStateError" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">


        <p>An invalid state of a <a class="autorefs autorefs-internal" title="Future" href="#async_kernel.caller.Future">Future</a>.</p>














    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="async_kernel.caller.ReentrantAsyncLock" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ReentrantAsyncLock</span>


<a href="#async_kernel.caller.ReentrantAsyncLock" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ReentrantAsyncLock</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Implements a Reentrant asynchronous lock compatible with <a class="autorefs autorefs-internal" title="Caller" href="#async_kernel.caller.Caller">async_kernel.caller.Caller</a>.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Inside a coroutine running inside a thread where a [asyncio.caller.Caller][] instance is running.</span>

<span class="n">lock</span> <span class="o">=</span> <span class="n">ReentrantAsyncLock</span><span class="p">(</span><span class="n">reentrant</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># a reentrant lock</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">lock</span><span class="p">:</span>
        <span class="n">Caller</span><span class="p">()</span><span class="o">.</span><span class="n">to_thread</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  <span class="c1"># The lock is shared with the thread.</span>
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>The lock context can be exitied in any order.</li>
<li>A 'reentrant' lock can <em>release</em> control to another context and then re-enter later for
    tasks or threads called from a locked thread maintaining the same reentrant context.</li>
</ul>
</div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="acquire


  
      async
   (async_kernel.caller.ReentrantAsyncLock.acquire)" href="#async_kernel.caller.ReentrantAsyncLock.acquire">acquire</a></code></b>
            –
            <div class="doc-md-description">
              <p>Acquire a lock.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="is_in_context (async_kernel.caller.ReentrantAsyncLock.is_in_context)" href="#async_kernel.caller.ReentrantAsyncLock.is_in_context">is_in_context</a></code></b>
            –
            <div class="doc-md-description">
              <p>Returns <code>True</code> if the current context has the lock.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="release


  
      async
   (async_kernel.caller.ReentrantAsyncLock.release)" href="#async_kernel.caller.ReentrantAsyncLock.release">release</a></code></b>
            –
            <div class="doc-md-description">
              <p>Decrement the internal counter.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="count


  
      property
   (async_kernel.caller.ReentrantAsyncLock.count)" href="#async_kernel.caller.ReentrantAsyncLock.count">count</a></code></b>
              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>Returns the number of times the locked context has been entered.</p>
          </div>
        </li>
    </ul>

                  <details class="quote">
                    <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="p">:</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">ContextVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">contextvars</span><span class="o">.</span><span class="n">ContextVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lock:</span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">:</span> <span class="n">deque</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Future</span><span class="p">[</span><span class="n">Future</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="async_kernel.caller.ReentrantAsyncLock.count" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">count</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#async_kernel.caller.ReentrantAsyncLock.count" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">count</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the number of times the locked context has been entered.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.ReentrantAsyncLock.acquire" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">acquire</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.ReentrantAsyncLock.acquire" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">acquire</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Self" href="https://docs.python.org/3/library/typing.html#typing.Self">Self</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Acquire a lock.</p>
<p>If the lock is reentrant the internal counter increments to share the lock.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Acquire a lock.</span>

<span class="sd">    If the lock is reentrant the internal counter increments to share the lock.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">():</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Already locked and not reentrant!&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># Get the context.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="n">ctx</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">get</span><span class="p">()):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_count</span> <span class="o">=</span> <span class="n">ctx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="c1"># Check if we can lock or re-enter an active lock.</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span><span class="p">)</span> <span class="ow">and</span> <span class="p">((</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">())):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="n">ctx</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="c1"># Join the queue.</span>
    <span class="n">k</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Future</span><span class="p">[</span><span class="kc">None</span> <span class="o">|</span> <span class="n">Future</span><span class="p">[</span><span class="n">Future</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">Future</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">fut</span> <span class="o">=</span> <span class="k">await</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fut</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="n">ctx</span>
        <span class="n">fut</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reentrant</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">ctx</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                    <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.ReentrantAsyncLock.is_in_context" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_in_context</span>


<a href="#async_kernel.caller.ReentrantAsyncLock.is_in_context" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_in_context</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns <code>True</code> if the current context has the lock.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_in_context</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s2">&quot;Returns `True` if the current context has the lock.&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="async_kernel.caller.ReentrantAsyncLock.release" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">release</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#async_kernel.caller.ReentrantAsyncLock.release" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">release</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Decrement the internal counter.</p>
<p>If the current depth==1 the lock will be passed to the next queued or released if there isn't one.</p>


            <details class="quote">
              <summary>Source code in <code>src/async_kernel/caller.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">release</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decrement the internal counter.</span>

<span class="sd">    If the current depth==1 the lock will be passed to the next queued or released if there isn&#39;t one.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_in_context</span><span class="p">():</span>
        <span class="k">raise</span> <span class="n">InvalidStateError</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fut</span> <span class="o">=</span> <span class="n">Future</span><span class="p">()</span>
            <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
            <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">fut</span><span class="p">)</span>
            <span class="k">await</span> <span class="n">k</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_releasing</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_ctx_current</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 21, 2025 03:03:23 UTC"><span class="timeago" datetime="2025-08-21T03:03:23+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 21, 2025 03:03:23 UTC">2025-08-21</span>
  </span>

    
    
    
  </aside>





                 
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Reference">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Reference
              </div>
            </div>
          </a>
        
        
          
          <a href="../comm/" class="md-footer__link md-footer__link--next" aria-label="Next: Comm">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Comm
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy;   2025-present
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "content.code.copy", "toc.follow", "navigation.top", "header.autohide", "navigation.footer", "search.suggest", "search.highlight", "navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>